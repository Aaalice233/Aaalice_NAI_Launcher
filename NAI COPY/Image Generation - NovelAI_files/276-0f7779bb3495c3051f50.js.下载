(window.cbJsonP=window.cbJsonP||[]).push([[276],{192:function(e,t,r){"use strict";r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return E})),r.d(t,"d",(function(){return v})),r.d(t,"l",(function(){return _})),r.d(t,"j",(function(){return m})),r.d(t,"k",(function(){return y})),r.d(t,"i",(function(){return b})),r.d(t,"h",(function(){return k})),r.d(t,"c",(function(){return x})),r.d(t,"a",(function(){return T})),r.d(t,"m",(function(){return I})),r.d(t,"b",(function(){return C}));var n=r(4),a=r.n(n),i=r(6),o=r.n(i),c=r(16),s=r.n(c),u=r(126),h=r(23),p=r(5),l=r(194),d=r(50),f=function(e,t){return g(e,(function(){return!!window[t]}),t)},g=function(e,t,r){return new s.a((function(n,a){if(1==t())n(!0);else{var i=window.setTimeout((function(){return a(h.e.scriptLoadError)}),5e4);E(e,(function e(){1==t()?(clearTimeout(i),window.setTimeout((function(){return n(!0)}),100)):window.setTimeout(e,100)}),(function(){a(h.e.scriptLoadError)}),r)}}))},E=function(e,t,r,n){var a=document.createElement("script");a.onload=t,a.onerror=r;var i=window._hp_csp_nonce;p.a.getCbInstance()&&p.a.getCbInstance().options&&(i=i||p.a.getCbInstance().options.cspNonce),i&&(a.setAttribute("nonce",i),a.setAttribute("data-csp-nonce",i)),n&&a.setAttribute("data-namespace",n),document.head.appendChild(a),a.src=e},v=function(e){return new s.a((function(t,r){for(var n=document.styleSheets,a=0,i=n.length;a<i;a++)n[a].href==e&&t(!0);var o=document.createElement("link");o.rel="stylesheet",o.href=e,document.getElementsByTagName("head")[0].appendChild(o),window.setTimeout((function(){return t(!0)}),100)}))},_=function(e){if(!(e.expiryMonth&&e.expiryYear&&e.number))throw new h.a(h.e.missingCardDetails);if(e.expiryYear&&2==e.expiryYear.length){var t=(new Date).getFullYear().toString();e.expiryYear=t.slice(0,2)+e.expiryYear}return!0},m=function(e){return e&&"object"==(void 0===e?"undefined":o()(e))&&e.constructor===Object?b({firstName:w(e.firstName),lastName:w(e.lastName),phone:w(e.phone),addressLine1:w(e.addressLine1),addressLine2:w(e.addressLine2),addressLine3:w(e.addressLine3),city:w(e.city),state:w(e.state),stateCode:w(e.stateCode),countryCode:w(e.countryCode),zip:w(e.zip)||"number"==typeof e.zip?e.zip.toString():void 0}):{}},y=function(e){return e&&"object"==(void 0===e?"undefined":o()(e))&&e.constructor===Object?b({firstName:w(e.firstName),lastName:w(e.lastName),phone:w(e.phone),email:w(e.email)}):{}};function b(e){return e&&e.constructor===Object?a()(e).filter((function(t){return void 0!==e[t]})).reduce((function(t,r){return t[r]=e[r],t}),{}):e}function k(e){return"string"!=typeof e?e:e.replace(/\D/g,"")}function w(e){if("string"==typeof e&&e.length)return e}function x(e){var t={Authorization:"Bearer "+e.paymentIntentId};return e.businessEntityId&&(t[u.a]=e.businessEntityId),t}function T(e,t){var r=e.id,n=e.business_entity_id,a=e.reference_id;if(t)try{var i=p.a.getCbInstance();i&&i.options&&i.options.locale&&!t.locale&&(t.locale=i.options.locale)}catch(e){d.a.kvl({action:"locale_error",error:Object(l.a)(e)})}var o={paymentIntentId:r,payload:t};return a&&(o.referenceId=a),n&&(o.businessEntityId=n),o}function I(e){if(e.isResolved)return e;var t=!0,r=!1,n=!1,a=e.then((function(e){return n=!0,e})).catch((function(e){throw r=!0,e})).finally((function(){t=!1}));return a.isResolved=function(){return n},a.isPending=function(){return t},a.isFulfilled=function(){return!t},a.isRejected=function(){return r},a}function C(e,t){var r=void 0;return function(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];r&&clearTimeout(r),r=setTimeout((function(){e.apply(void 0,a)}),t)}}},194:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(25),a=r.n(n),i=r(94),o=r.n(i),c=r(3),s=r.n(c),u=r(7),h=r.n(u),p=r(95),l=r.n(p),d=r(96),f=r.n(d),g=r(23),E=r(28),v=r(15);function _(e,t){if("string"==typeof e.name&&e.name.startsWith("PAYMENT_ATTEMPT_")){if(e.code)switch(e.code){case"amount_too_small":case"card_declined":case"expired_card":case"incorrect_cvc":case"incorrect_number":case"incorrect_zip":case"processing_error":case"token_already_used":return Object(E.d)("displayError."+e.code,null,t)}return""}return"string"==typeof e.code&&"INVALID_OR_MISSING_PAYMENT_INFO"===e.name?Object(E.d)("displayError.invalid_or_missing_payment_info",null,t):"string"==typeof e.code&&(e.code.startsWith("error.master")||e.code.startsWith("error.threedsecure"))?Object(E.d)("displayError.tryAgain",null,t):Object(E.d)("displayError.common",null,t)}function m(e,t){if(e instanceof y)return e;if(e instanceof g.a){var r=e;return r.displayMessage=_(e,t),r}return"string"==typeof e?{message:e,displayMessage:e}:(e.displayMessage=_(e,t),e)}var y=function(e){function t(e,r,n){s()(this,t);for(var a=arguments.length,i=Array(a>3?a-3:0),c=3;c<a;c++)i[c-3]=arguments[c];var u=l()(this,(t.__proto__||o()(t)).call(this,e,r,n,i));return u.displayMessage=_(u,n),u}return f()(t,e),h()(t,[{key:"toJSON",value:function(){var e=Object(v.o)(this);return e.displayMessage=this.displayMessage,e}},{key:"toString",value:function(){return"class Extended CbError "+a()(this.toJSON(),null,2)}}]),t}(g.a)},236:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.GOOGLE_RECAPTCHA="google_recaptcha",e.TURNSTILE="turnstile",e.HCAPTCHA="hcaptcha"}(n||(n={}))},489:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n,a=r(35),i=r.n(a),o=r(61),c=r.n(o),s=r(16),u=r.n(s),h=r(3),p=r.n(h),l=r(7),d=r.n(l),f=r(23),g=r(192),E=r(15),v=r(10);!function(e){e[e.ExecuteOnce=0]="ExecuteOnce",e[e.ExecuteAllAttempts=1]="ExecuteAllAttempts"}(n||(n={}));var _=function(){function e(t,r){p()(this,e),this.MAX_RETRIES=5,this.EXEC_TIMEOUT=1e4,this.preparedPromise=null,this.callable=t,this.options=r}return d()(e,[{key:"setMaxRetries",value:function(e){return this.MAX_RETRIES=e,this}},{key:"setExecutionTimeout",value:function(e){return this.EXEC_TIMEOUT=e,this}},{key:"triggerErrorCallback",value:function(e,t){try{var r=this.options.onError;if(r&&"function"==typeof r){var n={cb_retry_attempt:e,cb_retry_error:Object(E.o)(t)};this.options.actionName&&"string"==typeof this.options.actionName&&(n.cb_action_name=this.options.actionName),r(n)}}catch(e){Object(v.a)()&&console.error(e)}}},{key:"execute",value:function(){var e=this;return this.options.strategy===n.ExecuteOnce&&this.preparedPromise?this.preparedPromise.isRejected()?u.a.reject(new f.a(this.options.errors.maxAttemptsReached)):this.preparedPromise:(this.preparedPromise=Object(g.m)(new u.a((function(t,r){var n,a=0,o=void 0,s=function(t){if(++a>e.MAX_RETRIES){clearTimeout(o);var n=new f.a(t||e.options.errors.maxAttemptsReached);return e.triggerErrorCallback(a-1,n),r(n)}e.triggerErrorCallback(a-1,t),u()},u=(n=c()(i.a.mark((function r(){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,clearTimeout(o),o=setTimeout((function(){return s(e.options.errors.executionTimeout)}),e.EXEC_TIMEOUT),r.next=4,e.callable();case 4:n=r.sent,a=n,clearTimeout(o),t(a),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),s(r.t0);case 11:case"end":return r.stop()}var a}),r,e,[[0,8]])}))),function(){return n.apply(this,arguments)});u()}))),this.preparedPromise)}}]),e}();t.b=_},584:function(e,t,r){"use strict";r.r(t);var n=r(35),a=r.n(n),i=r(61),o=r.n(i),c=r(3),s=r.n(c),u=r(7),h=r.n(u),p=r(236),l=r(16),d=r.n(l),f=r(94),g=r.n(f),E=r(95),v=r.n(E),_=r(96),m=r.n(_),y=r(10),b=r(23),k=r(28),w=r(489),x=function(){function e(t){s()(this,e),this.CAPTCHA_LOAD_TIMEOUT=3e4,this.CAPTCHA_GENERATE_TOKEN_TIMEOUT=1e4,this.MAX_RETRIES_GENERATE_TOKEN=3,this.MAX_RETRIES_INITIALIZE=5,this.options=t}return h()(e,[{key:"getSiteKey",value:function(){return this.options.siteKey}},{key:"getSdkEndpoint",value:function(){return this.options.sdkEndpoint}},{key:"initialize",value:function(){var e=this;return this.initializer||(this.initializer=new w.b((function(){return e.load()}),{actionName:"captcha_initialization",errors:{executionTimeout:Object(k.d)(b.e.recaptchaLoadTimeout),maxAttemptsReached:Object(k.d)(b.e.captchaInitializationMaxRetryOver)},strategy:w.a.ExecuteOnce,onError:this.options.onError}).setExecutionTimeout(this.CAPTCHA_LOAD_TIMEOUT).setMaxRetries(this.MAX_RETRIES_INITIALIZE)),this.initializer.execute()}},{key:"generateToken",value:function(e){var t=this;return new w.b(o()(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.initialize();case 2:return r.next=4,t.execute(e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r,t)}))),{actionName:"captcha_generate_token",errors:{executionTimeout:Object(k.d)(b.e.recaptchaInitiationTimeout),maxAttemptsReached:Object(k.d)(b.e.captchaGenerateTokenMaxRetryOver)},onError:this.options.onError}).setExecutionTimeout(this.CAPTCHA_GENERATE_TOKEN_TIMEOUT).setMaxRetries(this.MAX_RETRIES_GENERATE_TOKEN).execute()}},{key:"loadScript",value:function(){var e=this;return new d.a((function(t,r){if(e.script||!e.getSiteKey())return t();var n=document.createElement("script");n.src=e.getScriptURL(),n.async=!1,n.defer=!1,n.onload=function(){e.script=n,t()},n.onerror=function(){n.remove(),r(new b.a(Object(k.d)(b.e.recaptchaScriptLoadFailed)))},document.head.appendChild(n)}))}}]),e}(),T=function(e){function t(){return s()(this,t),v()(this,(t.__proto__||g()(t)).apply(this,arguments))}var r,n,i;return m()(t,e),h()(t,[{key:"getScriptURL",value:function(){return"https://challenges.cloudflare.com/turnstile/v0/api.js?compat=recaptcha"}},{key:"load",value:(i=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadScript();case 2:return e.next=4,new d.a((function(e){return turnstile.ready(e)}));case 4:return this.createContainer(),e.next=7,this.render();case 7:this.widgetId=e.sent;case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"handleTokenCallback",value:function(e){this.tokenResolver&&this.tokenResolver(e)}},{key:"handleErrorCallBack",value:function(e,t){Object(y.a)()&&console.error(e,t),this.tokenRejector&&this.tokenRejector(t)}},{key:"render",value:(n=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new d.a((function(e,r){t.tokenRejector=r;var n=turnstile.render(t.container,{sitekey:t.getSiteKey(),execution:"execute",callback:function(e){return t.handleTokenCallback(e)},"error-callback":function(e){t.handleErrorCallBack("error",e)},"unsupported-callback":function(e){t.handleErrorCallBack("unsupported",e)},"expired-callback":function(e){t.handleErrorCallBack("expired",e)},"timeout-callback":function(e){t.handleErrorCallBack("timeout",e)}});n&&e(n)})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"execute",value:(r=o()(a.a.mark((function e(t){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new d.a((function(e,n){r.tokenResolver=e,r.tokenRejector=n;try{turnstile.reset(r.widgetId)}catch(e){var a={action:"cbjs_recaptcha_error",error_message:("string"==typeof e?e:e.message)||"",error_name:e.name,hp_step:"captcha_reset",captcha_config:r.options};r.options.onError&&r.options.onError(a)}turnstile.execute(r.container,{action:t})})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"createContainer",value:function(){var e=document.createElement("div");e.id="captcha_container",e.setAttribute("class",e.id),document.body.appendChild(e),this.container=e}}]),t}(x),I=function(e){function t(){var e,r,n,a;s()(this,t);for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];return r=n=v()(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(o))),n.scriptLoadCount=0,a=r,v()(n,a)}var r;return m()(t,e),h()(t,[{key:"load",value:(r=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadScript();case 2:return e.next=4,new d.a((function(e){grecaptcha.ready((function(){var t=document.querySelector(".grecaptcha-badge");t&&(t.style.visibility="hidden"),e(null)}))}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"execute",value:function(e){return grecaptcha.execute(this.getSiteKey(),{action:e})}},{key:"getScriptURL",value:function(){var e=this.options.isGlobalRecaptcha?"recaptcha.net":"google.com";return++this.scriptLoadCount>this.MAX_RETRIES_INITIALIZE-1&&(e="recaptcha.net"),"https://www."+e+"/recaptcha/api.js?render="+this.getSiteKey()}}]),t}(x),C=r(6),L=r.n(C);function A(e){return"string"==typeof e?e:e instanceof Error?e.message:e&&"object"===(void 0===e?"undefined":L()(e))&&"message"in e?String(e.message):String(e)||"Unknown error"}function S(e){return e instanceof Error?e.name:e&&"object"===(void 0===e?"undefined":L()(e))&&"name"in e?String(e.name):"unknown_error"}var O={NOT_INITIALIZED:"hCaptcha is not initialized",WIDGET_ID_MISSING:"hCaptcha widget ID is not available",NO_RESPONSE_RECEIVED:"No response received from hCaptcha"},R={SDK_NOT_AVAILABLE:"hCaptcha SDK not available for rendering",INVALID_WIDGET_ID:"Failed to render hCaptcha widget - render returned invalid ID"},N={TOKEN_EXPIRED:"Token expired",CHALLENGE_EXPIRED:"Challenge expired"},j=(r(568),r(569),function(e){function t(){var e,r,n,a;s()(this,t);for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];return r=n=v()(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(o))),n.widgetId="",n.hcaptcha=null,a=r,v()(n,a)}var r,n,i;return m()(t,e),h()(t,[{key:"load",value:(i=o()(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.createContainer(),e.prev=1,r={scriptLocation:document.body},this.getSdkEndpoint()&&(r.scriptSource=this.getSdkEndpoint()),this.debugLog("Loading hCaptcha with loader options",{endpoint:this.getSdkEndpoint()}),e.next=7,window.hCaptchaLoader(r);case 7:return this.hcaptcha=e.sent,e.next=10,this.render(t);case 10:this.widgetId=e.sent,e.next=25;break;case 13:return e.prev=13,e.t0=e.catch(1),this.debugLog("hCaptcha loader failed, attempting script load fallback",{error:e.t0}),n=new d.a((function(e){window.hCaptchaLoadCallback=e})),e.next=19,this.loadScript();case 19:return e.next=21,n;case 21:return this.hcaptcha=window.hcaptcha,e.next=24,this.render(t);case 24:this.widgetId=e.sent;case 25:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return i.apply(this,arguments)})},{key:"execute",value:(n=o()(a.a.mark((function e(t){var r,n,i,o,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hcaptcha){e.next=4;break}throw r=O.NOT_INITIALIZED,this.debugLog("execute: hCaptcha not initialized"),new b.a(r);case 4:if(this.widgetId){e.next=8;break}throw n=O.WIDGET_ID_MISSING,this.debugLog("execute: widget ID missing"),new b.a(n);case 8:return e.prev=8,this.debugLog("execute: Starting token generation",{widgetId:this.widgetId,action:t}),e.next=12,this.hcaptcha.execute(this.widgetId,{async:!0});case 12:if((i=e.sent)&&i.response){e.next=18;break}throw o=O.NO_RESPONSE_RECEIVED,this.debugLog("execute: Empty response from hCaptcha"),this.handleError("execute_failed",o),new b.a(o);case 18:return this.handleSuccess(i.response,t),e.abrupt("return",i.response);case 22:if(e.prev=22,e.t0=e.catch(8),!(e.t0 instanceof b.a)){e.next=28;break}throw this.debugLog("execute: CbError caught",{message:e.t0.message}),this.handleError("execute_error",e.t0),e.t0;case 28:throw c=A(e.t0),s=S(e.t0),this.debugLog("execute: Exception caught",{errorName:s,errorMessage:c}),this.handleError("execute_exception",e.t0),new b.a(c);case 33:case"end":return e.stop()}}),e,this,[[8,22]])}))),function(e){return n.apply(this,arguments)})},{key:"getScriptURL",value:function(){return"https://js.hcaptcha.com/1/api.js?onload=hCaptchaLoadCallback&render=explicit"}},{key:"render",value:(r=o()(a.a.mark((function e(t){var r,n,i,o,c,s,u,h=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hcaptcha){e.next=4;break}throw r=R.SDK_NOT_AVAILABLE,this.debugLog("render: hCaptcha SDK not available"),new b.a(r);case 4:if(e.prev=4,n=this.getSiteKey(),this.debugLog("render: Rendering hCaptcha widget",{siteKey:(n?n.substring(0,15):"")+"..."}),i={sitekey:this.getSiteKey(),callback:function(e){return h.handleCallback(e,"success")},"error-callback":function(e){return h.handleCallback(A(e),"error")},"expired-callback":function(){return h.handleCallback(N.TOKEN_EXPIRED,"expired")},"chalexpired-callback":function(){return h.handleCallback(N.CHALLENGE_EXPIRED,"chalexpired")},"open-callback":function(){return h.handleCallback("opened","opened")},"close-callback":function(){return h.handleCallback("closed","closed")}},null!=(o=this.hcaptcha.render(t,i))){e.next=13;break}throw c=R.INVALID_WIDGET_ID,this.debugLog("render: Widget ID is invalid",{widgetId:o}),new b.a(c);case 13:return this.debugLog("render: Widget rendered successfully",{widgetId:o}),e.abrupt("return",String(o));case 17:if(e.prev=17,e.t0=e.catch(4),!(e.t0 instanceof b.a)){e.next=23;break}throw this.debugLog("render: CbError caught",{message:e.t0.message}),this.reportErrorEvent({action:"cbjs_recaptcha_error",error_message:e.t0.message,error_name:e.t0.name,hp_step:"hcaptcha_render",captcha_config:this.options}),e.t0;case 23:throw s=A(e.t0),u=S(e.t0),this.debugLog("render: Exception caught",{errorName:u,errorMessage:s}),this.reportErrorEvent({action:"cbjs_recaptcha_error",error_message:s,error_name:u,hp_step:"hcaptcha_render",captcha_config:this.options}),new b.a(s);case 28:case"end":return e.stop()}}),e,this,[[4,17]])}))),function(e){return r.apply(this,arguments)})},{key:"handleCallback",value:function(e,t){this.debugLog("handleCallback",{callbackType:t,value:"success"===t?"[token]":e});["expired","chalexpired"].includes(t)&&this.reportErrorEvent({action:"cbjs_recaptcha_error",error_message:e,error_name:t,callback_type:t,hp_step:"hcaptcha_"+t,captcha_provider:"hcaptcha",timestamp:(new Date).toISOString()})}},{key:"handleSuccess",value:function(e,t){this.debugLog("handleSuccess",{action:t,tokenLength:e.length,tokenHash:this.hashToken(e)}),this.reportEventData({action:"hcaptcha_token_success",hp_step:"hcaptcha_token_generated",callback_type:"success",captcha_provider:"hcaptcha",token_hash:this.hashToken(e),siteKey:this.getSiteKey()?this.getSiteKey().substring(0,15)+"...":"unknown",timestamp:(new Date).toISOString()})}},{key:"handleError",value:function(e,t){var r=A(t),n=S(t);this.debugLog("handleError",{callbackType:e,errorName:n,errorMessage:r}),this.reportErrorEvent({action:"cbjs_recaptcha_error",error_message:r,error_name:n,callback_type:e,hp_step:"hcaptcha_"+e,captcha_provider:"hcaptcha",captcha_config:this.options,timestamp:(new Date).toISOString()})}},{key:"reportErrorEvent",value:function(e){try{this.options.onError&&"function"==typeof this.options.onError&&this.options.onError(e),this.options.logToKVL&&"function"==typeof this.options.logToKVL&&this.options.logToKVL(e)}catch(e){this.debugLog("reportErrorEvent: Exception in callback",{error:e})}}},{key:"reportEventData",value:function(e){try{this.options.onError&&"function"==typeof this.options.onError&&this.options.onError(e),this.options.logToKVL&&"function"==typeof this.options.logToKVL&&this.options.logToKVL(e)}catch(e){this.debugLog("reportEventData: Exception in callback",{error:e})}}},{key:"hashToken",value:function(e){try{return e&&"string"==typeof e?e.substring(0,10)+"..."+e.substring(Math.max(0,e.length-10))+"(len:"+e.length+")":"invalid_token"}catch(e){return this.debugLog("hashToken: Exception during hashing",{error:e}),"hash_error"}}},{key:"createContainer",value:function(){var e=document.createElement("div");return e.id="captcha_container",e.setAttribute("class",e.id),e.setAttribute("data-size","invisible"),document.body.appendChild(e),this.debugLog("createContainer: Container created",{containerId:e.id}),e}},{key:"debugLog",value:function(e,t){if(Object(y.a)()){t?console.log("[HCaptcha] "+e,t):console.log("[HCaptcha] "+e)}}}]),t}(x)),M=function(){var e,t,r;function n(e){s()(this,n),this.errors=[],this.commMgr=e}return h()(n,[{key:"initialize",value:function(e){var t=this;if(this.options=e,this.options.onError=function(e){return t.logError(e)},this.options.logToKVL=function(e){return t.logToKVL(e)},this.resetErrorLogs(),this.loadCaptcha)return Object(y.a)()&&console.warn("returning preloaded captcha instance",this.captcha.constructor.name),this.loadCaptcha;switch(e.provider){case p.a.TURNSTILE:this.captcha=new T(e);break;case p.a.HCAPTCHA:this.captcha=new j(e);break;case p.a.GOOGLE_RECAPTCHA:default:this.captcha=new I(e)}return this.loadCaptcha=this.commMgr.getCheckoutUtilsPlugin().then((function(e){return e.getInfo()})).then((function(){return t.captcha.initialize()})).then((function(){return{success:!0}})),this.loadCaptcha}},{key:"getErrors",value:function(){return this.errors}},{key:"logError",value:function(e){this.errors.push(e)}},{key:"logToKVL",value:(r=o()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.commMgr.getLoggerPlugin();case 3:e.sent.captureKVL(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(y.a)()&&console.error("Failed to log captcha error to KVL:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return r.apply(this,arguments)})},{key:"resetErrorLogs",value:function(){this.errors=[]}},{key:"generateToken",value:(t=o()(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"==typeof t?t:t&&t.action,this.captcha){e.next=4;break}return Object(y.a)()&&console.warn("Captcha provider not set. Missing siteKey and provider"),e.abrupt("return");case 4:return this.resetErrorLogs(),e.next=7,this.loadCaptcha;case 7:return e.next=9,this.captcha.generateToken(r);case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"init",value:(e=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]),n}();t.default=M}}]);
//# sourceMappingURL=276-0f7779bb3495c3051f50.js.map