!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e190badb-dd4c-49c5-9a08-2871de53699d",e._sentryDebugIdIdentifier="sentry-dbid-e190badb-dd4c-49c5-9a08-2871de53699d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4682,4803],{1037:(e,t,i)=>{i.d(t,{s:()=>o});var n=i(94458),s=i(68658);function o(){let[e,t]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=setInterval(()=>{t(e=>(e+1)%3)},400);return()=>clearInterval(e)},[]),(0,n.jsx)(n.Fragment,{children:[0,1,2].map(t=>(0,n.jsx)("span",{style:{opacity:+(t<=e)},children:"."},t))})}},14803:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(94458),s=i(68658),o=i(55805),r=i(41963),l=i(97223),a=i(19058),d=i(52746),c=i(2834);let h=(0,s.lazy)(()=>Promise.all([i.e(8566),i.e(2252),i.e(5942),i.e(6126),i.e(3921),i.e(997),i.e(5658),i.e(565),i.e(2751),i.e(6346),i.e(8305),i.e(7664),i.e(2979),i.e(9335)]).then(i.bind(i,59335))),g=o.Ay.div.withConfig({componentId:"sc-8c034443-0"})(["display:flex;background-color:",";font-weight:600;height:100%;width:100%;color:",";opacity:",";transition:opacity ease-in-out 0.2s;"],e=>e.theme.colors.bg2,e=>e.theme.colors.textMain,e=>e.fadeModal?"0.4":"1"),p=(0,o.Ay)(g).withConfig({componentId:"sc-8c034443-1"})(["min-width:320px;height:100%;width:100%;@media (max-width:800px){width:max(1160px,65%);height:max(650px,75%);}display:flex;align-items:center;justify-content:space-around;"]);function u(e){let[t,i]=(0,c.fp)(l.BQ),o=(0,c.md)(l.Nn),[u,m]=(0,s.useState)(!1),x=(0,s.useCallback)(()=>{i(-1),(0,r.c7)(o).saveSettings(o.settings)},[o,i]);return(0,n.jsx)(d.A,{isOpen:t>=0,onRequestClose:()=>x(),shouldCloseOnOverlayClick:!0,type:d.q.Large,maxSize:!0,children:(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(p,{children:(0,n.jsx)(a.k,{visible:!0})}),children:(0,n.jsx)(g,{fadeModal:u,children:(0,n.jsx)(h,{onClose:x,setFadeModal:m,settingsMode:e.settingsMode,pageWhitelist:e.pageWhitelist})})})})}},44595:(e,t,i)=>{i.d(t,{k:()=>d});var n=i(94458),s=i(68658),o=i(52746),r=i(14666),l=i(73484),a=i(81336);function d(){let e=(0,l.B2)(),[t,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=setInterval(()=>{let e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAEAQMAAACTPww9AAAABlBMVEX///////9VfPVsAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAC0lEQVQImWNggAAAAAgAAa9T6iIAAAAASUVORK5CYII=",e.addEventListener("load",()=>{let t=document.createElement("canvas");t.width=4,t.height=4;let n=t.getContext("2d");if(n){n.drawImage(e,0,0,4,4);let t=n.getImageData(0,0,4,4),s=!0;for(let e=0;e<t.data.length;e+=4)if(t.data[e]<100&&t.data[e+1]<100&&t.data[e+2]<100){s=!1;break}s||i(!0)}})},3e5);return()=>clearInterval(e)},[]),(0,n.jsx)(o.A,{isOpen:t,onRequestClose:()=>i(!1),shouldCloseOnOverlayClick:!1,type:o.q.Generic,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",minHeight:"200px",padding:"30px",maxWidth:"400px"},children:[(0,n.jsx)(a.J,{onClick:()=>i(!1),children:(0,n.jsx)("div",{})}),(0,n.jsx)(r.Y9,{style:{fontSize:"1.5rem",marginBottom:"10px"},children:e.image.firefoxCanvasBug.title}),(0,n.jsx)("p",{children:e.image.firefoxCanvasBug.description[0]}),(0,n.jsx)("p",{children:e.image.firefoxCanvasBug.description[1]}),(0,n.jsx)("p",{children:e.image.firefoxCanvasBug.description[2]})]})})}},62006:(e,t,i)=>{i.d(t,{A:()=>p});var n=i(68658),s=i(88587),o=i(71928),r=i(776),l=i(27524),a=i(97223),d=i(56314),c=i(2834),h=i(98883);let g=(0,d.eU)(!1);function p(){let[e,t]=(0,c.fp)(a.Nn),[i,d]=(0,c.fp)(g),{remainingImageActions:p,fetchTrialActionCount:u}=(0,h.R9)(),[m,x]=(0,n.useState)(!1),f=async()=>{e.noAccount||(x(!0),u().then(()=>{x(!1)}))};return{fetchSteps:async()=>{e.noAccount||(d(!0),(0,r.u)(s.e2.Subscriptions,{mode:"cors",cache:"no-store",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.auth_token},method:"GET"}).then(async e=>{if(!e.ok)throw(0,o.vV)(e),await (0,l.dX)(e);return e.json()}).then(i=>{t({...e,subscription:i}),d(!1)}).catch(()=>{d(!1)}),await f())},fetchingSteps:i}}},87788:(e,t,i)=>{i.d(t,{O:()=>r});var n=i(2834),s=i(97223),o=i(68658);function r(){let[e,t]=(0,n.fp)(s.OK),[i,r]=(0,n.fp)((0,s.z7)(e.image||0)),l=(0,o.useMemo)(()=>i&&0!==i.length&&i[e.subimage||0]||null,[i,e]),a=(0,o.useMemo)(()=>e&&l?l.data[Math.min(e.variation,l.data.length-1)]:null,[l,e]);return{selectedImage:e,setSelectedImage:t,images:i,setImages:r,selectedSubImage:l,selectedVariationData:a}}},89483:(e,t,i)=>{i.d(t,{I:()=>u});var n=i(94458),s=i(2834),o=i(52746),r=i(78072),l=i(73484),a=i(89077),d=i(14666),c=i(55805),h=i(21715),g=i(96638),p=i.n(g);function u(){let e=(0,l.B2)(),[t,i]=(0,s.fp)(r.gQ);return(0,n.jsx)(o.A,{isOpen:t.modalOpen,onRequestClose:()=>{},type:o.q.Generic,children:(0,n.jsxs)("div",{style:{padding:"20px"},children:[(0,n.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.5rem",paddingBottom:"12px"},children:(0,n.jsx)(d.Y9,{children:e.image.historyPersist.loadAPreviousSession})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[t.histories.map(i=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[i.recentThumbnail&&(0,n.jsx)(m,{children:(0,n.jsx)("img",{src:i.recentThumbnail,alt:i.name,height:"80",width:"80",style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",objectFit:"contain"}})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,n.jsxs)("div",{children:[i.name," ",`(${(0,h.LP)(e.image.historyPersist.xImages,i.imageCount)})`]}),(0,n.jsx)("div",{children:(0,h.LP)(e.image.historyPersist.lastSavedAt,p()(i.lastSavedAt).format("YYYY/MM/DD @ hh:mma"))}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)(x,{onClick:()=>{t.onRemoveHistory&&t.onRemoveHistory(i.id)},children:e.common.delete}),(0,n.jsx)(x,{onClick:()=>{t.onUseHistory&&t.onUseHistory(i.id)},children:e.image.historyPersist.load})]})]})]},i.id)),(0,n.jsx)("div",{style:{paddingTop:"20px"},children:(0,n.jsx)(x,{onClick:()=>{t.onNewHistory&&t.onNewHistory()},children:e.image.historyPersist.newSession})})]})]})})}let m=c.Ay.div.withConfig({componentId:"sc-2343092b-0"})(["height:80px;width:80px;position:relative;background-color:",";border:1px solid ",";border-radius:4px;"],e=>e.theme.colors.bg1,e=>e.theme.colors.bg3),x=(0,c.Ay)(a.ur).withConfig({componentId:"sc-2343092b-1"})(["padding:4px 12px;border-radius:4px;"])},90129:(e,t,i)=>{i.d(t,{rA:()=>eU,Dz:()=>eV,CJ:()=>eY,A6:()=>eK,uh:()=>e1,Gm:()=>e9,lr:()=>e4,yp:()=>ti,sx:()=>e2,LG:()=>eZ});var n=i(94458),s=i(55805),o=i(73484),r=i(41609),l=i(92704),a=i(94286),d=i(89077),c=i(68658),h=i(97223),g=i(50884),p=i(14666),u=i(41879),m=i(84601),x=i(88291),f=i(41963),y=i(2834),b=i(73060),w=i(21715);function j(e){let{extraContent:t}=e,i=(0,o.B2)(),s=(0,y.md)((0,h.ey)("settings")),r=(0,b.yF)((0,c.useCallback)((e,t,i)=>{t(h.Nn,e=>{let t={...e,settings:{...e.settings,uiLanguage:i}};return(0,f.c7)(t).saveSettings(t.settings),t})},[]));return(0,n.jsxs)(u.wt,{style:{maxWidth:"100vw",width:"300px",maxHeight:"100vh",height:"200px",justifyContent:"flex-start",overflowY:"auto"},children:[(0,n.jsx)(u._C,{min:20,max:20}),(0,n.jsx)(g.hE,{children:i.settings.uiLanguage}),(0,n.jsx)(u._C,{min:5,max:5}),(0,n.jsx)("div",{style:{minWidth:"200px",width:"100%"},children:(0,n.jsx)(x.l6,{isSearchable:!1,"aria-label":"Select a language",options:Object.entries(w.TL).map(e=>{let[t,i]=e;return{value:t,description:`${i}`,label:(0,n.jsxs)(u.Ye,{children:[(0,n.jsx)("strong",{children:i}),(0,n.jsx)("img",{src:w.pt[t],width:16,height:16,alt:`${w.TL[t]}`})]})}}),onChange:e=>e&&r(e.value),value:{value:(0,m.cv)(s,"uiLanguage"),description:`${w.TL[(0,m.cv)(s,"uiLanguage")]}`,label:(0,n.jsxs)(u.Ye,{children:[(0,n.jsx)("div",{children:w.TL[(0,m.cv)(s,"uiLanguage")]}),(0,n.jsx)("img",{src:w.pt[(0,m.cv)(s,"uiLanguage")],width:16,height:16,alt:`${w.TL[(0,m.cv)(s,"uiLanguage")]}`})]})},alternate:!0})}),t]})}var v=i(52746),C=i(48370),k=i(88587),A=i(71928),I=i(776),S=i(27524),D=i(47644),M=i(81336),T=i(53875),E=i(46181),L=i(19539),R=i(26546),O=i(29852),P=i(58286),B=i(83513);let H=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-0"})(["display:flex;flex-direction:column;align-items:stretch;justify-content:center;height:100%;gap:10px;overflow-y:auto;position:relative;"]),z=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-1"})(["overflow-y:auto;display:flex;flex-direction:column;gap:10px;height:100%;position:relative;"]),_=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-2"})(["margin-bottom:1rem;display:flex;flex-direction:column;justify-content:center;flex:1;"]),$=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-3"})(["display:flex;justify-content:center;flex:1;"]),F=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-4"})(["color:",";"],e=>e.theme.colors.warning),N=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-5"})(["white-space:pre-wrap;color:",";"],e=>e.theme.colors.textHeadings),W=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-6"})(["display:flex;flex-direction:row;"]),q=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-7"})(["&:not(:last-child){margin-right:20px;}padding:10px 15px;flex:1 1 auto;border:1px solid ",";width:auto;display:flex;flex-direction:column;flex-wrap:wrap;> div:nth-child(2){font-size:1.5rem;color:",";}"],e=>(0,D.No)(.9,e.theme.colors.textMain),e=>e.theme.colors.textHeadings),U=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-8"})(["display:flex;flex-direction:row;flex-wrap:wrap;gap:20px;justify-content:center;overflow-y:auto;"]),V=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-9"})(["background:",";padding:20px;position:relative;cursor:pointer;display:flex;flex-direction:column;align-items:center;flex:1 1 30%;min-width:200px;margin-bottom:10px;cursor:default;user-select:none;& div:nth-child(1){font-size:1.1rem;font-weight:600;}& div:nth-child(2){color:",";font-size:2.4rem;line-height:3.2rem;font-weight:700;white-space:pre;}& button:last-child{width:100%;margin-top:15px;background:",";padding:10px;display:flex;flex-direction:column;align-items:center;border:2px solid transparent;border-radius:3px;border:1px solid transparent;&:hover,&:focus{border:1px solid ",";}&:active{background:",";}}"],e=>e.theme.colors.bg1,e=>e.theme.colors.textHeadings,e=>e.theme.colors.bg3,e=>e.theme.colors.textHeadings,e=>e.theme.colors.bg0),X=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-10"})(["position:absolute;width:100%;height:100%;top:0;left:0;display:flex;flex-direction:column;justify-content:flex-end;background:",";"],e=>(0,D.No)(.5,e.theme.colors.bg2)),G=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-11"})(["background:",";padding:20px;padding-bottom:0;border-top:1px solid ",";display:flex;flex-direction:row;"],e=>e.theme.colors.bg2,e=>(0,D.No)(.9,e.theme.colors.textMain)),Y=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-12"})(["display:flex;flex-direction:row;justify-content:flex-end;padding:0;width:100%;> div{flex:0 1 50%;display:flex;flex-direction:column;align-items:flex-end;justify-content:center;margin-right:20px;p{margin:0;}&:last-child{margin-right:0;margin-left:20px;align-items:flex-start;}> div:first-child{display:flex;flex-direction:column;}}@media (max-width:400px){align-items:center;flex-direction:column;> div{margin-right:0;margin-left:0;align-items:center;&:last-child{margin-top:20px;}&:last-child{margin:10px 0 0 0;}}}"]),J=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-13"})(["display:flex;flex-direction:column;justify-content:center;margin-bottom:10px;font-family:",";font-weight:600;"],e=>e.theme.fonts.headings),Q=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-14"})(["display:flex;flex-direction:column;justify-content:center;> :not(:last-child){margin-bottom:10px;}button{padding-left:30px;padding-right:30px;display:flex;justify-content:center;font-weight:bold;&:first-child{color:",";border:2px solid transparent;&:hover{border:2px solid ",";background:",";}}&:last-child{background:transparent;border:1px solid ",";&:hover{background:",";}}}"],e=>e.theme.colors.textHeadings,e=>e.theme.colors.textHeadings,e=>e.theme.colors.bg3,e=>(0,D.No)(.9,e.theme.colors.textMain),e=>e.theme.colors.bg3),Z=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-15"})(["border:1px solid ",";padding:10px;strong{&:nth-of-type(2){color:",";font-size:1.1rem;}}"],e=>(0,D.No)(.9,e.theme.colors.textMain),e=>e.theme.colors.textHeadings);function K(){let{capture:e}=(0,B.A)(),t=(0,o.B2)(),[i,s]=(0,y.fp)(h.Nn),[a,g]=(0,c.useState)({fixedTrainingStepsLeft:0,purchasedTrainingSteps:0}),[p,u]=(0,c.useState)(""),[x,f]=(0,c.useState)(""),[b,j]=(0,c.useState)(!0),[D,K]=(0,c.useState)(0),[et,ei]=(0,c.useState)(null),[en,es]=(0,c.useState)(!1);!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,c.useRef)(!1);(0,c.useEffect)(()=>{i.current||(e(),i.current=!0)},t)}(()=>{j(!0),(0,C.sA)(i.auth_token).request().then(e=>{!e?.primaryPaymentSourceId&&(0,E.ax)(i.subscription)&&i.subscription.paymentProcessorData?.t===T.Br.CHARGEBEE?es(!0):es(!1)}).catch(e=>{(0,A.vV)(e),u(`${e}`),es(!1)}).finally(()=>{j(!1)})},[i.auth_token,i.subscription]);let eo=(0,c.useCallback)(async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&j(!0);let o=!1,r=a.purchasedTrainingSteps,l=0;!function e(){(0,I.u)(k.e2.Subscriptions,{mode:"cors",cache:"no-store",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i.auth_token},method:"GET"}).then(async e=>{if(!e.ok)throw(0,A.vV)(e),await (0,S.dX)(e);return e.json()}).then(t=>{l>5||(l++,t.trainingStepsLeft.purchasedTrainingSteps!==r&&(o=!0),!o&&n&&setTimeout(e,5e3),s({...i,subscription:t}),g({loaded:!0,...t.trainingStepsLeft}),j(!1))}).catch(e=>{`${e}`.toLowerCase().includes("invalid authorization header")?u(t.purchase.mustBeLoggedIn):((0,A.vV)(e),u(`${e}`)),j(!1)})}()},[t.purchase.mustBeLoggedIn,a.purchasedTrainingSteps,i,s]),er=(0,c.useRef)(!1);(0,c.useEffect)(()=>{er.current||(er.current=!0,eo())},[]);let el=(0,c.useRef)(!1);(0,c.useEffect)(()=>{let i=i=>{el.current&&(i.data?.key==="cb.success"&&(ei(null),f((0,w.LP)(t.purchase.purchasedXAnlas,D)),K(0),eo(!0,!0),el.current=!1,(0,P.M)(`${D} Anlas`),e("anlas_purchase:succeeded",{steps:D,type:"chargebee"})),"cb.close"===i.data&&(ei(null),K(0),j(!1),el.current=!1))};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}},[e,D,eo,et,t.purchase.purchasedXAnlas,t.subscription.paymentProcessing,s]);let ea=async n=>{u(""),f(""),j(!0);try{await (0,C.UL)(i.auth_token,n).request()}catch(e){(0,A.vV)(e),u(e.text??`${e}`),await eo(!0,!1);return}await eo(!0,!0),f((0,w.LP)(t.purchase.purchasedXAnlas,n)),e("anlas_purchase:succeeded",{steps:n,type:"paddle"}),K(0),(0,P.M)(`${n} Anlas`)},[ed,ec]=(0,c.useState)(!1),eh=async()=>{ec(!0)},{errorModal:eg,showErrorModal:ep,closeErrorModal:eu}=(0,O.A)(),em=async n=>{if(i.subscription.active&&i.subscription.paymentProcessorData?.t===T.Br.PADDLE)return void ea(n);if(i.subscription.paymentProcessorData?.s!=="active"&&i.subscription.paymentProcessorData?.s!=="future"||i.subscription.paymentProcessorData?.t!==T.Br.CHARGEBEE)return void eh();u(""),f(""),j(!0);try{let s=(0,C.A5)(i.auth_token,(0,L.pT)(n),1,!1,void 0,void 0,(0,m.cv)(i.settings,"uiLanguage")),o=await s.request();switch(o.status){case"success":await eo(!1,!0),f((0,w.LP)(t.purchase.purchasedXAnlas,n)),K(0),(0,P.M)(`${n} Anlas`),e("anlas_purchase:succeeded",{steps:n,type:"chargebee"});break;case"payment_url":if(o.paymentUrl)el.current=!0,ei(o.paymentUrl);else throw Error("Payment URL not provided");break;case"failed":u(t.purchase.purchaseFailed);break;case"3ds":(0,C.sA)(i.auth_token).request().then(s=>{if(!s?.primaryPaymentSourceId)return void u(t.purchase.noPaymentMethodExists);(0,C.s0)(i.auth_token,100*(0,L.yI)(n),"USD",s.primaryPaymentSourceType??C.g5.card,s.primaryPaymentSourceId).request().then(o=>{let r=window?.Chargebee?.getInstance();r?r.load3DSHandler().then(r=>{r.setPaymentIntent(o.payment_intent),r.handleCardPayment({additionalData:{email:s.email}}).then(s=>{(0,C.A5)(i.auth_token,(0,L.pT)(n),1,!0,s.id,void 0,(0,m.cv)(i.settings,"uiLanguage")).request().then(i=>{i?.status==="success"?(f((0,w.LP)(t.purchase.purchasedXAnlas,n)),K(0),eo(!0,!0),(0,P.M)(`${n} Anlas`),e("anlas_purchase:succeeded",{steps:n,type:"chargebee"})):u(t.purchase.purchaseFailed),j(!1),ei(null),el.current=!1}).catch(e=>{(0,C.eZ)(i.auth_token,s.id).request().catch(()=>{}),(0,A.vV)(e),u(e.text??`${e}`),j(!1),ei(null),el.current=!1})}).catch(e=>{let n=!1;if(e.message.includes("One or more fields in the request contains invalid data")){let i=e.detail.error_field,s="";void 0===i&&(s+=t.billingForm.errors.no3ds),ep(s,JSON.stringify(e,void 0,2)),n=!0}"Encountered a Payer Authentication problem. Payer could not be authenticated."===e.message&&(ep(t.billingForm.errors.payerAuthenticationProblem,JSON.stringify(e,void 0,2)),n=!0),(0,C.TX)(i.auth_token,{component:"anlas-purchase-3ds-reconfirmation",details:{ids:{id:o?.payment_intent?.id,gateway_account_id:o?.payment_intent?.gateway_account_id,customer_id:o?.payment_intent?.customer_id},error:e},error_code:e?.name??"UNKNOWN_CARD_PAYMENT_ERROR",occurred_at:new Date().toISOString(),related_correlation_id:null,known_error:n}).request().catch(()=>{}),o?.payment_intent?.id&&(0,C.eZ)(i.auth_token,o?.payment_intent?.id).request().catch(()=>{}),n||u(e.text??`${e}`),(0,A.vV)(e),j(!1),ei(null),el.current=!1})}).catch(e=>{u(t.purchase.failedToLoad3dsHandler),j(!1),ei(null),el.current=!1}):(u(t.purchase.failedToLoad3dsHandler),j(!1),ei(null),el.current=!1)}).catch(e=>{(0,A.vV)(e),u(e.text??`${e}`),j(!1),ei(null),el.current=!1})}).catch(e=>{(0,A.vV)(e),u(e.text??`${e}`)})}}catch(e){(0,A.vV)(e),u(e.text??`${e}`),await eo();return}},ex=i.subscription.paymentProcessorData?.s==="active"||i.subscription.paymentProcessorData?.s==="future",ef=(0,y.Xr)(h.ZZ),ey=(0,y.Xr)(h.ms),eb=(0,y.Xr)(h.Uv);return(0,n.jsxs)(H,{children:[eg,(0,n.jsx)(v.A,{isOpen:en,onRequestClose:()=>{es(!1),ef(!1)},shouldCloseOnOverlayClick:!0,type:v.q.Large,style:{justifyContent:"flex-end",overflow:"hidden"},children:(0,n.jsx)(ee,{children:(0,n.jsxs)("div",{style:{maxWidth:"100vw",width:"400px",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(M.J,{onClick:()=>{es(!1),ef(!1)},children:(0,n.jsx)("div",{})}),(0,n.jsx)("h2",{children:t.purchase.updateBillingRequired}),(0,n.jsx)("p",{children:t.purchase.updateBillingRequiredDescription}),(0,n.jsx)(d.ur,{style:{alignSelf:"center"},onClick:()=>{es(!1),ef(!1),eb({open:!0,blocked:!1}),ey({type:h.sL.UpdatePaymentMethod,data:{}})},children:t.purchase.addPaymentMethod})]})})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(_,{children:[(0,n.jsxs)("p",{children:[t.purchase.purchaseDescription1,(0,n.jsx)("br",{}),t.purchase.purchaseDescription2,(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),t.purchase.purchaseDiscountNotice]}),(0,n.jsxs)(W,{children:[(0,n.jsxs)(q,{children:[(0,n.jsx)("div",{children:t.purchase.yourSubscriptionAnlas}),(0,n.jsx)("div",{children:a.fixedTrainingStepsLeft})]}),(0,n.jsxs)(q,{children:[(0,n.jsx)("div",{children:t.purchase.yourPaidAnlas}),(0,n.jsx)("div",{children:a.purchasedTrainingSteps})]})]})]}),(0,n.jsxs)(z,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)(V,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"2,000"}),(0,n.jsxs)("span",{children:[" ",(0,n.jsx)(l.qeX,{style:{display:"inline-block",height:"1rem"}})," Anlas"]})]}),(0,n.jsx)("div",{children:ex?`${(0,L.yI)(2e3).toFixed(2)} USD`:"$4.79 USD"}),(0,n.jsxs)("div",{children:["~",Math.floor(2e3/(ex?(0,L.yI)(2e3):(0,L.tT)(2e3)))," ",t.purchase.anlasPerUSD]}),(0,n.jsx)(d.Dp,{disabled:k.Nl||i.noAccount,onClick:()=>{f(""),u(""),K(2e3)},children:t.purchase.purchase})]}),(0,n.jsxs)(V,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"5,000"}),(0,n.jsxs)("span",{children:[" ",(0,n.jsx)(l.qeX,{style:{display:"inline-block",height:"1rem"}})," Anlas"]})]}),(0,n.jsxs)("div",{children:[" ",ex?`${(0,L.yI)(5e3).toFixed(2)} USD`:"$8.19 USD"]}),(0,n.jsxs)("div",{children:["~",Math.floor(5e3/(ex?(0,L.yI)(5e3):(0,L.tT)(5e3)))," ",t.purchase.anlasPerUSD]}),(0,n.jsx)(d.Dp,{disabled:k.Nl||i.noAccount,onClick:()=>{f(""),u(""),K(5e3)},children:t.purchase.purchase})]}),(0,n.jsxs)(V,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"10,000"}),(0,n.jsxs)("span",{children:[" ",(0,n.jsx)(l.qeX,{style:{display:"inline-block",height:"1rem"}})," Anlas"]})]}),(0,n.jsxs)("div",{children:[" ",ex?`${(0,L.yI)(1e4).toFixed(2)} USD`:"$13.99 USD"]}),(0,n.jsxs)("div",{children:["~",Math.floor(1e4/(ex?(0,L.yI)(1e4):(0,L.tT)(1e4)))," ",t.purchase.anlasPerUSD]}),(0,n.jsx)(d.Dp,{disabled:k.Nl||i.noAccount,onClick:()=>{f(""),u(""),K(1e4)},children:t.purchase.purchase})]})]}),D?(0,n.jsx)(X,{children:(0,n.jsx)(G,{children:(0,n.jsxs)(Y,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(J,{children:(0,n.jsxs)("p",{children:[t.purchase.doYouReallyWantTo,(0,n.jsx)("br",{}),t.purchase.purchaseTheFollowing]})}),(0,n.jsx)(Z,{children:(0,w.zw)(t.purchase.xAnlasForXUsd,D,ex?(0,L.yI)(D).toFixed(2):(0,L.tT)(D)).map((e,t)=>t%2==0?(0,n.jsx)("span",{children:e},t):(0,n.jsxs)("strong",{children:[3===t?"$":"",e]},t))})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)(Q,{children:[(0,n.jsx)(d.ur,{onClick:()=>em(D),children:t.purchase.confirmPurchase}),(0,n.jsx)(d.uW,{onClick:()=>K(0),children:t.purchase.cancel})]})})]})})}):null,b?(0,n.jsx)(X,{children:(0,n.jsx)(G,{children:(0,n.jsx)($,{children:(0,n.jsx)(r.A,{visible:!0,style:{width:"25px",height:"25px"}})})})}):null]})]}),p?(0,n.jsx)(F,{children:p}):null,x?(0,n.jsx)(N,{children:x}):null,et?(0,n.jsx)(v.A,{type:v.q.Large,onRequestClose:()=>{},isOpen:!0,style:{justifyContent:"flex-end",overflow:"hidden",width:"100vw",maxWidth:"100vw"},children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.J,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"4px"},onClick:()=>{ei(null),K(0),j(!1),el.current=!1},children:(0,n.jsx)("div",{})}),(0,n.jsx)(M.v,{title:"payment",src:et})]})}):null,(0,n.jsx)(v.A,{type:v.q.Large,onRequestClose:()=>{ec(!1)},isOpen:ed,style:{justifyContent:"flex-end",overflow:"hidden",width:"100vw",maxWidth:"100vw"},children:(0,n.jsxs)(ee,{children:[(0,n.jsx)(M.J,{onClick:()=>{ec(!1),K(0)},children:(0,n.jsx)("div",{})}),(0,n.jsx)(R.o,{purchaseType:R.p.OneTimePurchase,anlasAmount:D,onFinish:()=>{ec(!1),f((0,w.LP)(t.purchase.purchasedXAnlas,D)),K(0),eo(!0,!0),(0,P.M)(`${D} Anlas`),e("anlas_purchase:succeeded",{steps:D,type:"billing_form"})}})]})})]})}let ee=s.Ay.div.withConfig({componentId:"sc-8d2aa6b9-16"})(["padding:20px;background:",";border-radius:6px;display:flex;position:relative;"],e=>e.theme.colors.bg2);var et=i(54117),ei=i(47926),en=i(29415),es=i.n(en),eo=i(96638),er=i.n(eo),el=i(21536),ea=i.n(el),ed=i(13535),ec=i.n(ed),eh=i(77256),eg=i(27481),ep=i(3715),eu=i(50761),em=i(39612),ex=i(20472),ef=i(74767),ey=i(1037),eb=i(79754),ew=i(88567),ej=i(47044),ev=i(52973),eC=i(23699),ek=i(14723),eA=i(82841),eI=i(19058),eS=i(31444),eD=i(72191),eM=i(89854),eT=i(75561),eE=i(8998),eL=i(19482),eR=i(49882);let eO=new Map;function eP(e){let t=e.selection.$from,i=t.start();return e.doc.textBetween(i,t.pos)}var eB=i(98617);let eH=[{textSequence:"{",transformEmphasis:(e,t)=>1.05*e},{textSequence:"}",transformEmphasis:(e,t)=>e/1.05},{textSequence:"[",transformEmphasis:(e,t)=>e/1.05},{textSequence:"]",transformEmphasis:(e,t)=>1.05*e},{textSequence:"::",needsBeforeNumber:!0,transformEmphasis:(e,t)=>void 0===t||Number.isNaN(t)?1:t}],ez=[{textSequence:"{",transformEmphasis:e=>1.05*e},{textSequence:"}",transformEmphasis:e=>e/1.05},{textSequence:"[",transformEmphasis:e=>e/1.05},{textSequence:"]",transformEmphasis:e=>1.05*e}];function e_(e){if(!(.01>Math.abs(e-1)))return e>1?"high":"low"}var e$=i(87788),eF=i(62006),eN=i(52505),eW=i(98883),eq=i(78072);function eU(e){let t=(0,o.B2)(),{onClick:i,price:s,disabled:d,children:c,style:h,onPointerDown:g,selected:p}=e;return(0,n.jsxs)(eX,{onClick:i,disabled:d||(s??0)<0,style:{...h,...d?{opacity:.4}:{}},onPointerDown:g,selected:p,children:[c,void 0!==s&&s>=-2&&(0,n.jsxs)(eG,{disabled:d||s<0,children:[(0,n.jsx)("div",{style:{flex:"1 1 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:-2===s?(0,n.jsx)("span",{children:t.image.invalid}):-1===s?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.A,{visible:!0,style:{height:"9px",margin:"2px",display:"inline-block"}})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{children:s})})}),(0,n.jsx)(l.qeX,{style:{height:10,width:10}}),(0,n.jsx)(a.u,{notShown:!0,children:"Anlas"})]})]})}let eV=s.Ay.div.withConfig({componentId:"sc-2b71468b-0"})(["background:",";border-radius:3px;border:1px solid ",";display:flex;flex-direction:row;align-items:center;height:44px;padding:0 8px;"],e=>e.theme.colors.bg2,e=>e.theme.colors.bg3),eX=(0,s.Ay)(d.Dp).withConfig({componentId:"sc-2b71468b-1"})(["background:none;&:hover{","}"," padding:12px;border-radius:3px;display:flex;flex-direction:row;align-items:center;gap:6px;height:100%;white-space:nowrap;"],e=>e.disabled?"":`background: ${e.theme.colors.bg3};`,e=>e.selected?`background: ${(0,D.jh)(.05,e.theme.colors.textMain,e.theme.colors.bg3)};`:""),eG=s.Ay.div.withConfig({componentId:"sc-2b71468b-2"})(["display:flex;align-items:center;justify-content:flex-end;background:",";padding:10px 3px;border-radius:3px;gap:5px;font-size:0.875rem;height:fit-content;padding:3px 10px;min-height:24px;min-width:50px;"],e=>e.theme.colors.bg3);function eY(e){let t=(0,o.B2)(),{onClick:i,price:s,additionalPrice:d,disabled:c,children:h,style:g,showSpinner:p,imageCount:u,isOpusFree:m,selectedModel:x}=e,{remainingImageActions:f,eligibleForImage:y}=(0,eW.R9)();return(0,n.jsxs)(eJ,{onClick:i,disabled:c||s<0,style:g,children:[(0,n.jsx)("span",{children:h}),(0,n.jsxs)(eQ,{disabled:c||s<0,children:[(0,n.jsx)("div",{style:{flex:"1 1 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:p?(0,n.jsx)(r.A,{visible:!0,style:{height:"9px",margin:"2px",display:"inline-block"}}):-3===s||-2===s?(0,n.jsx)("span",{children:t.image.invalid}):s<0?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.A,{visible:!0,style:{height:"9px",margin:"2px",display:"inline-block"}})}):(0,n.jsx)(n.Fragment,{children:0===d&&0!==s&&m&&f>0&&y&&(0,C.Xo)(x)&&1===u?(0,n.jsx)("span",{children:t.trial.free}):d>0&&0!==s&&m&&f>0&&y&&(0,C.Xo)(x)&&1===u?(0,n.jsx)("span",{children:d}):(0,n.jsx)("span",{children:s})})}),(0,n.jsx)(l.qeX,{style:{height:10,width:10}}),(0,n.jsx)(a.u,{notShown:!0,children:"Anlas"})]})]})}let eJ=(0,s.Ay)(d.Dp).withConfig({componentId:"sc-2b71468b-3"})(["user-select:none;display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:",";color:",";font-size:0.875rem;height:44px;border-radius:3px;overflow:hidden;cursor:pointer;font-weight:700;&:disabled{opacity:0.5;color:",";}&:active{transform:scale(0.98);}transition:color 100ms,background-color 100ms,transform 150ms;padding:10px 10px 10px 20px;gap:20px;"],e=>e.theme.colors.textHeadings,e=>e.theme.colors.bg1,e=>e.theme.colors.bg1),eQ=s.Ay.div.withConfig({componentId:"sc-2b71468b-4"})(["display:flex;flex-direction:row;align-items:center;justify-content:flex-end;background-color:",";color:",";border-radius:3px;padding:3px 10px;gap:5px;> ","{background-color:",";}min-height:27px;min-width:50px;flex-shrink:0;"],e=>e.theme.colors.bg1,e=>e.theme.colors.textHeadings,l.Int,e=>e.theme.colors.textHeadings),eZ=s.Ay.div.withConfig({componentId:"sc-2b71468b-5"})(["background-color:",";border-radius:3px;height:44px;display:flex;align-items:center;justify-content:flex-start;padding:10px 15px;gap:10px;font-size:1rem;"],e=>e.theme.colors.bg3);function eK(e){let{fetchingSteps:t}=(0,eF.A)(),i=(0,y.md)(h.Nn),s=(0,y.Xr)(h.OK),r=(0,c.useMemo)(()=>(0,E.Qz)(i.subscription.trainingStepsLeft),[i.subscription]),a=(0,o.B2)(),[m,x]=(0,y.fp)(h.ZZ),[f,b]=(0,c.useState)(!1),w=(0,y.Xr)(h.Uv);(0,y.Xr)(h.BQ);let C=(0,y.md)(h.x1),[k,A]=(0,y.fp)(h.gf),[I,S]=(0,c.useState)(0),D=(0,c.useRef)(null);(0,c.useEffect)(()=>{function e(){D.current&&S(window.pageYOffset+D.current.getBoundingClientRect().top+D.current.offsetHeight)}return D.current&&S(window.pageYOffset+D.current.getBoundingClientRect().top+D.current.offsetHeight),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[D]);let M=(0,n.jsxs)(g.xD,{className:"image-gen-navbar-back",style:{fontSize:"0.875rem",width:"max-content",padding:"0 10px",borderRight:`1px solid ${C.colors.bg3}`,height:"100%"},children:[!e.hideBackButton&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A60,{style:{display:"inline-block",width:6,height:12}})," "]}),e.backIcon??(0,n.jsx)(l.C65,{style:{height:21,width:18,marginLeft:10,cursor:"pointer"}})]});return(0,n.jsxs)(e0,{ref:D,className:"image-gen-navbar",alternateStyle:e.alternateStyle,children:[(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:49},children:[e.hideBackButton?(0,n.jsx)(d.Dp,{style:{height:"100%"},onClick:()=>{s({image:-1,subimage:void 0,variation:0})},children:M}):(0,n.jsxs)(n.Fragment,{children:["string"==typeof e.backAction&&(0,n.jsx)(es(),{href:e.backAction??"/stories",legacyBehavior:!0,children:M}),"function"==typeof e.backAction&&(0,n.jsx)(d.Dp,{style:{height:"100%"},onClick:()=>{"function"==typeof e.backAction&&e.backAction()},children:M})]}),(0,n.jsx)("div",{style:{flex:"1 1 0"}}),(0,n.jsxs)(g.C7,{style:{opacity:t?.5:1},children:[(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:"10px 15px",border:`1px solid ${C.colors.bg3}`,borderRadius:"3px 0 0 3px",whiteSpace:"nowrap"},children:[(0,n.jsx)(p.DG,{style:{display:"contents"},children:(0,n.jsx)("span",{children:"Anlas:"})}),(0,n.jsxs)(g.QO,{children:[(0,n.jsx)("span",{children:r}),(0,n.jsx)(l.qeX,{style:{width:10,height:10},highlight:!0})]})]}),(0,n.jsx)(g.Dq,{onClick:()=>{x(!0)},children:(0,n.jsx)(l.c11,{style:{height:14,width:14}})}),(0,n.jsx)(et.Xf,{children:(0,n.jsx)(v.A,{type:v.q.Compact,isOpen:f,label:"",shouldCloseOnOverlayClick:!0,onRequestClose:()=>b(!1),iconUrl:ei.A.src,children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(j,{extraContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u._C,{min:20,max:20}),(0,n.jsx)(g.hE,{children:a.settings.account}),(0,n.jsx)(u._C,{min:5,max:5}),(0,n.jsx)(d.ur,{onClick:()=>{w({open:!0,blocked:!1}),b(!1)},style:{width:"100%"},children:a.image.manageSubscription})]})})})})})]}),(0,n.jsx)("div",{style:{flex:"1 1 0"}}),(0,n.jsx)(g.T4,{children:(0,n.jsx)(g.Z1,{style:{padding:16},selected:k,onClick:()=>{A(e=>!e)},children:(0,n.jsx)(l.if5,{style:{height:16,width:16}})})}),(0,n.jsx)(v.A,{type:v.q.Compact,isOpen:m,label:(0,n.jsxs)("span",{children:["Purchase ",(0,n.jsx)(l.qeX,{style:{display:"inline-block",height:"1rem"}})," Anlas"]}),shouldCloseOnOverlayClick:!0,onRequestClose:()=>x(!1),children:(0,n.jsx)(K,{})})]}),(0,n.jsx)(eN._,{visible:k,setVisible:A,page:"image",hangingSubmenu:e.hangingSubmenu})]})}let e0=s.Ay.div.withConfig({componentId:"sc-2b71468b-6"})(["background-color:",";border-bottom:1px solid ",";",""],e=>e.theme.colors.bg2,e=>e.theme.colors.bg3,e=>e.alternateStyle?`
            @media (min-width: 450px) {
                border-bottom-left-radius: 3px;
                border-bottom-right-radius: 3px;
                border: 1px solid ${e.theme.colors.bg3};
                width: 100%;
                max-width: 450px;
                align-self: center;
            }
    `:"");function e1(e){let t=(0,o.B2)(),{handleImageClick:i,hideHint:s,offsetFromBottom:r}=e,a=(0,ex.l)(),[u,m]=(0,y.fp)(h.Au),{selectedImage:x,setSelectedImage:f}=(0,e$.O)(),[b,w]=(0,y.fp)(em.IB);(0,c.useEffect)(()=>{let e=e=>{if(document.activeElement?.tagName!=="INPUT"&&document.activeElement?.tagName!=="TEXTAREA"&&document.activeElement?.tagName!=="SELECT"&&document.activeElement?.getAttribute("contenteditable")!=="true"&&("ArrowUp"===e.key||"ArrowDown"===e.key)){e.preventDefault(),e.stopPropagation();let t=x?.image??-1,i=t;if("ArrowUp"===e.key?i=t-1:"ArrowDown"===e.key&&(i=t+1),!(i<0)&&!(i>=u.length))f({image:i,subimage:void 0,variation:0})}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[u,x,f,i]),(0,c.useEffect)(()=>{w(window.innerWidth>ep.kJ)},[w]);let[j,v]=(0,c.useState)(!1),C=(0,y.md)(h.x1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.DG,{style:{position:"absolute",top:"18px",right:"25px",width:"30px",height:"30px",borderRadius:3,padding:5,background:`${C.colors.bg1}`,display:"block"},children:(0,n.jsx)(d.Dp,{style:{},onClick:()=>{w(!0),(0,S.I4)("ImageGenHistoryToggle",{state:"open"})},children:(0,n.jsx)(l.osr,{})})}),(0,n.jsx)(eb.A,{left:!1,open:b,setOpen:w,breakpointDesktop:`${ep.kJ}px`,breakpointMobile:`${ep.kJ}px`,overlayPoint:ep.kJ,noDragPoint:ep.kJ,initialOffset:140,style:{overflowX:"hidden",height:a.width<ep.kJ?`calc(100% - ${r??0}px)`:"100%",zIndex:300},overylayStyle:{height:a.width<ep.kJ?`calc(100% - ${r??0}px)`:"100%"},children:(0,n.jsxs)(g.uk,{id:"historyContainer",children:[(0,n.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",padding:"0 20px",alignItems:"center"},children:[(0,n.jsxs)(g.hE,{style:{flex:" 0 0 auto",display:"flex",alignItems:"center"},children:[(0,n.jsx)("span",{children:t.image.history}),s?null:(0,n.jsx)(p.DG,{children:(0,n.jsx)(ew.A,{style:{display:"flex",alignItems:"center",justifyContent:"center"},delay:1,tooltip:"",elementTooltip:(0,n.jsx)(n.Fragment,{children:t.image.historyTT}),children:(0,n.jsx)(eh.tjz,{style:{opacity:.3,marginLeft:"0.3rem"}})})})]}),(0,n.jsx)(p.DG,{children:(0,n.jsx)(d.Dp,{style:{marginLeft:"auto",marginRight:-10,padding:10},onClick:()=>{w(!1),(0,S.I4)("ImageGenHistoryToggle",{state:"close"})},children:(0,n.jsx)(l.flY,{style:{width:14,height:14}})})})]}),(0,n.jsx)(g.Bw,{children:u.map((e,t)=>(0,n.jsx)(ts,{img:e,selected:x?.image===t,handleImageClick:e=>{i(e,t)},deleteImage:()=>{m(e=>[...e.slice(0,t),...e.slice(t+1)])}},t))}),u.length>0&&(0,n.jsx)(d.Dp,{disabled:0===u.length,style:{opacity:.4,fontSize:"0.8rem",fontWeight:400},onClick:()=>{!j&&u.length>0&&window.confirm("Download all images? This could take a while, or fail entirely, with large numbers of images.")&&((()=>{let e=[],i=0;for(let t of u)for(let n of t)!n.isVariationOriginal&&(e[i]||(e[i]=[]),e[i].push(n),e[i].length>=250&&i++);let n=e.reduce((e,t)=>e+t.length,0),s=Math.ceil(1e7*Math.random());(0,eg.oR)(`Downloading ${n} images in ${e.length} zip files...`,{type:"info",toastId:"downloading-images-"+s});let o=`NAI-images_(${er()().format("YYYY-MM-DD_HH-mm-ss")})`,r=async(i,n)=>new Promise(r=>{let l=new(ec()),a={};Promise.all(i.map(e=>{let i=e.filename.replace(/[\n\r"%*/:<>?\\|]/g,"_");return a[i]?i+=`_${a[i]++}`:a[i]=1,Promise.all(e.data.map(e=>eq.W3.getImageBuffer(e))).then(n=>{for(let[o,r]of e.data.entries()){let r=n[o];if(!r)return void(0,eg.oR)(t.image.imageNotFoundInStorage,{type:"error",toastId:"image-not-found-"+s});let a=i,d=eu.Qd[e.tool],c=d?.[o];c&&(a+=`_${c}`),l.file(a+"."+e.fileType,r,{date:e.genDateTime})}})})).then(()=>{v(!0),l.generateAsync({type:"blob"}).then(function(t){ea()(t,`${o}_${n+1}-of-${e.length}.zip`),v(!1),eg.oR.dismiss("downloading-images-"+s),(0,eg.oR)("Images downloaded",{type:"success",toastId:"images-downloaded-"+s}),r(!0)})})});(async()=>{for(let[t,i]of e.entries())await r(i,t)})()})(),(0,S.I4)("ImageGenHistoryDownload",{images:u.length.toString()}))},children:j?(0,n.jsxs)("span",{children:["Downloading",(0,n.jsx)(ey.s,{})]}):t.image.downloadZIP})]})})]})}function e2(e){let{value:t,values:i,disabled:s,setMaxWidth:o}=e;return(0,n.jsx)(e8,{setMaxWidth:o,children:i.map(i=>(0,n.jsx)(e6,{onClick:()=>e.setValue(i.value),selected:i.value===t,disabled:s||i.disabled,setMaxWidth:o,children:i.label},i.value))})}let e8=s.Ay.div.withConfig({componentId:"sc-2b71468b-7"})(["display:flex;flex-direction:row;height:36px;",""],e=>e.setMaxWidth&&"width: 100%;"),e6=(0,s.Ay)(d.Dp).withConfig({componentId:"sc-2b71468b-8"})(["display:flex;align-items:center;justify-content:center;border-radius:3px;background:",";cursor:pointer;font-weight:",";font-size:1rem;&:hover{background:",";}"," height:100%;"],e=>e.selected?e.theme.colors.bg3:"none",e=>e.selected?700:400,e=>e.selected?e.theme.colors.bg3:e.theme.colors.bg2,e=>e.setMaxWidth?"flex-grow: 1;":"width: 38px;");function e4(e){let{children:t,open:i,setOpen:s,belowTraySize:o,style:r,offsetWhenOpen:a,shouldCloseOnClickOutside:d}=e,h=(0,c.useRef)(null),g=(0,c.useRef)(null);(0,ex.l)(),(0,ej.L)(h,()=>{d&&s(!1)},["historyContainer","imageGenSettingsMobile","promptChunkContainer"],["modal"]);let p=g.current?.clientHeight??0,u=h.current?.clientHeight??0,m=(0,ev.z)(i?-p:0,{stiffness:400,damping:40});return(0,c.useEffect)(()=>{i?m.set(-u+44):m.set(0)},[u,i,m]),(0,c.useEffect)(()=>{if(h.current){let e=new ResizeObserver(()=>{i&&h.current&&m.set(-h.current.clientHeight+44)});return e.observe(h.current),()=>{e.disconnect()}}},[i,m]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{height:44,width:"100%",...a&&i?{height:h.current?.clientHeight??0}:{}}}),(0,n.jsx)(e3,{ref:h,style:{...r,y:m,maxHeight:window.innerHeight-o},belowTraySize:o,offsetWhenOpen:a??!1,open:i,children:(0,c.useMemo)(()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e7,{onClick:()=>s(e=>!e),children:i?(0,n.jsx)(l.ZLN,{style:{height:8,width:16}}):(0,n.jsx)(l.Kpk,{style:{height:8,width:16}})}),(0,n.jsx)(e5,{ref:g,children:t})]}),[t,i,s])})]})}let e3=(0,s.Ay)(ek.P.div).withConfig({componentId:"sc-2b71468b-9"})(["position:fixed;top:calc(100% - ","px);left:0;right:0;background-color:",";border-top:1px solid ",";z-index:204;box-shadow:0px 0px 10px rgba(0,0,0,0.1);overflow:auto;"],e=>e.belowTraySize+44,e=>e.theme.colors.bg2,e=>e.theme.colors.bg3),e7=(0,s.Ay)(d.Dp).withConfig({componentId:"sc-2b71468b-10"})(["width:100%;height:44px;display:flex;flex-direction:row;align-items:center;justify-content:center;position:sticky;top:0;background:",";z-index:5;"],e=>e.theme.colors.bg2),e5=s.Ay.div.withConfig({componentId:"sc-2b71468b-11"})(["width:100%;"]),e9=s.Ay.div.withConfig({componentId:"sc-2b71468b-12"})(["height:1px;position:relative;&::after{content:'';height:100%;position:absolute;top:0;width:100%;background-image:linear-gradient( 90deg,"," 0%,"," 40%,"," 60%,"," 100% );background-size:200%;background-repeat:repeat-x;animation:"," 2s linear infinite;opacity:",";transition:opacity 0.2s ease-in-out;}"],e=>e.theme.colors.textHeadings,e=>e.theme.colors.bg2,e=>e.theme.colors.bg3,e=>e.theme.colors.textHeadings,eA.Hf,e=>e.visible?"1":"0"),te=new eD.Sj({nodes:{doc:{content:"block+"},paragraph:{content:"text*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},text:{group:"inline"}},topNode:"doc"}),tt=e=>{let t="";for(let i=0;i<e.childCount;i++){let n=e.child(i);t+=i+1!==e.childCount?n.textContent+"\n":n.textContent}return t.replace(/\r/g,"")};function ti(e){let t=(0,o.B2)(),i=(0,y.md)(h.Nn),s=(0,c.useRef)(null),r=(0,c.useRef)(e.generate);(0,c.useEffect)(()=>{r.current=e.generate});let l=(0,c.useRef)([]),[a,d]=(0,c.useState)([]);(0,c.useRef)(d).current=d;let[u,x]=(0,y.fp)(em.Mw),f=(0,c.useRef)({config:{id:e.id,selectedModel:e.selectedModel,session:i,tagSuggestionsDisabled:e.tagSuggestionsDisabled,modelMode:u,lockOpen:!1,forceTagSearch:()=>{},forceClosed:()=>{}}});(0,c.useEffect)(()=>{f.current={config:{id:e.id,selectedModel:e.selectedModel,session:i,tagSuggestionsDisabled:e.tagSuggestionsDisabled,modelMode:u,lockOpen:!1,forceTagSearch:f.current.config.forceTagSearch,forceClosed:f.current.config.forceClosed}}},[e.id,e.selectedModel,i,e.tagSuggestionsDisabled,u]);let b=(0,y.md)(h.x1),j=(0,c.useRef)({highColor:b.colors.lowIntensityColor??"#ED5807",lowColor:b.colors.midIntensityColor??"#079CED",midColor:b.colors.highIntensityColor??"#7acc29",highEmphasis:1.5,lowEmphasis:.75,highlightEnabled:(0,m.cv)(i.settings,"imagePromptEmphasis"),emphasisActionSequences:(0,C.PE)(e.selectedModel).numericEmphasis?eH:ez,errors:l.current,triggerErrorStateSet:e=>{d([...e])}});(0,c.useEffect)(()=>{j.current={highColor:b.colors.highIntensityColor??"#ED5807",lowColor:b.colors.lowIntensityColor??"#079CED",midColor:b.colors.midIntensityColor??"#7acc29",highEmphasis:2,lowEmphasis:.5,highlightEnabled:(0,m.cv)(i.settings,"imagePromptEmphasis"),emphasisActionSequences:(0,C.PE)(e.selectedModel).numericEmphasis?eH:ez,errors:l.current,triggerErrorStateSet:e=>{d([...e])}}},[e.selectedModel,i.settings,b.colors.highIntensityColor,b.colors.lowIntensityColor,b.colors.midIntensityColor,b.colors.textHighProb,b.colors.textLowProb,b.colors.textMidProb,d]);let{plugin:v,pluginKey:A}=(0,c.useMemo)(()=>(function(e){let t,i=function(e){if(eO.has(e))return eO.get(e);let t=new eR.hs(`tagSuggestions_${e}`),i=new Map,n={active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""},s={key:t,addView:(e,t)=>(i.has(e)||i.set(e,new Set),i.get(e).add(t),()=>{let n=i.get(e);n&&(n.delete(t),0===n.size&&i.delete(e))}),updateViews(e,t){let n=i.get(e);if(n)for(let i of n)i.update(e,t)},destroyViews(e){let t=i.get(e);if(t){for(let e of t)e.destroy();i.delete(e)}},getState:e=>n,updateState(e,t){n=t,this.updateViews(e,n)}};return eO.set(e,s),s}(e().id),n=0,s=!1;function o(t){e().lockOpen||i.updateState(t,{active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""})}async function r(e){let t=eP(e.state);if(!(t=t.split(/[#,[{|、]|(\. )|(::)/).pop()||""))return void o(e);a(t,e,0)}async function l(t,o,r){let l=e();if(l.session.noAccount||l.tagSuggestionsDisabled)return;let a=Math.floor(65e3*Math.random());n=a;let d=l.modelMode===C.qx.furry?C.oM.naiDiffusionFurryV3:l.selectedModel;try{let e=await fetch(`${k.e2.TagSearch}?model=${encodeURIComponent(d)}&prompt=${encodeURIComponent(t.replace(/[/[{}]]/g,"").trim())}`+(r?`&lang=${r}`:""),{mode:"cors",cache:"default",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l.session.auth_token},method:"GET"}),c=await e.json();if(a!==n||s)return;let h="jp"===r?c.map(e=>({en:e.en_tag,jp:e.jp_tag,count:e.power})):c.tags.map(e=>({en:e.tag,jp:void 0,count:e.count}));i.updateState(o,{active:!0,suggestions:h,selectedIndex:-1,searching:!1,searchText:t})}catch{i.updateState(o,{active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:t})}}function a(e,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;clearTimeout(t),s=!1;let r=(0,S.aO)(e)?"jp":void 0;if(!e||e.length<2||e.length>20)return void i.updateState(n,{active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:e});i.updateState(n,{active:!0,suggestions:[],selectedIndex:-1,searching:!0,searchText:e}),t=setTimeout(()=>{l(e,n,r)},o)}function d(t,n){let s=e(),{state:o}=n,r=o.selection.$from,l=r.start(),a=o.doc.textBetween(l,r.pos),d=a.match(/([#,[{|、]|(\. )|(::))(?<s>\s)?/g),c=l;if(d){let e=d[d.length-1];c+=a.lastIndexOf(e)+e.length}let h=o.tr;h.replaceWith(c,r.pos,o.schema.text(t+", ")),n.dispatch(h),i.updateState(n,{active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""}),s.onInsertTag&&s.onInsertTag(t)}return{plugin:new eR.k_({key:i.key,state:{init:()=>({active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""}),apply(e,t){let n=e.getMeta(i.key);return n?{...t,...n}:t}},view:t=>(e().forceTagSearch=()=>{r(t)},e().forceClosed=()=>{o(t)},{destroy:()=>{i.destroyViews(t)}}),props:{handleDOMEvents:{blur(e,t){i.updateState(e,{active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""}),s=!0}},handleKeyDown(t,n){if(e().tagSuggestionsDisabled)return!1;let r=i.getState(t);if(!r?.active)return!1;switch(n.key){case"ArrowUp":case"ArrowDown":{if(0===r.suggestions.length)return!1;n.preventDefault();let e="ArrowUp"===n.key?-1:1,s=-1===r.selectedIndex?1===e?0:r.suggestions.length-1:(r.selectedIndex+e)%r.suggestions.length;return i.updateState(t,{...r,selectedIndex:s}),!0}case"Enter":if(r.selectedIndex>=0&&r.suggestions.length>0)return n.preventDefault(),d(r.suggestions[r.selectedIndex].en,t),o(t),!0;break;case"Tab":if(r.suggestions.length>0)return n.preventDefault(),d(r.suggestions[-1===r.selectedIndex?0:r.selectedIndex].en,t),o(t),!0;break;case"Escape":return o(t),s=!0,!0;case"Backspace":case"Delete":{let e=eP(t.state);(e=e.split(/[#,[{|、]|(\. )|(::)/).pop()||"")?a(e,t):o(t)}}return!1},handleTextInput(t,i,n,s){if(e().tagSuggestionsDisabled)return!1;let o=eP(t.state)+s;return a(o=o.split(/[#,[{|、]|(\. )|(::)/).pop()||"",t),!1}}}),pluginKey:i}})(()=>f.current.config),[]);(0,c.useEffect)(()=>{e.value!==tt(I.doc.content)&&queueMicrotask(()=>{let t=e.value.split("\n"),i=[];for(let e of t)i.push(te.node("paragraph",null,e?te.text(e):void 0));let n=te.node("doc",null,i);D(()=>{let e=I.tr;return(e=(e=e.setMeta("preventUpdate",!0)).setMeta("addToHistory",!1)).replaceWith(0,I.doc.nodeSize-2,n.content)})})},[e.value]);let[I,D]=(0,eS.I)({schema:te,plugins:[v,(0,eM.w4)({Enter:(e,t)=>(r.current(),!0)}),(0,eM.w4)(eT.fO),(0,eE.b6)({}),(0,eM.w4)({"Mod-z":eE.tN}),(0,eM.w4)({"Shift-Mod-z":eE.ZS}),(0,eM.w4)({"Mod-y":eE.ZS}),(0,eM.$j)(eM.tz),(0,eM.yO)({rules:[{from:"“",to:'"'},{from:"”",to:'"'},{from:"‘",to:"'"},{from:"’",to:"'"}]}),(e=>{let t=new eR.hs("emphasisHighlight");return new eR.k_({key:t,props:{handleDOMEvents:{blur:t=>{let{triggerErrorStateSet:i,errors:n}=e();i(n)}},decorations(t){let{doc:i}=t,{highColor:n,lowColor:s,midColor:r,highEmphasis:l,lowEmphasis:a,highlightEnabled:d,emphasisActionSequences:c,errors:h}=e();if(!d)return eL.zF.empty;let g=1,p=[];function u(e){return .01>Math.abs(e-1)?0:.2+.39999999999999997*((e>0?Math.max(Math.min(Math.abs(e-1)/Math.abs(l-1),1),0):Math.max(Math.min(Math.abs(e-1)/Math.abs(a-1),1),0))-0)/1}let m=[];return i.descendants((e,t)=>{if(e.isText){let i=e.text??"",n="";for(let e=0;e<i.length;e++){let s,r=i[e];n+=r;let l=c.find(e=>e.textSequence===n),a=0;if(l){if(l.needsBeforeNumber){let t=i.slice(0,e-1).match(/-?\d*\.?\d*$/);if(t){s=Number.parseFloat(t[0]);let e=t[0];("-"===e||"-."===e||"."===e)&&(s=0),a=t[0].length}}let r=g;g=l.transformEmphasis(g,s),"::"===n&&Math.abs(g)>70&&m.push((0,w.LP)(o.G6.value.image.emphasisError3,`${s}::`,`${s} ::`));let d=e_(g);if("::"===n&&1===g){if(1===r){let t=i.slice(0,e-1).match(/(?:^|[\s,])(-?\d*\.?\d* )$/),n=i.slice(e+1).match(/(^ ?-?\d*\.?\d*)(?![\d.-]*::)/),s=Number.parseFloat(t?.[1]??""),r=Number.parseFloat(n?.[0]??"");t&&""!==t[0].trim()&&21>Math.abs(s)&&m.push((0,w.LP)(o.G6.value.image.emphasisError1,`${t[1]}::`,`${t[1].trim()}::`)),n&&""!==n[0].trim()&&21>Math.abs(r)&&m.push((0,w.LP)(o.G6.value.image.emphasisError2,`::${n[0]}`,`${n[0].trim()}::`))}p.length>0&&(p[p.length-1].to=t+e-1-a),p.push({from:t+e-1-a,to:t+e+1,emphasis:g,color:"mid",opacity:.5},{from:t+e+1,to:t+e+1,emphasis:g,color:d,opacity:u(g)}),n="";continue}p.length>0&&(p[p.length-1].to=t+e-(n.length-1)-a),p.push({from:t+e-(n.length-1)-a,to:t+e+1,emphasis:g,color:d,opacity:u(g)}),n=""}else{if(eH.some(e=>e.textSequence.startsWith(n)))continue;e-=n.length-1,n=""}}let s=p[p.length-1];s?s.to=t+i.length:p.push({from:t,to:t+i.length,emphasis:g,color:e_(g),opacity:u(g)})}}),h.length===m.length&&h.every((e,t)=>e===m[t])||h.splice(0,h.length,...m),eL.zF.create(i,p.map(e=>{if(!e.color)return null;let t=Math.round(40*e.opacity),i=`${e.color}-intensity-color-${t}`;return eL.NZ.inline(e.from,e.to,{class:i})}).filter(e=>null!==e))}}})})(()=>j.current),new eR.k_({props:{decorations(e){let{doc:t}=e,i=[];return t.descendants((e,t)=>{if(e.isText){let n=e.textContent;for(let e=0;e<n.length;e++)if("|"===n[e]){let s=t+e,o=s+1;"|"===n[e+1]?(i.push(eL.NZ.inline(s,o+1,{class:"image-prompt-double-bar-highlight"})),e++):i.push(eL.NZ.inline(s,o,{class:"image-prompt-bar-highlight"}))}}}),eL.zF.create(t,i)}}})]}),M=(0,y.md)(h.mB);return(0,c.useEffect)(()=>{e.tutorialSuggestions&&(M>0?f.current.config.forceTagSearch():0===M&&f.current.config.forceClosed())},[e.tutorialSuggestions,M]),(0,n.jsxs)("div",{className:"relative",style:{...e.style},children:[a.length>0&&(0,n.jsx)(g.qF,{children:(0,n.jsxs)(g.gH,{children:[a.slice(0,3).map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsx)(p.N5,{children:e})},t)),a.length>3&&(0,n.jsx)("div",{children:(0,n.jsx)(p.N5,{style:{opacity:.9},children:(0,w.LP)(t.image.plusXMoreErrors,a.length)})})]})}),(0,n.jsx)(g.Yj,{state:I,ref:s,dispatchTransaction:t=>{let i=tt(t.doc.content);D(()=>t),e.onChange(i)},singleLine:e.singleLine}),s.current?.view&&!e.tagSuggestionsDisabled&&(0,n.jsxs)(n.Fragment,{children:[e.popupContainerRef?.current&&(0,eB.createPortal)((0,n.jsx)(tn,{view:s.current.view,pluginKey:A}),e.popupContainerRef?.current),!e.popupContainerRef?.current&&(0,n.jsx)(tn,{view:s.current.view,pluginKey:A})]})]})}function tn(e){let{view:t,pluginKey:i}=e,[s,r]=(0,c.useState)(()=>i.getState(t.state)),l=(0,o.B2)();return((0,c.useEffect)(()=>i.addView(t,{update:(e,t)=>{s!==t&&r(t)},destroy:()=>{}}),[i,t]),(0,c.useEffect)(()=>{},[s]),s?.active)?(0,n.jsx)(eC.N,{children:s.active&&(0,n.jsxs)(g.ub,{className:"image-prompt-suggestions",initial:{opacity:0,translateY:16},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:16},transition:{duration:.2,ease:"easeInOut"},onPointerDown:e=>{e.preventDefault()},children:[(0,n.jsxs)(g.kY,{children:[l.image.didYouMean||"Did you mean...",(0,n.jsx)(ef.Jn,{onClick:()=>{i.updateState(t,{active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""})},style:{top:15,right:15},children:(0,n.jsx)("div",{style:{width:"1rem",height:"1rem"}})})]}),s.searching&&(0,n.jsx)(eI.k,{style:{margin:"10px auto 10px auto"},visible:!0}),!s.searching&&0===s.suggestions.length&&(0,n.jsx)(g.Hi,{children:(0,n.jsx)("div",{style:{padding:4},children:"No tags found."})}),!s.searching&&s.suggestions.length>0&&(0,n.jsx)(g.Hi,{children:s.suggestions.map((e,o)=>(0,n.jsxs)(g.uu,{selected:o===s.selectedIndex,onPointerDown:e=>{e.preventDefault()},onClick:()=>(e=>{let{state:n}=t,s=n.selection.$from,o=s.start(),l=n.doc.textBetween(o,s.pos),a=l.match(/([#,[{|、]|(\. )|(::))(?<s>\s)?/g),d=o;if(a){let e=a[a.length-1];d+=l.lastIndexOf(e)+e.length}let c=n.tr;c.replaceWith(d,s.pos,n.schema.text(e+", ")),t.dispatch(c);let h={active:!1,suggestions:[],selectedIndex:-1,searching:!1,searchText:""};i.updateState(t,h),r(h)})(e.en),children:[(0,n.jsxs)(u.Ye,{style:{gap:10},children:[(0,n.jsx)("span",{children:e.en}),(0,n.jsx)(g.hQ,{count:e.count})]}),e.jp&&(0,n.jsx)("span",{style:{fontSize:"0.8rem",opacity:.7},children:e.jp})]},e.en))})]})}):null}function ts(e){let t=(0,y.md)(h.A6),{img:i,handleImageClick:s,selected:a,deleteImage:d}=e,p=null;i[0]?.labels[0]&&(p=function(e,t){switch(e){case em.wO.enhanced:return(0,n.jsx)(l.BZI,{style:{height:16,width:16}});case em.wO.inpaint:return(0,n.jsx)(l.pfu,{style:{height:16,width:16}});case em.wO.upscale:return(0,n.jsx)(l.Z3w,{style:{height:16,width:16}});case em.wO.palleteSwap:case em.wO.palleteSwapDetailed:return(0,n.jsx)(l.qeL,{style:{height:16,width:16}});case em.wO.buildingControl:return(0,n.jsx)(l.N3F,{style:{height:16,width:16}});case em.wO.formLock:return(0,n.jsx)(l.ZWw,{style:{height:16,width:16}});case em.wO.landscaper:return(0,n.jsx)(l.FgT,{style:{height:16,width:16}});case em.wO.scribbler:return(0,n.jsx)(l.a8j,{style:{height:16,width:16}});case em.wO.vibeTransfer:return(0,n.jsx)(l.VXe,{style:{height:16,width:16}});case em.wO.image2Image:return(0,n.jsx)(l.Uvs,{style:{height:16,width:16}});case em.wO.bgRemoval:return(0,n.jsx)(l.ez5,{style:{height:16,width:16}});case em.wO.lineart:return(0,n.jsx)(l.ECP,{style:{height:16,width:16}});case em.wO.sketch:return(0,n.jsx)(l.XtQ,{style:{height:16,width:16}});case em.wO.colorize:return(0,n.jsx)(l.sUC,{style:{height:16,width:16}});case em.wO.emotion:return(0,n.jsx)(ew.A,{tooltip:o.G6.value.chatpage[t.params.emotion.prompt]??"",delay:0,children:(0,n.jsx)(l.E5A,{style:{height:16,width:16}})});case em.wO.declutter:case em.wO.declutterKeepBubbles:return(0,n.jsx)(l.HHV,{style:{height:16,width:16}});default:return null}}(i[0].labels[0],i[0])),i[0]?.isVariationOriginal&&(p=null);let u=i.every(e=>e.finished);return(0,c.useMemo)(()=>(0,n.jsxs)(g.HY,{role:"button","aria-label":"choose image",onClick:e=>{e.defaultPrevented||s(e)},selected:a??!1,img:u?i[0]?.thumbnail:void 0,draggable:!0,onDragStart:e=>{e.dataTransfer.setData("text/imageid",i[0].data[0]),e.dataTransfer.effectAllowed="copyLink";let t=new Image;t.src=i[0].thumbnail,e.dataTransfer.setDragImage(t,0,0)},children:[(0,n.jsx)(ef.Ay,{style:{position:"absolute",top:0,right:0,padding:4,width:"auto",background:"none"},disabled:t||!u,onConfirm:()=>{d&&d()},warningText:"Delete this image?",confirmButtonText:"Delete it!",neverMindText:"No, keep it!",ariaLabel:"delete image(s)",buttonText:(0,n.jsx)(l.w0d,{style:{width:14,height:14}})}),!u&&(0,n.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(r.A,{visible:!0,style:{position:"absolute",height:"24px",width:"24px"}})}),i.length>1&&(0,n.jsxs)(g.w,{children:["x",i.length]}),p&&(0,n.jsx)(g.w,{children:p})]}),[a,u,i,t,p,s,d])}},96503:(e,t,i)=>{i.d(t,{R:()=>u});var n=i(94458),s=i(68658),o=i(77256),r=i(27481),l=i(97223),a=i(84659),d=i(2834),c=i(78072),h=i(74406),g=i(71928),p=i(89441).Buffer;function u(e){let t=(0,d.md)(l.LI),i=(0,d.md)(l.x1),u=(0,s.useRef)(null),[x,f]=(0,s.useState)(!1),y=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{if(!t){if((0,g.MD)("ImageGenImportOverlay","dragEnter",{e,isIOS:h.un,isSafari:h.nr}),h.un);else if(h.un||h.nr){if(!e.dataTransfer?.types.includes("Files")&&e.dataTransfer?.effectAllowed!=="copyMove")return}else if(!e.dataTransfer?.types.includes("Files")&&e.dataTransfer?.effectAllowed!=="copyLink")return;y.current=e.target,f(!0)}},i=e=>{(e.target===y.current||e.target===document)&&f(!1)};return document.addEventListener("dragenter",e),document.addEventListener("dragleave",i),()=>{document.removeEventListener("dragenter",e),document.removeEventListener("dragleave",i)}},[t]);let b=async t=>{let i=[...t.dataTransfer.files];if(f(!1),(0,g.MD)("ImageGenImportOverlay","handleDrop",{event:t,files:i,isIOS:h.un,isSafari:h.nr}),0===i.length&&t.dataTransfer.types.includes("text/imageid")){let i=t.dataTransfer.getData("text/imageid");if(i){let t=await c.W3.getImage(i);if(!t)return;let n=i+".png",s=await t.arrayBuffer();e.onFileImport(p.from(s),n,new File([s],n,{type:"image/png"}));return}}if(0===i.length)return;if(t.preventDefault(),t.stopPropagation(),i.length>1&&e.onFilesImport)return void e.onFilesImport(i);let n=[],s=[];for(let e of i)s.push(e.name),n.push(e.arrayBuffer());await Promise.allSettled(n).then(async t=>{let n=t[0];if("fulfilled"===n.status){let t=p.from(n.value);e.onFileImport(t,s[0],i[0])}else(0,r.oR)("Something went wrong while importing a file.",{type:"error"})}).catch(e=>{(0,r.oR)("Something went wrong while importing a file: "+(e.message??e),{type:"error"})})};return(0,n.jsx)(a.HF,{visible:x,fixed:!0,ref:u,onDrop:b,onDragOver:m,onClick:e=>{f(!1),e.preventDefault()},children:(0,n.jsx)(a.eg,{visible:x,children:(0,n.jsx)(o.t76,{style:{width:"50px",height:"50px",color:i.colors.textMain}})})})}let m=e=>{e.stopPropagation(),e.preventDefault()}},97354:(e,t,i)=>{i.d(t,{VX:()=>F,iC:()=>et,p$:()=>ei});var n=i(94458),s=i(97223),o=i(13331),r=i(96503),l=i(88743),a=i(89077),d=i(55805),c=i(59820),h=i(50761),g=i(68658),p=i(88291),u=i(73484),m=i(92704),x=i(27481),f=i(88567),y=i(94063),b=i(90129),w=i(71928),j=i(39612),v=i(48370),C=i(50884),k=i(3715),A=i(20472),I=i(14666),S=i(18649),D=i(95669),M=i(83513),T=i(2834),E=i(73060),L=i(21715),R=i(84601),O=i(62006),P=i(98883),B=i(16143),H=i(78072),z=i(92356),_=i(89441).Buffer,$=function(e){return e.neutral="neutral",e.happy="happy",e.sad="sad",e.angry="angry",e.scared="scared",e.surprised="surprised",e.tired="tired",e.excited="excited",e.nervous="nervous",e.thinking="thinking",e.confused="confused",e.shy="shy",e.disgusted="disgusted",e.smug="smug",e.bored="bored",e.laughing="laughing",e.irritated="irritated",e.aroused="aroused",e.embarrassed="embarrassed",e.worried="worried",e.love="love",e.determined="determined",e.hurt="hurt",e.playful="playful",e}($||{});function F(e){let{capture:t}=(0,M.A)(),i=(0,u.B2)(),[d,C]=(0,T.fp)(s.Rm),[F,N]=(0,T.fp)(s.Au),[er,ea]=(0,T.fp)(s.nr),[eu,em]=(0,T.fp)(s.OK),[ex,ef]=(0,T.fp)(s.A6),[ey,eb]=(0,g.useState)({"bg-removal":{},declutter:{},"declutter-keep-bubbles":{},lineart:{},sketch:{},colorize:{prompt:"",defry:0},emotion:{prompt:"neutral",defry:0,extra:""},upscale:{}}),[ew,ej]=(0,c.A)("image-tool",h.e8.bgRemoval,!1),[ev,eC]=(0,T.fp)(s.Nn),{fetchSteps:ek}=(0,O.A)(),[eA,eI]=(0,g.useState)(!1),[eS,eD]=(0,g.useState)(!1);(0,g.useEffect)(()=>{if(d[er]){let e=d[er];e.width*e.height>1048576?eD(!0):eD(!1)}},[d,er]);let{bgRemoval:eM,declutter:eT,lineart:eE,sketch:eL,colorize:eR,emotion:eO,upscale:eP}=(0,o.C2)(),eB=(0,g.useCallback)(async(e,t)=>{let i=URL.createObjectURL(new Blob([e],{type:"image/png"})),n=new Image;n.src=i;let s=t.split(".");s.length>1&&(t=s.slice(0,-1).join(".")),n.addEventListener("load",()=>{let s=n.height,o=n.width,r=(0,l.A)();C([{data:_.from(e),url:i,height:s,width:o,id:r,filename:t},...d]),ea(0)})},[d,C,ea]),eH=(0,T.md)(s.x1),ez=(0,g.useMemo)(()=>[...Object.keys($)].map(e=>({value:e,label:i.chatpage[e]})),[i.chatpage]),[e_,e$]=(0,c.A)("imagegen-tag-suggestions-disabled",!1,!1),eF=(0,g.useCallback)(()=>ew===h.e8.emotion?ey[ew].extra:ey[ew].prompt,[ew,ey]);(0,g.useCallback)(e=>{if(ew===h.e8.emotion)return void eb({...ey,[ew]:{...ey[ew],extra:e}});eb({...ey,[ew]:{...ey[ew],prompt:e}})},[ey,ew,eb]);let[eN,eW]=(0,g.useState)(0),eq=(0,g.useRef)(0);(0,g.useEffect)(()=>{clearTimeout(eq.current),eq.current=setTimeout(async()=>{let e=new S.eT,t=eF();eW((await e.encode(t,D.j.CLIP)).length)},100)},[eF,ew,ey]);let eU=(0,g.useRef)(null),eV=(0,g.useRef)(null),eX=(0,A.l)(),eG=(e,t)=>{let i=(async()=>("png"!==t&&(e=await (0,j.Qj)(e)),new Blob([e],{type:"image/png"})))();(0,y.Ck)(i).then(()=>{(0,x.oR)("Image copied to clipboard",{type:"success"})}).catch(e=>{(0,x.oR)("Error copying image to clipboard: "+e,{type:"error"})})},eY=(e,t)=>{(0,w.PE)(e,t,"image/png")},[eJ,eQ]=(0,g.useState)(-1),eZ=(0,E.yF)((0,g.useCallback)((e,t,i,n,o,r,l,a)=>{let d={...n},c=e(s.Nn);if(o===h.e8.upscale)return d.width*d.height>1048576?void l(-2):void l((0,j.tY)(d.width,d.height,c));let{height:g,width:p}=(0,j.Bu)(d.width,d.height,j.xM);({height:g,width:p}=(0,j.Rj)(g,p,j.a4)),d.width=p,d.height=g,l((0,j.GI)(d,c,v.oM.naiDiffusionV3,o===h.e8.bgRemoval))},[])),eK=(0,g.useRef)(0),e0=(0,g.useRef)(0),e1=(0,g.useRef)("");(0,g.useEffect)(()=>{let e={...ey[ew]};if(!d[er])return void eQ(-2);e.width=d[er]?.width||0,e.height=d[er]?.height||0,e.n_samples=1,e.uc=",",e.image=void 0,e.sm=!1,e.sm_dyn=!1,e.steps=28,e.sm=!1,e.sm_dyn=!1,e.tool=ew;let t=JSON.stringify(e);e1.current!==t&&(e1.current=t,eQ(-1),clearTimeout(e0.current),e0.current=setTimeout(()=>{let t=Math.floor(65e3*Math.random());eK.current=t,eZ(t,e,ew,e=>e==eK.current,e=>{ew===h.e8.bgRemoval&&(e=3*e+5),eQ(e)},()=>{eQ(-2)})},300))},[eZ,ey,ew,er,d]);let[e2,e8]=(0,g.useState)(-1),e6=(0,g.useRef)(0),e4=(0,g.useRef)(0),e3=(0,g.useRef)("");(0,g.useEffect)(()=>{let e={...ey[h.e8.upscale]};d[er]||e8(-2),e.width=d[er]?.width,e.height=d[er]?.height,e.n_samples=1,e.uc=",",e.image=void 0,e.sm=!1,e.sm_dyn=!1,e.steps=28,e.sm=!1,e.sm_dyn=!1,e.tool=h.e8.upscale;let t=JSON.stringify(e);e3.current!==t&&(e3.current=t,e8(-1),clearTimeout(e4.current),e4.current=setTimeout(()=>{let t=Math.floor(65e3*Math.random());e6.current=t,eZ(t,e,h.e8.upscale,e=>e==e6.current,e=>{e8(e)},()=>{e8(-2)})},300))},[eZ,ey,er,d]);let e7=(0,g.useCallback)(e=>{if(e.clipboardData&&(e?.clipboardData?.files?.length??0)>0){e.stopPropagation();let t=e.clipboardData.files[0];if(t.type.startsWith("image/")){let e=new FileReader;e.addEventListener("load",e=>{e.target?.result&&eB(_.from(e.target.result),t.name)}),e.readAsArrayBuffer(t)}}},[eB]),e5=(0,g.useRef)(null),e9=(0,g.useMemo)(()=>[h.e8.bgRemoval,h.e8.lineart,h.e8.sketch,h.e8.colorize,h.e8.emotion,h.e8.declutter].map(e=>({value:e,label:i.imageTools.tools[e]})),[i.imageTools.tools]),te=(0,g.useMemo)(()=>({[h.e8.bgRemoval]:(0,n.jsx)(m.ez5,{style:{width:14,height:14}}),[h.e8.declutter]:(0,n.jsx)(m.HHV,{style:{width:14,height:14}}),[h.e8.lineart]:(0,n.jsx)(m.ECP,{style:{width:14,height:14}}),[h.e8.sketch]:(0,n.jsx)(m.XtQ,{style:{width:14,height:14}}),[h.e8.colorize]:(0,n.jsx)(m.sUC,{style:{width:14,height:14}}),[h.e8.emotion]:(0,n.jsx)(m.E5A,{style:{width:14,height:14}}),[h.e8.upscale]:(0,n.jsx)(m.Z3w,{style:{width:14,height:14}}),[h.e8.declutterKeepBubbles]:(0,n.jsx)(m.HHV,{style:{width:14,height:14}})}),[]),tt=(0,g.useMemo)(()=>({[h.e8.bgRemoval]:(0,n.jsx)(m.ez5,{style:{width:16,height:16},highlight:!0}),[h.e8.declutter]:(0,n.jsx)(m.HHV,{style:{width:16,height:16},highlight:!0}),[h.e8.lineart]:(0,n.jsx)(m.ECP,{style:{width:16,height:16},highlight:!0}),[h.e8.sketch]:(0,n.jsx)(m.XtQ,{style:{width:16,height:16},highlight:!0}),[h.e8.colorize]:(0,n.jsx)(m.sUC,{style:{width:16,height:16},highlight:!0}),[h.e8.emotion]:(0,n.jsx)(m.E5A,{style:{width:16,height:16},highlight:!0}),[h.e8.upscale]:(0,n.jsx)(m.Z3w,{style:{width:16,height:16},highlight:!0}),[h.e8.declutterKeepBubbles]:(0,n.jsx)(m.HHV,{style:{width:16,height:16},highlight:!0})}),[]),ti=F[eu.image]?.length===1?0:eu.subimage,tn=(0,g.useRef)(null),[ts,to]=(0,g.useState)(1),[tr,tl]=(0,g.useState)(1),[ta,td]=(0,g.useState)(0),[tc,th]=(0,g.useState)(0),[tg,tp]=(0,g.useState)({width:0,height:0});(0,g.useEffect)(()=>{if(tn.current){let e=tn.current.getBoundingClientRect();tp({width:e.width,height:e.height})}let e=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect;tp({width:e.width,height:e.height})}});return tn.current&&e.observe(tn.current),()=>{e.disconnect()}},[tn,F]),(0,g.useLayoutEffect)(()=>{let e=F[eu.image];if(tn.current&&e){let t=tn.current.getBoundingClientRect(),i=t.width-(tr-1)*20-100*!!e?.[0]?.gridYLabel,n=t.height-(ts-1)*20-60*!!e?.[0]?.gridYLabel;if(!e[0]||!t||!e)return;let s=e[0].width*tr/(e[0].height*ts),o=e[0].width/e[0].height;if(i/n<s){let e=i/tr;td(e),th(e/o)}else{let e=n/ts;th(e),td(e*o)}}},[tr,ts,eX,ti,tg,F,eu.image,eu.subimage]),(0,g.useLayoutEffect)(()=>{let e=tn.current?.getBoundingClientRect(),t=F[eu.image];if(t?.[0]?.gridXLength&&t?.[0]?.gridYLength){let e=t[0].gridXLength;to(t[0].gridYLength),tl(e);return}if(e&&t?.[0]){let i=e.width/e.height,n=t[0].width,s=t[0].height,o=[];for(let e=1;e<=t.length;e++)for(let i=1;i<=t.length;i++)e*i>=t.length&&o.push({columns:e,rows:i});let r=o.filter(e=>e.columns*e.rows-t.length<=1).reduce((e,t)=>{let o=Math.abs(t.columns*n/(t.rows*s)-i);return o<e.score?{layout:t,score:o}:e},{layout:{columns:1,rows:1},score:1/0});to(r.layout.rows),tl(r.layout.columns)}},[eX,tg,F,eu.image,eu.subimage]);let tu=(0,T.Xr)(j.gY),[tm,tx]=(0,T.fp)(j.IB);(0,g.useEffect)(()=>{eX.prevWidth>k.kJ&&eX.width<=k.kJ&&tx(!1)},[tx,eX.prevWidth,eX.width]),(0,g.useEffect)(()=>{let e=document.querySelector("#historyContainer");e&&tm&&e.lastChild?.scrollIntoView({behavior:"smooth"}),em(e=>({...e,subimage:void 0}))},[F]);let[tf,ty]=(0,g.useState)(!1),tb=(0,g.useRef)(null),tw=(0,g.useCallback)(async(e,i,n,s)=>{t("image:generated",{location:"image_tools",type:"tool",tool:i,...(0,j.ZC)(n,[],[]),anlas:i===h.e8.upscale?e2:eJ});let o=e.map(e=>URL.createObjectURL(new Blob([e],{type:"image/png"}))),r=new Image;r.src=o[0],r.addEventListener("load",async()=>{let t=r.height,a=r.width,d=(0,l.A)(),c=(0,R.cv)(ev.settings,"imageAutoDownload");c&&e.forEach((e,t)=>{eY(e,`${s.filename}_${h.Qd[i][t]}.png`)});let g={data:await Promise.all(e.map(async(e,t)=>H.W3.addImage(e,"png"))),thumbnail:await (0,z.r)(e[0],128),height:t,width:a,tool:i,params:n,originalId:s.id,fileType:"png",id:d,filename:s.filename+"_"+i,origFilename:s.filename,downloaded:c?e.map(()=>!0):e.map(()=>!1),genDateTime:new Date,labels:[(0,j.RM)(i)],finished:!0};i===h.e8.emotion&&(g.filename=s.filename+"_"+i+"_"+n.emotion.prompt),N([[g],...F]),em(e=>({...e,image:0,subimage:void 0})),o.forEach(e=>URL.revokeObjectURL(e))})},[t,F,eJ,ev.settings,N,em,e2]),tj=(0,B.C)(),tv=(0,g.useCallback)(async e=>{if(!ex){ef(!0);try{switch(e||ew){case h.e8.bgRemoval:{let e=d[er],t=await eM(e,{...ey[ew],width:e.width,height:e.height});tw(t,h.e8.bgRemoval,ey,e);break}case h.e8.declutter:{let e=d[er],t={...ey[ew],width:e.width,height:e.height},i=await eT(e,t);tw(i,h.e8.declutter,ey,e);break}case h.e8.lineart:{let e=d[er],t=await eE(e,{...ey[ew],width:e.width,height:e.height});tw(t,h.e8.lineart,ey,e);break}case h.e8.sketch:{let e=d[er],t=await eL(e,{...ey[ew],width:e.width,height:e.height});tw(t,h.e8.sketch,ey,e);break}case h.e8.colorize:{let e=d[er],t=await eR(e,{...ey[ew],width:e.width,height:e.height});tw(t,h.e8.colorize,ey,e);break}case h.e8.emotion:{let e=d[er],t=await eO(e,{...ey[ew],width:e.width,height:e.height});tw(t,h.e8.emotion,ey,e);break}case h.e8.upscale:{let e=d[er],t=await eP(e,{...ey[ew],width:e.width,height:e.height});tw(t,h.e8.upscale,ey,e)}}}catch(e){if(e?.message.includes("Not enough Anlas"))return void tj();(0,x.oR)(e.message,{type:"error"})}finally{ef(!1),ek()}}},[ex,ef,ew,d,er,eM,ey,tw,eT,eE,eL,eR,eO,eP,tj,ek]),tC=(0,g.useMemo)(()=>{switch(ew){case h.e8.colorize:return(0,n.jsx)("div",{style:{width:"100%",overflowX:"auto"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:15,alignItems:"center",flex:"1 1 0",minWidth:800,width:"100%"},children:[(0,n.jsxs)("div",{style:{maxWidth:200,width:"100%"},children:[(0,n.jsx)("div",{style:{fontWeight:600,marginBottom:10},children:i.imageTools.defry}),(0,n.jsx)(b.Dz,{children:(0,n.jsx)(b.sx,{value:ey.colorize.defry,setValue:e=>{eb({...ey,colorize:{...ey.colorize,defry:e}})},values:[...Array.from({length:6},(e,t)=>({value:t,label:t.toString()}))],setMaxWidth:!0})})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:"1 1 0",minWidth:0},children:[(0,n.jsx)("span",{style:{flex:"0 0 auto",fontWeight:600,marginBottom:10},children:i.imageTools.prompt}),(0,n.jsx)(b.yp,{id:"colorize-prompt",style:{border:"1px solid "+eH.colors.bg3,width:"100%"},value:ey.colorize.prompt,onChange:e=>{eb({...ey,colorize:{...ey.colorize,prompt:e}})},generate:()=>{tv()},selectedModel:v.oM.naiDiffusionV3,tagSuggestionsDisabled:e_,singleLine:!0,popupContainerRef:eX.width>900?eU:eV})]})]})});case h.e8.emotion:return(0,n.jsxs)("div",{style:{width:"100%",overflowX:"auto"},children:[(0,n.jsxs)("div",{style:{marginBottom:10,display:"flex",flexWrap:"wrap",gap:10},children:[(0,n.jsx)("span",{style:{opacity:.7},children:i.imageTools.animeOnly}),(0,n.jsx)("a",{href:i.imageTools.imageToolsDocsLink,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(eg,{children:i.common.learnMore})})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:15,alignItems:"center",minWidth:800,width:"100%"},children:[(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("span",{style:{fontWeight:600},children:[i.imageTools.emotion," "]}),(0,n.jsx)("span",{style:{opacity:.7},children:i.imageTools.emotionStrengths[ey.emotion.defry]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:5,alignItems:"center"},children:[(0,n.jsx)("div",{style:{minWidth:162,height:"42px"},children:(0,n.jsx)(p.l6,{menuPlacement:"top",menuPortalTarget:document.body,menuPosition:"fixed",onMenuOpen:()=>{setTimeout(()=>{let e=document.querySelector('div[aria-selected="true"]');e&&e.scrollIntoView()},10)},isSearchable:!1,value:ez.find(e=>e.value===ey.emotion.prompt),onChange:e=>e&&eb({...ey,emotion:{...ey.emotion,prompt:e.value}}),options:ez,styles:{...(0,p.vQ)(eH),container:(e,t)=>({...(0,p.vQ)(eH).control(e,t),height:"100%",overflow:"visible"}),menuPortal:(e,t)=>({...(0,p.vQ)(eH).menu(e,t),zIndex:100})}})}),(0,n.jsxs)(b.Dz,{children:[(0,n.jsx)(b.rA,{disabled:5===ey.emotion.defry,onClick:()=>{ey.emotion.defry=Math.min(5,ey.emotion.defry+1),eb({...ey})},children:(0,n.jsx)(m.QGg,{style:{width:14,height:14}})}),(0,n.jsx)(b.rA,{disabled:0===ey.emotion.defry,onClick:()=>{ey.emotion.defry=Math.max(0,ey.emotion.defry-1),eb({...ey})},children:(0,n.jsx)(m.c11,{style:{width:14,height:14}})})]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,flex:"1 1 0"},children:[(0,n.jsx)("div",{style:{fontWeight:600},children:i.imageTools.prompt}),(0,n.jsx)(b.yp,{id:"emotion-prompt",style:{border:"1px solid "+eH.colors.bg3},value:ey.emotion.extra,onChange:e=>{eb({...ey,emotion:{...ey.emotion,extra:e}})},generate:()=>{tv()},selectedModel:v.oM.naiDiffusionV3,tagSuggestionsDisabled:e_,singleLine:!0,popupContainerRef:eX.width>900?eU:eV})]})]})]});default:return null}},[ew,i.imageTools.defry,i.imageTools.prompt,i.imageTools.animeOnly,i.imageTools.imageToolsDocsLink,i.imageTools.emotion,i.imageTools.emotionStrengths,i.common.learnMore,ey,eH,e_,eX.width,tv,ez]);(0,g.useEffect)(()=>{let e=e=>{e.ctrlKey&&"Enter"===e.key&&(tv(),e.preventDefault(),e.stopPropagation())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[tv]);let tk=(0,H.WE)(F?.[eu.image]?.[ti??0]?.data[Math.min(eu.variation,F[eu.image][ti??0]?.data.length-1)]);return(0,n.jsxs)("div",{className:"image-gen-tools",style:{height:"100%",width:"100%",background:eH.colors.bg1,display:"flex"},onPaste:e7,children:[(0,n.jsx)(r.R,{onFileImport:(e,t)=>{eB(e,t)}}),(0,n.jsx)(P.ii,{page:"image",hidden:!0}),(0,n.jsx)(I.DG,{breakpoint:900,children:(0,n.jsx)("div",{style:{width:150}})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},children:[(0,n.jsx)(b.A6,{alternateStyle:!0,backAction:e.close?()=>{e.close?.()}:"/image",backIcon:(0,n.jsx)(m.mOs,{style:{height:21,width:18,marginLeft:10,cursor:"pointer"}}),location:"image_tools",hangingSubmenu:!0}),(0,n.jsxs)(Y,{style:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)(I.DG,{breakpoint:900,children:(0,n.jsxs)(J,{children:[(0,n.jsx)(I.DG,{breakpoint:900,children:(0,n.jsx)(Q,{style:{borderRight:"none",position:"absolute",left:-150,height:"100%",width:119},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:e5,onChange:e=>{if(e.target.files?.length){let t=e.target.files[0],i=new FileReader;i.addEventListener("load",e=>{e.target?.result&&eB(_.from(e.target.result),t.name),e5.current&&(e5.current.value="")}),i.readAsArrayBuffer(t)}}}),(0,n.jsx)(es,{selected:!1,onClick:()=>{e5.current?.click()},children:(0,n.jsx)(m.z52,{style:{width:16,height:16,margin:10}})}),d.map((e,t)=>(0,n.jsx)(eo,{image:e.url,selected:t===er,onClick:()=>{ea(t)},onDelete:()=>{t===er&&ea(Math.max(0,er-1)),C(d.filter((e,i)=>i!==t))},deleteOnLeft:!0},e.id))]})})}),(0,n.jsxs)(K,{children:[d[er]?(0,n.jsx)(ee,{children:(0,n.jsx)("img",{alt:"input",src:d[er]?.url})}):(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"},children:(0,n.jsx)("svg",{width:"106",height:"74",viewBox:"0 0 106 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M95.4 0C98.2113 0 100.907 1.11377 102.895 3.0963C104.883 5.07883 106 7.76771 106 10.5714V63.4286C106 66.2323 104.883 68.9212 102.895 70.9037C100.907 72.8862 98.2113 74 95.4 74H10.6C7.78871 74 5.09255 72.8862 3.10467 70.9037C1.11678 68.9212 0 66.2323 0 63.4286V10.5714C0 4.70429 4.717 0 10.6 0H95.4ZM15.9 58.1429H90.1L66.25 26.4286L47.7 50.2143L34.45 34.3571L15.9 58.1429Z",fill:eH.colors.bg3})})}),d[er]&&(0,n.jsx)("div",{style:{position:"absolute",bottom:10,left:10},children:(0,n.jsxs)(b.Dz,{style:{padding:0,gap:10,background:"none",border:"none"},children:[(0,y.ww)()&&(0,n.jsx)(f.A,{motionHover:!0,tooltip:i.image.copyToClipboard,delay:200,style:{height:"100%"},inheritHeight:!0,children:(0,n.jsx)(b.rA,{onClick:()=>{d[er]&&eG(d[er].data,"png")},children:(0,n.jsx)(m.uiJ,{style:{width:16,height:16}})})}),(0,n.jsx)(f.A,{motionHover:!0,tooltip:eS?i.imageTools.tooLargeForUpscale:i.image.upscale,delay:200,style:{height:"100%"},inheritHeight:!0,children:(0,n.jsx)(b.rA,{onClick:()=>{eS||tv(h.e8.upscale)},price:e2,disabled:eS,children:(0,n.jsx)(m.Z3w,{style:{width:16,height:16}})})})]})}),d[er]&&(0,n.jsx)("div",{style:{position:"absolute",bottom:10,right:10},children:(0,n.jsxs)(b.LG,{style:{fontSize:14},children:[(0,n.jsx)("span",{children:d[er]?.width}),(0,n.jsx)(m.xjb,{style:{height:12,width:12}}),(0,n.jsx)("span",{children:d[er]?.height})]})}),eA&&ew!==h.e8.upscale&&(0,n.jsx)("div",{style:{bottom:20,color:eH.colors.warning,fontSize:"0.875rem"},children:i.imageTools.tooLarge}),eS&&ew===h.e8.upscale&&(0,n.jsx)("div",{style:{bottom:20,color:eH.colors.warning,fontSize:"0.875rem"},children:i.imageTools.tooLargeForUpscale})]})]})}),(0,n.jsx)(J,{children:(0,n.jsxs)(K,{children:[void 0!==ti&&F[eu.image][ti]&&(0,n.jsx)("div",{style:{position:"absolute",bottom:10,right:10},children:(0,n.jsxs)(b.Dz,{style:{padding:0,gap:10,background:"none",border:"none"},children:[(0,n.jsx)(b.rA,{onClick:async()=>{let e=await H.W3.getImageBuffer(F[eu.image][ti].data[Math.min(eu.variation,F[eu.image][ti].data.length-1)]);if(!e)return void(0,x.oR)(i.image.imageNotFoundInStorage,{type:"error"});eB(e,F[eu.image][ti].origFilename)},children:(0,n.jsx)(m.Kjd,{style:{width:14,height:14}})}),(0,y.ww)()&&(0,n.jsx)(f.A,{motionHover:!0,tooltip:i.image.copyToClipboard,delay:200,style:{height:"100%"},inheritHeight:!0,children:(0,n.jsx)(b.rA,{onClick:async()=>{let e=await H.W3.getImageBuffer(F[eu.image][ti].data[Math.min(eu.variation,F[eu.image][ti].data.length-1)]);if(!e)return void(0,x.oR)(i.image.imageNotFoundInStorage,{type:"error"});eG(e,"png")},children:(0,n.jsx)(m.uiJ,{style:{width:16,height:16}})})}),(0,n.jsx)(f.A,{motionHover:!0,tooltip:i.image.downloadImage,delay:200,style:{height:"100%"},inheritHeight:!0,children:(0,n.jsx)(b.rA,{onClick:async()=>{let e=await H.W3.getImageBuffer(F[eu.image][ti].data[Math.min(eu.variation,F[eu.image][ti].data.length-1)]);if(!e)return void(0,x.oR)(i.image.imageNotFoundInStorage,{type:"error"});eY(e,`${F[eu.image][ti].filename}.png`),N(F.map((e,t)=>t===eu.image?e.map((e,t)=>({...e,downloaded:e.downloaded.map((t,i)=>i===Math.min(eu.variation,e.data.length-1)||t)})):e))},children:(0,n.jsx)(m.LPu,{style:{width:16,height:16,opacity:F[eu.image][ti]?.downloaded[Math.min(eu.variation,F[eu.image][ti]?.downloaded.length-1)]?.4:1}})})})]})}),F.length>0&&F[eu.image]?.[0]?.data.length>1&&(0,n.jsx)(et,{style:{display:"flex",flexDirection:"row"},children:F[eu.image][0]?.data.map((e,t)=>(0,n.jsx)(ei,{selected:t===Math.min(eu.variation,e.length-1),onClick:()=>{em(e=>({...e,variation:t}))},children:i.imageTools[h.Qd[F[eu.image][0].tool][t]]},e))}),(0,n.jsx)(ee,{children:F.length<=0?(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"},children:(0,n.jsx)("svg",{width:"106",height:"74",viewBox:"0 0 106 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M95.4 0C98.2113 0 100.907 1.11377 102.895 3.0963C104.883 5.07883 106 7.76771 106 10.5714V63.4286C106 66.2323 104.883 68.9212 102.895 70.9037C100.907 72.8862 98.2113 74 95.4 74H10.6C7.78871 74 5.09255 72.8862 3.10467 70.9037C1.11678 68.9212 0 66.2323 0 63.4286V10.5714C0 4.70429 4.717 0 10.6 0H95.4ZM15.9 58.1429H90.1L66.25 26.4286L47.7 50.2143L34.45 34.3571L15.9 58.1429Z",fill:eH.colors.bg3})})}):void 0===ti?(0,n.jsx)("div",{ref:tn,style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(el,{maxWidth:ta?ta*tr+(tr-1)*20:void 0,columns:(F[eu.image]?.length??0)>0?tr:1,rows:(F[eu.image]?.length??0)>0?ts:1,style:{padding:F[eu.image]?.[0]?.axisYLabel?"60px 0 0 100px":"0"},children:F[eu.image]?.map((e,t)=>(0,n.jsx)(ep,{imageWidth:ta,imageHeight:tc,img:e,i:t,selectedImage:eu,setSelectedImage:em},e.data[0]))})}):(0,n.jsx)("img",{alt:"output",src:tk||j.Ec,onClick:()=>{F[eu.image].length>1&&em(e=>({...e,subimage:void 0}))},style:{cursor:F[eu.image].length>1?"pointer":"default"}})}),(0,n.jsx)(I.DG,{breakpoint:900,children:F[eu.image]?.[0]&&(0,n.jsx)("div",{style:{position:"absolute",bottom:10,left:10},children:(0,n.jsxs)(b.LG,{style:{fontSize:14},children:[(0,n.jsx)("span",{children:F[eu.image][0]?.width}),(0,n.jsx)(m.xjb,{style:{height:12,width:12}}),(0,n.jsx)("span",{children:F[eu.image][0]?.height})]})})})]})})]}),(0,n.jsx)(I.DG,{breakpoint:900,children:(0,n.jsxs)(W,{children:[ex&&(0,n.jsx)(b.Gm,{style:{position:"absolute",top:0,left:0,width:"100%"},visible:ex}),(0,n.jsx)("div",{ref:eU,style:{position:"relative",bottom:"140px"}}),tC&&(0,n.jsx)(V,{children:tC}),void 0!==eF()&&(0,n.jsx)("div",{style:{padding:"0 20px",marginBottom:10,display:"flex"},children:(0,n.jsx)(f.A,{motionHover:!0,tooltip:(0,L.LP)(i.image.tokenCounter,eN,k.Hi),delay:0,style:{flex:"1 1 0"},children:(0,n.jsx)(ec,{children:(0,n.jsx)(eh,{width:eN/k.Hi*100})})})}),(0,n.jsxs)(X,{topBorder:!!tC,children:[(0,n.jsx)(I.OJ,{breakpoint:880,children:(0,n.jsx)("div",{style:{maxWidth:200,width:"100%"},children:(0,n.jsx)(p.l6,{menuPlacement:"auto",isSearchable:!1,value:e9.find(e=>e.value===ew),onChange:e=>e&&ej(e.value),options:e9,styles:{...(0,p.vQ)(eH),container:(e,t)=>({...(0,p.vQ)(eH).control(e,t),height:"100%",overflow:"visible"})}})})}),(0,n.jsx)(I.DG,{breakpoint:880,children:(0,n.jsx)("div",{style:{display:"flex"},children:e9.map(e=>(0,n.jsx)(f.A,{motionHover:!0,tooltip:i.imageTools.toolTooltip[e.value],delay:1e3,children:(0,n.jsxs)(ed,{style:{height:"100%"},selected:ew===e.value,onClick:()=>{ej(e.value)},children:[te[e.value],e.label]})},e.value))})}),(0,n.jsx)("div",{style:{maxWidth:192},children:(0,n.jsx)(b.CJ,{selectedModel:void 0,imageCount:1,isOpusFree:ew!==h.e8.bgRemoval&&(0,j.t1)({width:d[er]?.width,height:d[er]?.height,steps:28}),onClick:()=>tv(),price:eJ,additionalPrice:0,style:{width:"100%",wordBreak:"keep-all"},disabled:ex||eJ<0||!d[er],children:i.imageTools.transform})})]})]})}),(0,n.jsxs)(I.OJ,{breakpoint:900,children:[(0,n.jsx)(U,{children:(0,n.jsxs)("div",{style:{display:"flex",gap:5,paddingLeft:20},children:[(0,n.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:e5,onChange:e=>{if(e.target.files?.length){let t=e.target.files[0],i=new FileReader;i.addEventListener("load",e=>{e.target?.result&&eB(_.from(e.target.result),t.name),e5.current&&(e5.current.value="")}),i.readAsArrayBuffer(t)}}}),d[er]?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z,{children:(0,n.jsx)(eo,{image:d[er].url,selected:!1,onClick:()=>{},deleteOnLeft:!0},d[er].id)}),(0,n.jsx)(a.ur,{style:{height:44,padding:6},onClick:()=>{e5.current?.click()},children:(0,n.jsx)(m.z52,{style:{width:16,height:16,margin:10}})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z,{children:(0,n.jsx)("div",{children:(0,n.jsx)(en,{selected:!1,style:{height:100,width:100,padding:6,display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>{e5.current?.click()},children:(0,n.jsx)("div",{style:{backgroundColor:eH.colors.bg3,padding:"4px 6px",borderRadius:3},children:(0,n.jsx)(m.z52,{style:{width:16,height:16,margin:10}})})})})})}),!eS&&d[er]&&(0,n.jsx)(b.rA,{price:e2,disabled:eS,onClick:()=>{eS||tv(h.e8.upscale)},style:{height:44},children:(0,n.jsx)(m.Z3w,{style:{width:16,height:16}})})]})}),(0,n.jsxs)(q,{children:[(0,n.jsx)("div",{ref:eV,style:{position:"relative",bottom:"40px"}}),ex&&(0,n.jsx)(b.Gm,{style:{position:"absolute",top:0,left:0,width:"100%",zIndex:300},visible:ex}),tC&&(0,n.jsxs)(b.lr,{open:tf,setOpen:ty,belowTraySize:50,style:{margin:"auto",border:`1px solid ${eH.colors.bg3}`,borderTopRightRadius:3,borderTopLeftRadius:3,maxWidth:600,width:"calc(100% - 20px)"},offsetWhenOpen:!0,children:[(0,n.jsx)(V,{children:tC})," ",void 0!==eF()&&(0,n.jsx)("div",{style:{padding:"0 20px",marginBottom:10,display:"flex"},children:(0,n.jsx)(f.A,{motionHover:!0,tooltip:(0,L.LP)(i.image.tokenCounter,eN,k.Hi),delay:0,style:{flex:"1 1 0"},children:(0,n.jsx)(ec,{children:(0,n.jsx)(eh,{width:eN/k.Hi*100})})})})]}),(0,n.jsx)("div",{style:{backgroundColor:eH.colors.bg1,width:"100%",height:50,zIndex:250},children:(0,n.jsxs)(G,{style:{position:"relative",zIndex:251,height:50},topBorder:!!tC,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(a.Dp,{onClick:()=>{tb.current?.focus()},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:5,width:44,height:44},children:[(0,n.jsx)(m.Kpk,{style:{width:12,height:6},highlight:!0}),tt[ew]]}),(0,n.jsx)(p.l6,{parentRef:tb,menuPlacement:"auto",menuPosition:"fixed",openMenuOnFocus:!0,isSearchable:!1,value:e9.find(e=>e.value===ew),onChange:e=>e&&ej(e.value),options:e9,styles:{...(0,p.vQ)(eH),control:(e,t)=>({...(0,p.vQ)(eH).control(e,t),background:eH.colors.bg1,borderRadius:3,border:`1px solid ${eH.colors.bg3}`,outline:"none","&:hover":{border:`1px solid ${eH.colors.bg3}`}}),container:(e,t)=>({...(0,p.vQ)(eH).container(e,t),height:0,minWidth:170,overflow:"hidden",border:"none",position:"absolute",bottom:5,zIndex:254})}})]}),(0,n.jsx)("div",{style:{maxWidth:300,flex:"1 1 0"},children:(0,n.jsx)(b.CJ,{selectedModel:void 0,imageCount:1,isOpusFree:ew!==h.e8.bgRemoval&&(0,j.t1)({width:d[er]?.width,height:d[er]?.height,steps:28}),onClick:()=>tv(),price:eJ,additionalPrice:0,style:{width:"100%",wordBreak:"keep-all"},disabled:ex||eJ<0,children:i.imageTools.transform})}),(0,n.jsx)(a.Dp,{onClick:()=>tx(!tm),style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:5,width:44,height:44},children:(0,n.jsx)(m.osr,{style:{width:16,height:16}})})]})})]})]})]}),(0,n.jsx)(b.uh,{offsetFromBottom:50,handleImageClick:(e,t)=>{let n=F[t][0],s=n.labels.some(e=>j.p1.has(e));if((e.ctrlKey||e.metaKey||e.shiftKey)&&!s)return void(0,x.oR)(i.image.cannotCopyHistorySettings,{type:"info"});if(e.ctrlKey||e.metaKey){let e={...ey},t=n.tool;if(!t)return;e[t]={...n.params[t]},eb(e)}else tu(!1),em(e=>({...e,image:t,subimage:void 0}));eX.width<=k.kJ&&tx(!1)},hideHint:!0})]})}let N=(0,d.Ay)(a.ur).withConfig({componentId:"sc-87e72c2a-0"})(["border-radius:3px;"]),W=d.Ay.div.withConfig({componentId:"sc-87e72c2a-1"})(["position:relative;flex:0 0 auto;display:flex;flex-direction:column;justify-content:flex-start;border:1px solid ",";margin:0 15px 15px 15px;max-width:880px;align-self:center;width:calc(100% - 30px);background-color:",";border-radius:3px;"],e=>e.theme.colors.bg3,e=>e.theme.colors.bg2),q=d.Ay.div.withConfig({componentId:"sc-87e72c2a-2"})(["flex:0 0 auto;position:relative;max-width:600px;width:calc(100% - 20px);margin:0 10px 0 10px;display:flex;flex-direction:column;justify-content:flex-start;border-bottom:none;align-self:center;border-radius:3px;overflow:visible;margin-top:20px;"]),U=d.Ay.div.withConfig({componentId:"sc-87e72c2a-3"})(["display:flex;flex-direction:row;justify-content:flex-start;gap:5px;"]),V=d.Ay.div.withConfig({componentId:"sc-87e72c2a-4"})(["padding:15px;"]),X=d.Ay.div.withConfig({componentId:"sc-87e72c2a-5"})(["display:flex;flex-direction:row;justify-content:space-between;gap:10px;padding:3px;",""],e=>e.topBorder?`border-top: 1px dashed ${e.theme.colors.bg3};`:"border-top: none;"),G=d.Ay.div.withConfig({componentId:"sc-87e72c2a-6"})(["display:flex;align-items:center;justify-content:space-between;background-color:",";border-radius:3px;border:1px solid ",";margin-bottom:4px;",""],e=>e.theme.colors.bg2,e=>e.theme.colors.bg3,e=>e.topBorder&&(0,d.AH)(["border-top:1px dashed ",";border-top-left-radius:0;border-top-right-radius:0;"],e.theme.colors.bg3)),Y=d.Ay.div.withConfig({componentId:"sc-87e72c2a-7"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;gap:20px;flex:1 1 0;height:100%;margin-left:20px;margin-right:20px;margin-top:30px;margin-bottom:30px;@media (max-width:800px){margin-top:10px;margin-bottom:5px;margin-left:10px;margin-right:10px;}"]),J=d.Ay.div.withConfig({componentId:"sc-87e72c2a-8"})(["flex:1 1 0;display:flex;flex-direction:row;justify-content:space-between;position:relative;"]),Q=d.Ay.div.withConfig({componentId:"sc-87e72c2a-9"})(["position:relative;flex:0 0 110px;border-radius:3px;margin:0px 10px 0px 35px;> div{width:100%;position:absolute;max-height:100%;display:grid;grid-template-columns:autofit;align-items:flex-start;overflow-y:scroll;flex-direction:column-reverse;align-items:flex-start;gap:5px;overflow-x:auto;button{border-radius:3px;display:flex;align-items:center;justify-content:center;background-color:",";> img{width:100px;height:100px;object-fit:contain;}}}"],e=>e.theme.colors.bg0),Z=d.Ay.div.withConfig({componentId:"sc-87e72c2a-10"})(["height:44px;> div{position:relative;top:-56px;}img{width:100px;height:100px;object-fit:contain;}"]),K=d.Ay.div.withConfig({componentId:"sc-87e72c2a-11"})(["flex:1 1 0;position:relative;display:flex;align-items:center;flex-direction:column;background-color:",";border-radius:3px;border:1px solid ",";padding:20px;padding-bottom:70px;"],e=>e.theme.colors.bg0,e=>e.theme.colors.bg3),ee=d.Ay.div.withConfig({componentId:"sc-87e72c2a-12"})(["position:relative;height:100%;width:100%;> img{position:absolute;height:100%;width:100%;border-radius:3px;overflow:hidden;object-fit:contain;}"]),et=d.Ay.div.withConfig({componentId:"sc-87e72c2a-13"})(["min-height:40px;display:flex;flex-direction:row;gap:5px;margin:5px 0px 10px;align-items:flex-end;> button{}"]),ei=(0,d.Ay)(N).withConfig({componentId:"sc-87e72c2a-14"})(["background-color:",";border:1px solid ",";padding:5px 10px;border-radius:3px;display:flex;align-items:center;justify-content:center;"],e=>e.selected?e.theme.colors.bg3:e.theme.colors.bg1,e=>e.theme.colors.bg3),en=(0,d.Ay)(a.Dp).withConfig({componentId:"sc-87e72c2a-15"})(["border:1px solid ",";background-color:",";&:hover{background-color:",";}"],e=>e.selected?e.theme.colors.textHeadings:e.theme.colors.bg3,e=>e.selected?e.theme.colors.bg3:e.theme.colors.bg1,e=>e.theme.colors.bg2),es=(0,d.Ay)(en).withConfig({componentId:"sc-87e72c2a-16"})(["background-color:"," !important;"],e=>e.theme.colors.bg3);function eo(e){let[t,i]=(0,g.useState)(!1);return(0,n.jsxs)("div",{style:{position:"relative"},onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:[(0,n.jsx)(en,{selected:e.selected,onClick:()=>{e.onClick()},children:(0,n.jsx)("img",{alt:"input",src:e.image})}),t&&e.onDelete&&(0,n.jsx)(er,{style:{position:"absolute",top:2,padding:6,...e.deleteOnLeft?{left:2}:{right:2}},onClick:()=>{e.onDelete?.()},children:(0,n.jsx)(m.d7y,{style:{width:14,height:14}})})]})}let er=(0,d.Ay)(a.Dp).withConfig({componentId:"sc-87e72c2a-17"})(["background-color:",";border:1px solid ",";border-radius:3px;"],e=>e.theme.colors.bg3,e=>e.theme.colors.bg3),el=d.Ay.div.withConfig({componentId:"sc-87e72c2a-18"})(["transition:opacity 300ms cubic-bezier(0.22,1,0.36,1),transform 300ms cubic-bezier(0.22,1,0.36,1);position:absolute;gap:20px;display:grid;grid-template-columns:",";"],e=>e.columns?`repeat(${e.columns}, 1fr)`:"auto"),ea=d.Ay.div.withConfig({componentId:"sc-87e72c2a-19"})(["position:relative;display:flex;align-items:center;flex-direction:column;> img{height:100%;width:100%;border-radius:3px;overflow:hidden;}overflow:visible;> img{transition:transform 0.25s cubic-bezier(0.22,1,0.36,1);}",""],e=>e.solo?"":e.hover?"& > img:hover { transform: scale(1.02); }":"& > img:hover { cursor: pointer; transform: scale(0.99); }"),ed=(0,d.Ay)(a.ur).withConfig({componentId:"sc-87e72c2a-20"})(["background-color:",";color:",";> div{background-color:",";}padding:5px 10px;border-radius:3px;display:flex;align-items:center;justify-content:center;",""],e=>e.selected?e.theme.colors.bg3:"transparent",e=>e.selected?e.theme.colors.textHeadings:e.theme.colors.textMain,e=>e.selected?e.theme.colors.textHeadings:e.theme.colors.textMain,e=>e.selected?"":"opacity: 0.7;"),ec=d.Ay.div.withConfig({componentId:"sc-87e72c2a-21"})(["width:100%;background:",";border-radius:3px;overflow:hidden;height:4px;"],e=>e.theme.colors.bg1),eh=d.Ay.div.withConfig({componentId:"sc-87e72c2a-22"})(["background:",";height:100%;width:","%;"],e=>e.theme.colors.textHeadings,e=>e.width),eg=d.Ay.span.withConfig({componentId:"sc-87e72c2a-23"})(["color:",";"],e=>e.theme.colors.textHeadings);function ep(e){let{imageWidth:t,imageHeight:i,img:s,i:o,selectedImage:r,setSelectedImage:l}=e,a=(0,H.WE)(s.data[Math.min(r.variation,s.data.length-1)]);return(0,n.jsxs)(ea,{hover:!0,style:{width:t,height:i,cursor:"pointer"},children:[(0,n.jsx)("img",{src:a||j.Ec,alt:s.params.prompt,onClick:()=>{l(e=>({...e,subimage:o}))}}),s.isVariationOriginal&&(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,margin:"10px",display:"flex",gap:"10px"},children:(0,n.jsx)(C.MB,{onClick:()=>{l(e=>({...e,subimage:void 0}))},children:(0,n.jsx)("div",{children:"ORIGINAL"})})})]},o)}}}]);