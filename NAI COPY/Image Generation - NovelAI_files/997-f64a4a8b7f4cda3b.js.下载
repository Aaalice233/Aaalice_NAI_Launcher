!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e9412a3d-7e82-4f48-a34c-f6f06b13a4d2",e._sentryDebugIdIdentifier="sentry-dbid-e9412a3d-7e82-4f48-a34c-f6f06b13a4d2")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{300:(e,t,s)=>{s.d(t,{i:()=>l});var i=s(94458),a=s(55805);let d=a.Ay.span.withConfig({componentId:"sc-e7846b78-0"})([""]),n=a.Ay.span.withConfig({componentId:"sc-e7846b78-1"})(["background:",";"],e=>e.theme.colors.textHighlight);function l(e){let t;if(e.highlight&&e.highlight.length>0){let s=[];for(let t of(e.highlight[0].start>0&&s.push(e.text.slice(0,e.highlight[0].start)),e.highlight))s.push((0,i.jsx)(n,{children:e.text.slice(t.start,t.end)},s.length)),t.end!==t.next&&s.push(e.text.slice(t.end,t.next));t=(0,i.jsx)(d,{children:s.map(e=>e)})}else t=(0,i.jsx)(d,{children:e.text});return t}},30769:(e,t,s)=>{s.d(t,{R:()=>c,u:()=>o});var i=s(68658),a=s(35143),d=s(80343),n=s(79630),l=s(97223),r=s(2834);function o(){let[e,t]=(0,i.useState)({id:"",loaded:!1,modified:!1}),s=(0,r.md)(l.kt),o=(0,r.md)(l.yM),c=(0,r.md)(l.QO),h=(0,r.md)(l.zr);(0,i.useEffect)(()=>{if(!s)return void t({id:"",loaded:!1,modified:!1});let e=n.C.storyContentCache.get(s),i=n.C.stories.get(s);t({id:s,loaded:o,modified:c,story:e,meta:i,error:h})},[h,s,o,c]);let u=(0,i.useCallback)(e=>{e.type===a.kD.load&&t({id:e.meta.id,loaded:!0,modified:e.meta.isModified,story:e.story,meta:e.meta,error:""})},[]);return(0,i.useEffect)(()=>{let e=d.B.listenQueueing(a.cH.match,e=>{u(e.payload)});return()=>e.unsubscribe()},[u]),e}function c(){let[e,t]=(0,i.useState)({id:"",loaded:!1,modified:!1}),s=(0,r.md)(l.kt),o=(0,r.md)((0,l.nU)(s)),c=(0,r.md)(l.QO),h=(0,r.md)(l.zr);(0,i.useEffect)(()=>{if(!s)return void t({id:"",loaded:!1,modified:!1});if(!o.selected||o.id!==s)return;let e=n.C.storyContentCache.get(s),i=n.C.stories.get(s);t({id:s,loaded:o.loaded||!1,modified:c,update:o.update,story:e,meta:i,error:h})},[h,s,c,o]);let u=(0,i.useCallback)(e=>{e.type===a.kD.load&&t({id:e.meta.id,loaded:!0,modified:e.meta.isModified,story:e.story,meta:e.meta,error:""})},[]);return(0,i.useEffect)(()=>{let e=d.B.listenQueueing(a.cH.match,e=>{u(e.payload)});return()=>e.unsubscribe()},[u]),e}},51703:(e,t,s)=>{s.d(t,{G:()=>l});var i=s(2834),a=s(97223),d=s(32139),n=s(68658);function l(){let e=(0,i.md)(a.Nn),t=(0,n.useMemo)(()=>(0,d.pE)(e),[e]);return(0,n.useMemo)(()=>t,[t])}},92482:(e,t,s)=>{s.d(t,{$6:()=>o,p$:()=>c});var i=s(79630);class a{constructor(){this.input="",this.includes=[],this.excludes=[],this.metadataMatches=new Map,this.scenarioGroupMatches=new Map,this.moduleMatches=new Map}}class d{constructor(e,t,s){this.start=e,this.end=t,this.next=s}}class n{constructor(e){this.type=0,this.title=[],this.description=[],this.textPreview=[],this.tags=new Map,this.elementType="story",this.metadata=e,this.lastUpdatedAt=e?.lastUpdatedAt}}class l{constructor(e){this.type=0,this.name=[],this.names=[],this.author=[],this.description=[],this.tags=new Map,this.group=e}}class r{constructor(e){this.type=0,this.name=[],this.description=[],this.module=e}}class o{addEntry(e){let t=new a,s=new Set,i=new Set,d=e,n=[...d.matchAll(/".*?"/g)],l=n.length-1;for(;l>=0;){let e=n[l][0];d=d.replace(`/${e}/g`,e.replace(/ /g,"<|>")),l--}let r=(d=d.replace(/"/g,"")).toLowerCase().split(" ").filter(e=>e.length>0);for(let e of r)e.startsWith("-")&&!r.includes(e.slice(1))?e.length>1&&i.add(e.slice(1).replace(/<|>/g," ")):s.add(e.replace(/<|>/g," "));return t.input=e,t.excludes=[...i],t.includes=[...s],this.cache.set(e,t),t}getEntry(e){let t=this.cache.get(e);return void 0===t?this.addEntry(e):t}matchString(e,t){e=e.toLowerCase();let s=[];for(let i of t){let t=e.indexOf(i);if(-1!==t){let e=i.length+t;s.push([t,e]),this.matchedIncludes.add(i)}}if(0===s.length)return[];s.sort((e,t)=>e[0]-t[0]);let i=[];i.push(new d(s[0][0],s[0][1],e.length));let a=i[0];for(let t of s.slice(1))if(a.end<t[0]){let s=new d(t[0],t[1],e.length);i.push(s),a.next=s.start,a=s}else a.end=Math.max(a.end,t[1]);return i}scenarioGroupMatch(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(0===i)return[];let a=this.getEntry(t),d=[];for(let t of(0===s.length&&(a.includes.length>0?s.push(1):s.push(0)),e)){let e=a.scenarioGroupMatches.get(t);if(void 0===e){e=new l(t),a.scenarioGroupMatches.set(t,e);let s=[];for(let e of t.scenarios)s=[...s,...e.tags];let i=[...new Set(s)];for(let s of a.excludes)if(t.name.toLowerCase().includes(s)){e.type=2;break}else if(t.names.join(" ").toLowerCase().includes(s)){e.type=2;break}else if(t.scenarios[0].author.toLowerCase().includes(s)){e.type=2;break}else if(t.scenarios[0].description.toLowerCase().includes(s)){e.type=2;break}else if(i.join(" ").toLowerCase().includes(s)){e.type=2;break}if(0===e.type&&a.includes.length>0){for(let s of(e.name=this.matchString(t.name,a.includes),e.names=this.matchString(t.names.join(" | "),a.includes),e.author=this.matchString(t.scenarios[0].author,a.includes),e.description=this.matchString(t.scenarios[0].description,a.includes),i)){let t=this.matchString(s,a.includes);t.length>0&&e.tags.set(s,t)}this.matchedIncludes.size===a.includes.length&&(e.type=1)}}if(this.matchedIncludes.clear(),s.includes(e.type)&&(d.push(e),d.length===i))break}return d}moduleMatch(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(0===i)return[];let a=this.getEntry(t),d=[];for(let t of(0===s.length&&(a.includes.length>0?s.push(1):s.push(0)),e)){let e=a.moduleMatches.get(t);if(void 0===e){for(let s of(e=new r(t),a.moduleMatches.set(t,e),a.excludes))if(t.name.toLowerCase().includes(s)){e.type=2;break}else if(t.description.toLowerCase().includes(s)){e.type=2;break}0===e.type&&a.includes.length>0&&(e.name=this.matchString(t.name,a.includes),e.description=this.matchString(t.description,a.includes),this.matchedIncludes.size===a.includes.length&&(e.type=1))}if(this.matchedIncludes.clear(),s.includes(e.type)&&(d.push(e),d.length===i))break}return d}metadataMatch(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(0===s)return[];let d=this.getEntry(t),l=[];for(let r of(0===a.length&&(d.includes.length>0?a.push(1):a.push(0)),e))if("shelf"===r.type)if(t){let e=i.C.shelves.get(r.id);if(void 0!==e){let s=this.metadataMatch(e.children??[],t);for(let t of s)t.parent=t.parent||e;l.push(...s)}}else{let e=i.C.shelves.get(r.id);if(void 0!==e){let t=new n(e);t.elementType="shelf",l.push(t)}}else if("story"===r.type){let e=i.C.stories.get(r.id);if(void 0!==e){let t=d.metadataMatches.get(e.id);if(void 0===t||t.lastUpdatedAt!==e.lastUpdatedAt){for(let s of(t=new n(e),d.metadataMatches.set(e.id,t),d.excludes))if(e.title.toLowerCase().includes(s)){t.type=2;break}else if(e.description.toLowerCase().includes(s)){t.type=2;break}else if(e.textPreview.toLowerCase().includes(s)){t.type=2;break}else if(e.tags.join(" ").toLowerCase().includes(s)){t.type=2;break}if(0===t.type&&d.includes.length>0){for(let s of(t.title=this.matchString(e.title,d.includes),t.description=this.matchString(e.description,d.includes),t.textPreview=this.matchString(e.textPreview,d.includes),e.tags)){let e=this.matchString(s,d.includes);e.length>0&&t.tags.set(s,e)}this.matchedIncludes.size===d.includes.length&&(t.type=1)}}if(this.matchedIncludes.clear(),a.includes(t.type)&&(l.push(t),l.length===s))break}}return l}constructor(){this.cache=new Map,this.matchedIncludes=new Set}}function c(e,t){switch(t.value){case"recent":t.reverse?e.sort((e,t)=>e.metadata&&t.metadata?e.metadata.lastUpdatedAt.getTime()-t.metadata.lastUpdatedAt.getTime():0):e.sort((e,t)=>e.metadata&&t.metadata?t.metadata.lastUpdatedAt.getTime()-e.metadata.lastUpdatedAt.getTime():0);break;case"alphabetical":t.reverse?e.sort((e,t)=>e.metadata&&t.metadata?t.metadata.title.localeCompare(e.metadata.title):0):e.sort((e,t)=>e.metadata&&t.metadata?e.metadata.title.localeCompare(t.metadata.title):0);break;case"creation":t.reverse?e.sort((e,t)=>e.metadata&&t.metadata?e.metadata.createdAt.getTime()-t.metadata.createdAt.getTime():0):e.sort((e,t)=>e.metadata&&t.metadata?t.metadata.createdAt.getTime()-e.metadata.createdAt.getTime():0)}}}}]);