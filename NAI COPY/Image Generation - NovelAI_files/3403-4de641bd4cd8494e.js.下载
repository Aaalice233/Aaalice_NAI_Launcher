!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="128b0d08-9f04-403f-a6ef-b45efe6732ef",e._sentryDebugIdIdentifier="sentry-dbid-128b0d08-9f04-403f-a6ef-b45efe6732ef")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3403],{1638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return u},noSSR:function(){return a}});let r=n(51532);n(94458),n(68658);let i=r._(n(8417));function o(e){return{default:(null==e?void 0:e.default)||e}}function a(e,t){return delete t.webpack,delete t.modules,e(t)}function u(e,t){let n=i.default,r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let u=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?n({...r,loader:()=>null!=u?u().then(o):Promise.resolve(o(()=>null))}):(delete r.webpack,delete r.modules,a(n,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let r=n(51532)._(n(68658)),i=n(80155),o=[],a=[],u=!1;function l(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}class s{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function f(e){return function(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),o=null;function l(){if(!o){let t=new s(e,n);o={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return o.promise()}if(!u){let e=n.webpack&&1?n.webpack():n.modules;e&&a.push(t=>{for(let n of e)if(t.includes(n))return l()})}function f(e,t){l();let a=r.default.useContext(i.LoadableContext);a&&Array.isArray(n.modules)&&n.modules.forEach(e=>{a(e)});let u=r.default.useSyncExternalStore(o.subscribe,o.getCurrentValue,o.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:o.retry}),[]),r.default.useMemo(()=>{var t;return u.loading||u.error?r.default.createElement(n.loading,{isLoading:u.loading,pastDelay:u.pastDelay,timedOut:u.timedOut,error:u.error,retry:o.retry}):u.loaded?r.default.createElement((t=u.loaded)&&t.default?t.default:t,e):null},[e,u])}return f.preload=()=>l(),f.displayName="LoadableComponent",r.default.forwardRef(f)}(l,e)}function d(e,t){let n=[];for(;e.length;){let r=e.pop();n.push(r(t))}return Promise.all(n).then(()=>{if(e.length)return d(e,t)})}f.preloadAll=()=>new Promise((e,t)=>{d(o).then(e,t)}),f.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let n=()=>(u=!0,t());d(a,e).then(n,n)})),window.__NEXT_PRELOADREADY=f.preloadReady;let c=f},12764:(e,t,n)=>{e.exports=n(1638)},80155:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=n(51532)._(n(68658)).default.createContext(null)},94260:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>tV});class r{constructor(e){if(function(e){return"object"!=typeof e||void 0===e.length||void 0===e.readUInt8||void 0===e.readUInt16LE||void 0===e.readUInt16BE||void 0===e.readUInt32LE||void 0===e.readUInt32BE||void 0===e.readInt32LE||void 0===e.readInt32BE}(e))throw Error("DataView: Passed buffer type is unsupported.");this.buffer=e,this.byteLength=this.buffer.length}getUint8(e){return this.buffer.readUInt8(e)}getUint16(e,t){return t?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}getUint32(e,t){return t?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}getInt32(e,t){return t?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}}var i=n(89441).Buffer;function o(e,t,n){try{return new DataView(e,t,n)}catch(i){return new r(e,t,n)}}function a(e,t,n){let r=[];for(let i=0;i<n&&t+i<e.byteLength;i++)r.push(e.getUint8(t+i));return s(r)}function u(e,t){let n=[],r=0;for(;t+r<e.byteLength;){let i=e.getUint8(t+r);if(0===i)break;n.push(i),r++}return s(n)}function l(e,t){let n=e.getUint8(t),r=a(e,t+1,n);return[n,r]}function s(e){return e.map(e=>String.fromCharCode(e)).join("")}function f(){for(let e=1;e<arguments.length;e++)for(let t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function d(e,t,n){let r=!1;Object.defineProperty(e,t,{get:()=>(r||(r=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n.apply(e),writable:!0})),e[t]),configurable:!0,enumerable:!0})}function c(e){return"undefined"!=typeof btoa?"string"==typeof e?btoa(e):btoa(Array.prototype.reduce.call(new Uint8Array(e),(e,t)=>e+String.fromCharCode(t),"")):void 0!==i?void 0!==i.from?i.from(e).toString("base64"):new i(e).toString("base64"):void 0}function p(e,t){return Array(t+1).join(e)}let m=void 0;function g(e,t,n,r="string"){if(0===t&&"function"==typeof DecompressionStream){let t=new DecompressionStream("deflate"),i=new Blob([e]).stream().pipeThrough(t);return"dataview"===r?new Response(i).arrayBuffer().then(e=>new DataView(e)):new Response(i).arrayBuffer().then(e=>new TextDecoder(n).decode(e))}return void 0!==t?Promise.reject(`Unknown compression method ${t}.`):e}let h={USE_FILE:!0,USE_JFIF:!0,USE_PNG_FILE:!0,USE_EXIF:!0,USE_IPTC:!0,USE_XMP:!0,USE_ICC:!0,USE_MPF:!0,USE_PHOTOSHOP:!0,USE_THUMBNAIL:!0,USE_TIFF:!0,USE_JPEG:!0,USE_PNG:!0,USE_HEIC:!0,USE_AVIF:!0,USE_WEBP:!0,USE_GIF:!0,USE_MAKER_NOTES:!0};function S(e){return e.map(e=>String.fromCharCode(e)).join("")}function I(e){if(e.length>=8){let t=S(e.slice(0,8));if("ASCII\0\0\0"===t)return S(e.slice(8));if("JIS\0\0\0\0\0"===t)return"[JIS encoded text]";if("UNICODE\0"===t)return"[Unicode encoded text]";else if("\0\0\0\0\0\0\0\0"===t)return"[Undefined encoding]"}return"Undefined"}function y(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}let b={LITTLE_ENDIAN:18761,getByteOrder:function(e,t){if(18761===e.getUint16(t))return 18761;if(19789===e.getUint16(t))return 19789;throw Error("Illegal byte order value. Faulty image.")}},C={isTiffFile:function(e){return!!e&&e.byteLength>=4&&function(e){let t=e.getUint16(0)===b.LITTLE_ENDIAN;return 42===e.getUint16(2,t)}(e)},findTiffOffsets:function(){return h.USE_EXIF?{hasAppMarkers:!0,tiffHeaderOffset:0}:{}}},U={isJpegFile:function(e){return!!e&&e.byteLength>=2&&65496===e.getUint16(0)},findJpegOffsets:function(e){let t,n,r,i,o,u,l,s,f,d=2;for(;d+4+5<=e.byteLength;){var c,p,m,g,S,I;if(h.USE_FILE&&(c=e,p=d,65472===c.getUint16(p)))t=e.getUint16(d+2),n=d+2;else{if(h.USE_FILE&&(m=e,g=d,65474===m.getUint16(g)))t=e.getUint16(d+2),r=d+2;else if(h.USE_JFIF&&function(e,t){let n=x.length;return 65504===e.getUint16(t)&&a(e,t+4,n)===x&&0===e.getUint8(t+4+n)}(e,d))t=e.getUint16(d+2),i=d+2;else if(h.USE_EXIF&&function(e,t){let n=T.length;return 65505===e.getUint16(t)&&a(e,t+4,n)===T&&0===e.getUint8(t+4+n)}(e,d))t=e.getUint16(d+2),o=d+10;else if(h.USE_XMP&&function(e,t){return 65505===e.getUint16(t)&&a(e,t+4,_.length)===_}(e,d))l||(l=[]),t=e.getUint16(d+2),l.push({dataOffset:d+33,length:t-31});else if(h.USE_XMP&&function(e,t){return 65505===e.getUint16(t)&&a(e,t+4,w.length)===w}(e,d))l||(l=[]),t=e.getUint16(d+2),l.push({dataOffset:d+79,length:t-77});else if(h.USE_IPTC&&function(e,t){let n=F.length;return 65517===e.getUint16(t)&&a(e,t+4,n)===F&&0===e.getUint8(t+4+n)}(e,d))t=e.getUint16(d+2),u=d+18;else if(h.USE_ICC&&function(e,t){let n=E.length;return 65506===e.getUint16(t)&&a(e,t+4,n)===E}(e,d)){t=e.getUint16(d+2);let n=d+18,r=t-16,i=e.getUint8(d+v),o=e.getUint8(d+P);s||(s=[]),s.push({offset:n,length:r,chunkNumber:i,chunksTotal:o})}else if(h.USE_MPF&&function(e,t){let n=A.length;return 65506===e.getUint16(t)&&a(e,t+4,n)===A}(e,d))t=e.getUint16(d+2),f=d+8;else if(function(e,t){let n=e.getUint16(t);return n>=65504&&n<=65519||65534===n||65472===n||65474===n||65476===n||65499===n||65501===n||65498===n}(e,d))t=e.getUint16(d+2);else{if(S=e,I=d,65535===S.getUint16(I)){d++;continue}else break}}d+=2+t}return{hasAppMarkers:d>2,fileDataOffset:n||r,jfifDataOffset:i,tiffHeaderOffset:o,iptcDataOffset:u,xmpChunks:l,iccChunks:s,mpfDataOffset:f}}},E="ICC_PROFILE\0",v=4+E.length,P=v+1,A="MPF\0",x="JFIF",T="Exif",_="http://ns.adobe.com/xap/1.0/\0",w="http://ns.adobe.com/xmp/extension/\0",F="Photoshop 3.0",L={isPngFile:function(e){return!!e&&a(e,0,M.length)===M},findPngOffsets:function(e,t){let n={hasAppMarkers:!1},r=M.length;for(;r+4+4<=e.byteLength;){if(h.USE_PNG_FILE&&"IHDR"===a(e,r+4,4))n.hasAppMarkers=!0,n.pngHeaderOffset=r+N;else{var i,o;if(h.USE_XMP&&a(i=e,(o=r)+4,4)===D&&a(i,o+N,O.length)===O){let t=function(e,t){t+=N+O.length+1+1;let n=0;for(;n<2&&t<e.byteLength;)0===e.getUint8(t)&&n++,t++;if(!(n<2))return t}(e,r);void 0!==t&&(n.hasAppMarkers=!0,n.xmpChunks=[{dataOffset:t,length:e.getUint32(r+0)-(t-(r+N))}])}else if(function(e,t,n){let r=a(e,t+4,4);return r===R||r===D||r===k&&n}(e,r,t)){n.hasAppMarkers=!0;let t=a(e,r+4,4);n.pngTextChunks||(n.pngTextChunks=[]),n.pngTextChunks.push({length:e.getUint32(r+0),type:t,offset:r+N})}else if("eXIf"===a(e,r+4,4))n.hasAppMarkers=!0,n.tiffHeaderOffset=r+N;else if(h.USE_ICC&&t&&"iCCP"===a(e,r+4,4)){n.hasAppMarkers=!0;let t=e.getUint32(r+0),i=r+N,{profileName:o,compressionMethod:a,compressedProfileOffset:l}=function(e,t){let n=u(e,t);return t+=n.length+1,{profileName:n,compressionMethod:e.getUint8(t),compressedProfileOffset:t+=1}}(e,i);n.iccChunks||(n.iccChunks=[]),n.iccChunks.push({offset:l,length:t-(l-i),chunkNumber:1,chunksTotal:1,profileName:o,compressionMethod:a})}else[B,G].includes(a(e,r+4,4))&&(n.hasAppMarkers=!0,n.pngChunkOffsets||(n.pngChunkOffsets=[]),n.pngChunkOffsets.push(r+0))}r+=e.getUint32(r+0)+4+4+4}return n}},M="\x89PNG\r\n\x1a\n",N=8,O="XML:com.adobe.xmp\0",R="tEXt",D="iTXt",k="zTXt",B="pHYs",G="tIME";function H(e,t,n){if(4===n)return e.getUint32(t);if(8===n)return console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),e.getUint32(t+4);return 0}function j(e,t){var n,r,i,o,l,s,f,d,c,p,m,g,h,S,I,y,b,C;let{length:U,contentOffset:E}=function(e,t){var n,r;let i=e.getUint32(t);return 0===i?{length:e.byteLength-t,contentOffset:t+4+4}:1===i&&(n=e,r=t,0===n.getUint32(r+8))?{length:e.getUint32(t+12),contentOffset:t+4+4+8}:{length:i,contentOffset:t+4+4}}(e,t);if(U<8)return;let v=e.getUint32(t+4);if(0x66747970===v){return n=e,r=E,i=U,{type:"ftyp",majorBrand:a(n,r,4),length:i}}if(0x69707270===v){return o=e,l=t,{type:"iprp",subBoxes:V(o,s=E,(f=U)-(s-l)),length:f}}if(0x6970636f===v){return d=e,c=t,{type:"ipco",properties:V(d,p=E,(m=U)-(p-c)),length:m}}if(0x636f6c72===v){return g=e,h=E,S=U,{type:"colr",icc:function(e,t){let n=a(e,t,4);if("prof"===n||"rICC"===n)return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}}(g,h),length:S}}let P=e.getUint8(E);return 0x6d657461===v?(I=e,y=t,{type:"meta",subBoxes:V(I,(b=E+1)+3,(C=U)-(b+3-y)),length:C}):0x696c6f63===v?function(e,t,n,r){var i,o,a;let{offsets:u,sizes:l}=function(e,t){let n={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};e<2?(n.itemCount=2,n.item.itemId=2):2===e&&(n.itemCount=4,n.item.itemId=4),1===e||2===e?n.item.constructionMethod=2:n.item.constructionMethod=0;let r={offsetSize:t,lengthSize:t,baseOffsetSize:t+1,indexSize:t+1};return r.itemCount=t+2,r.items=r.itemCount+n.itemCount,r.item={itemId:0},r.item.constructionMethod=r.item.itemId+n.item.itemId,r.item.dataReferenceIndex=r.item.constructionMethod+n.item.constructionMethod,{offsets:r,sizes:n}}(t,n+3),s=e.getUint8(u.offsetSize)>>4;l.item.extent.extentOffset=s;let f=15&e.getUint8(u.lengthSize);l.item.extent.extentLength=f;let d=e.getUint8(u.baseOffsetSize)>>4;l.item.baseOffset=d;let c=function(e,t,n){if(1===n||2===n)return 15&e.getUint8(t)}(e,u.indexSize,t);l.item.extent.extentIndex=void 0!==c?c:0;let p=(i=e,o=u.itemCount,(a=t)<2?i.getUint16(o):2===a?i.getUint32(o):void 0);return{type:"iloc",items:function(e,t,n,r,i,o,a,u){if(void 0===u)return[];let l=[],s=n.items;for(let n=0;n<u;n++){var f,d,c;let n={extents:[]};f=e,d=s,n.itemId=(c=t)<2?f.getUint16(d):2===c?f.getUint32(d):void 0,s+=r.item.itemId,n.constructionMethod=1===t||2===t?15&e.getUint16(s):void 0,s+=r.item.constructionMethod,n.dataReferenceIndex=e.getUint16(s),n.baseOffset=H(e,s+=r.item.dataReferenceIndex,r.item.baseOffset),s+=r.item.baseOffset,n.extentCount=e.getUint16(s),s+=r.item.extentCount;for(let u=0;u<n.extentCount;u++){let u={};u.extentIndex=function(e,t,n,r){if((1===t||2===t)&&r>0)return H(e,n,r)}(e,t,s,a),u.extentOffset=H(e,s+=r.item.extent.extentIndex,i),u.extentLength=H(e,s+=r.item.extent.extentOffset,o),s+=r.item.extent.extentLength,n.extents.push(u)}l.push(n)}return l}(e,t,u,l,s,f,c,p),length:r}}(e,P,E+1,U):0x69696e66===v?function(e,t,n,r,i){let{offsets:o}=function(e,t){let n={entryCount:t+3},r={};return 0===e?r.entryCount=2:r.entryCount=4,n.itemInfos=n.entryCount+r.entryCount,{offsets:n}}(n,r);return{type:"iinf",itemInfos:V(e,o.itemInfos,i-(o.itemInfos-t)),length:i}}(e,t,P,E+1,U):0x696e6665===v?function(e,t,n,r,i){r+=3;let o={type:"infe",length:i};return(0===n||1===n)&&(o.itemId=e.getUint16(r),r+=2,o.itemProtectionIndex=e.getUint16(r),o.itemName=u(e,r+=2),r+=o.itemName.length+1),n>=2&&(2===n?(o.itemId=e.getUint16(r),r+=2):3===n&&(o.itemId=e.getUint32(r),r+=4),o.itemProtectionIndex=e.getUint16(r),r+=2,o.itemType=e.getUint32(r),o.itemName=u(e,r+=4),r+=o.itemName.length+1,0x6d696d65===o.itemType?(o.contentType=u(e,r),t+i>(r+=o.contentType.length+1)&&(o.contentEncoding=u(e,r),r+=o.contentEncoding.length+1)):0x75726920===o.itemType&&(o.itemUri=u(e,r),r+=o.itemUri.length+1)),o}(e,t,P,E+1,U):{type:void 0,length:U}}function $(e){if(h.USE_EXIF||h.USE_XMP||h.USE_ICC){let t={},n=function(e){let t=0;for(;t+4+4<=e.byteLength;){let n=j(e,t);if(void 0===n)break;if("meta"===n.type)return n;t+=n.length}}(e);return n?(h.USE_EXIF&&(t.tiffHeaderOffset=function(e,t){try{var n,r;let i=t.subBoxes.find(e=>"iinf"===e.type).itemInfos.find(e=>0x45786966===e.itemType).itemId,o=z(t,i),a=o.baseOffset+o.extents[0].extentOffset;return n=e,(r=a)+4+n.getUint32(r)}catch(e){return}}(e,n)),h.USE_XMP&&(t.xmpChunks=function(e){try{let t=e.subBoxes.find(e=>"iinf"===e.type).itemInfos.find(e=>0x6d696d65===e.itemType&&"application/rdf+xml"===e.contentType).itemId,n=z(e,t),r=z(e,t).extents[0];return[{dataOffset:n.baseOffset+r.extentOffset,length:r.extentLength}]}catch(e){return}}(n)),h.USE_ICC&&(t.iccChunks=function(e){try{let t=e.subBoxes.find(e=>"iprp"===e.type).subBoxes.find(e=>"ipco"===e.type).properties.find(e=>"colr"===e.type).icc;if(t)return[t]}catch(e){}}(n)),t.hasAppMarkers=void 0!==t.tiffHeaderOffset||void 0!==t.xmpChunks||void 0!==t.iccChunks,t):{hasAppMarkers:!1}}return{}}function z(e,t){return e.subBoxes.find(e=>"iloc"===e.type).items.find(e=>e.itemId===t)}function V(e,t,n){let r=[0x45786966,0x6d696d65],i=[],o=t;for(;o<t+n;){let t=j(e,o);if(void 0===t)break;void 0!==t.type&&(void 0===t.itemType||-1!==r.indexOf(t.itemType))&&i.push(t),o+=t.length}return i}let W={isHeicFile:function(e){if(!e)return!1;try{let t=j(e,0);return t&&-1!==["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"].indexOf(t.majorBrand)}catch(e){return!1}},findHeicOffsets:function(e){return $(e)}},X={isAvifFile:function(e){if(!e)return!1;try{let t=j(e,0);return t&&"avif"===t.majorBrand}catch(e){return!1}},findAvifOffsets:function(e){return $(e)}},J={isWebpFile:function(e){let t="RIFF",n="WEBP";return!!e&&a(e,0,t.length)===t&&a(e,8,n.length)===n},findOffsets:function(e){let t,n,r,i,o="Exif\0\0",u=12,l=!1;for(;u+8<e.byteLength;){let s=a(e,u,4),f=e.getUint32(u+4,!0);h.USE_EXIF&&"EXIF"===s?(l=!0,t=a(e,u+8,o.length)===o?u+8+o.length:u+8):h.USE_XMP&&"XMP "===s?(l=!0,n=[{dataOffset:u+8,length:f}]):h.USE_ICC&&"ICCP"===s?(l=!0,r=[{offset:u+8,length:f,chunkNumber:1,chunksTotal:1}]):"VP8X"===s&&(l=!0,i=u+8),u+=8+(f%2==0?f:f+1)}return{hasAppMarkers:l,tiffHeaderOffset:t,xmpChunks:n,iccChunks:r,vp8xChunkOffset:i}}},K={isGifFile:function(e){return!!e&&Y.includes(a(e,0,6))},findOffsets:function(){return{gifHeaderOffset:0}}},Y=["GIF87a","GIF89a"],q={isXMLFile:function(e){return!!e&&a(e,0,Z.length)===Z},findOffsets:function(e){let t=[];return t.push({dataOffset:0,length:e.byteLength}),{xmpChunks:t}}},Z="<?xpacket begin",Q={parseAppMarkers:function(e,t){if(h.USE_TIFF&&C.isTiffFile(e))return ee(C.findTiffOffsets(),"tiff","TIFF");if(h.USE_JPEG&&U.isJpegFile(e))return ee(U.findJpegOffsets(e),"jpeg","JPEG");if(h.USE_PNG&&L.isPngFile(e))return ee(L.findPngOffsets(e,t),"png","PNG");if(h.USE_HEIC&&W.isHeicFile(e))return ee(W.findHeicOffsets(e),"heic","HEIC");if(h.USE_AVIF&&X.isAvifFile(e))return ee(X.findAvifOffsets(e),"avif","AVIF");if(h.USE_WEBP&&J.isWebpFile(e))return ee(J.findOffsets(e),"webp","WebP");if(h.USE_GIF&&K.isGifFile(e))return ee(K.findOffsets(e),"gif","GIF");if(h.USE_XMP&&q.isXMLFile(e))return ee(q.findOffsets(e),"xml","XML");throw Error("Invalid image format")}};function ee(e,t,n){return f({},e,{fileType:{value:t,description:n}})}let et={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace:e=>1===e?"sRGB":65535===e?"Uncalibrated":"Unknown",ComponentsConfiguration:e=>e.map(e=>{if(49===e)return"Y";if(50===e)return"Cb";if(51===e)return"Cr";if(52===e)return"R";if(53===e)return"G";else if(54===e)return"B"}).join(""),Contrast:e=>0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown",CustomRendered:e=>0===e?"Normal process":1===e?"Custom process":"Unknown",ExposureMode:e=>0===e?"Auto exposure":1===e?"Manual exposure":2===e?"Auto bracket":"Unknown",ExposureProgram(e){if(0===e)return"Undefined";if(1===e)return"Manual";if(2===e)return"Normal program";if(3===e)return"Aperture priority";if(4===e)return"Shutter priority";else if(5===e)return"Creative program";else if(6===e)return"Action program";else if(7===e)return"Portrait mode";else if(8===e)return"Landscape mode";else if(9===e)return"Bulb";return"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){let t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return 0!==e[0]?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${Number(e[0]/e[1]).toFixed(1)}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit:e=>2===e?"inches":3===e?"centimeters":4===e?"millimeters":"Unknown",LightSource:e=>{if(1===e)return"Daylight";if(2===e)return"Fluorescent";if(3===e)return"Tungsten (incandescent light)";if(4===e)return"Flash";if(9===e)return"Fine weather";else if(10===e)return"Cloudy weather";else if(11===e)return"Shade";else if(12===e)return"Daylight fluorescent (D 5700 – 7100K)";else if(13===e)return"Day white fluorescent (N 4600 – 5400K)";else if(14===e)return"Cool white fluorescent (W 3900 – 4500K)";else if(15===e)return"White fluorescent (WW 3200 – 3700K)";else if(17===e)return"Standard light A";else if(18===e)return"Standard light B";else if(19===e)return"Standard light C";else if(20===e)return"D55";else if(21===e)return"D65";else if(22===e)return"D75";else if(23===e)return"D50";else if(24===e)return"ISO studio tungsten";else if(255===e)return"Other light source";return"Unknown"},MeteringMode(e){if(1===e)return"Average";if(2===e)return"CenterWeightedAverage";if(3===e)return"Spot";if(4===e)return"MultiSpot";if(5===e)return"Pattern";else if(6===e)return"Partial";else if(255===e)return"Other";return"Unknown"},ResolutionUnit:e=>2===e?"inches":3===e?"centimeters":"Unknown",Saturation:e=>0===e?"Normal":1===e?"Low saturation":2===e?"High saturation":"Unknown",FocalLengthIn35mmFilm:e=>0===e?"Unknown":e+" mm",SceneCaptureType:e=>0===e?"Standard":1===e?"Landscape":2===e?"Portrait":3===e?"Night scene":"Unknown",Sharpness:e=>0===e?"Normal":1===e?"Soft":2===e?"Hard":"Unknown",ShutterSpeedValue(e){let t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance:e=>0===e?"Auto white balance":1===e?"Manual white balance":"Unknown",XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},en={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",0xffffffff:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>1===e?"top-left":2===e?"top-right":3===e?"bottom-right":4===e?"bottom-left":5===e?"left-top":6===e?"right-top":7===e?"right-bottom":8===e?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:et.XResolution},283:{name:"YResolution",description:et.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:et.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(e=>`${e[0]}/${e[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(e=>`${e[0]}/${e[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{let t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(e=>t[e]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(e=>""+e[0]/e[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>1===e?"centered":2===e?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(e=>""+e[0]/e[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:er},40092:{name:"XPComment",description:er},40093:{name:"XPAuthor",description:er},40094:{name:"XPKeywords",description:er},40095:{name:"XPSubject",description:er},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:et.LightSource},50779:{name:"CalibrationIlluminant2",description:et.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function er(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}let ei=f({},en,{33434:{name:"ExposureTime",description:et.ExposureTime},33437:{name:"FNumber",description:et.FNumber},34850:{name:"ExposureProgram",description:et.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>S(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:et.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:et.ShutterSpeedValue},37378:{name:"ApertureValue",description:et.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:et.MeteringMode},37384:{name:"LightSource",description:et.LightSource},37385:{name:"Flash",description:e=>{if(0===e)return"Flash did not fire";if(1===e)return"Flash fired";if(5===e)return"Strobe return light not detected";if(7===e)return"Strobe return light detected";if(9===e)return"Flash fired, compulsory flash mode";else if(13===e)return"Flash fired, compulsory flash mode, return light not detected";else if(15===e)return"Flash fired, compulsory flash mode, return light detected";else if(16===e)return"Flash did not fire, compulsory flash mode";else if(24===e)return"Flash did not fire, auto mode";else if(25===e)return"Flash fired, auto mode";else if(29===e)return"Flash fired, auto mode, return light not detected";else if(31===e)return"Flash fired, auto mode, return light detected";else if(32===e)return"No flash function";else if(65===e)return"Flash fired, red-eye reduction mode";else if(69===e)return"Flash fired, red-eye reduction mode, return light not detected";else if(71===e)return"Flash fired, red-eye reduction mode, return light detected";else if(73===e)return"Flash fired, compulsory flash mode, red-eye reduction mode";else if(77===e)return"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected";else if(79===e)return"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected";else if(89===e)return"Flash fired, auto mode, red-eye reduction mode";else if(93===e)return"Flash fired, auto mode, return light not detected, red-eye reduction mode";else if(95===e)return"Flash fired, auto mode, return light detected, red-eye reduction mode";return"Unknown"}},37386:{name:"FocalLength",description:et.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>2===e.length?`Location; X: ${e[0]}, Y: ${e[1]}`:3===e.length?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:4===e.length?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:I},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" \xb0C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" \xb0"},40960:{name:"FlashpixVersion",description:e=>e.map(e=>String.fromCharCode(e)).join("")},40961:{name:"ColorSpace",description:et.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:et.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>{if(1===e)return"Undefined";if(2===e)return"One-chip color area sensor";if(3===e)return"Two-chip color area sensor";if(4===e)return"Three-chip color area sensor";if(5===e)return"Color sequential area sensor";else if(7===e)return"Trilinear sensor";else if(8===e)return"Color sequential linear sensor";return"Unknown"}},41728:{name:"FileSource",description:e=>3===e?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>1===e?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:et.CustomRendered},41986:{name:"ExposureMode",description:et.ExposureMode},41987:{name:"WhiteBalance",description:et.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>0===e[0]?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:et.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:et.SceneCaptureType},41991:{name:"GainControl",description:e=>{if(0===e)return"None";if(1===e)return"Low gain up";if(2===e)return"High gain up";if(3===e)return"Low gain down";if(4===e)return"High gain down";return"Unknown"}},41992:{name:"Contrast",description:et.Contrast},41993:{name:"Saturation",description:et.Saturation},41994:{name:"Sharpness",description:et.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>1===e?"Macro":2===e?"Close view":3===e?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{let t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),r=`${t}-${n} mm`;if(0===e[3][1])return`${r} f/?`;let i=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${r} f/${parseFloat(i.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"}),eo="exif",ea="interoperability",eu="canon",el="pentax",es={"0th":ei,"1st":en,[eo]:ei,gps:{0:{name:"GPSVersionID",description:e=>2===e[0]&&2===e[1]&&0===e[2]&&0===e[3]?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{let t=e.join("");return"N"===t?"North latitude":"S"===t?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:y},3:{name:"GPSLongitudeRef",description:e=>{let t=e.join("");return"E"===t?"East longitude":"W"===t?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:y},5:{name:"GPSAltitudeRef",description:e=>0===e?"Sea level":1===e?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([e,t])=>{let n=e/t;return/^\d(\.|$)/.test(`${n}`)?`0${n}`:n}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{let t=e.join("");return"A"===t?"Measurement in progress":"V"===t?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{let t=e.join("");return"2"===t?"2-dimensional measurement":"3"===t?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{let t=e.join("");return"K"===t?"Kilometers per hour":"M"===t?"Miles per hour":"N"===t?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{let t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{let t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{let t=e.join("");return"N"===t?"North latitude":"S"===t?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{let t=e.join("");return"E"===t?"East longitude":"W"===t?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{let t=e.join("");return"T"===t?"True direction":"M"===t?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{let t=e.join("");return"K"===t?"Kilometers":"M"===t?"Miles":"N"===t?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:I},28:{name:"GPSAreaInformation",description:I},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>0===e?"Measurement without differential correction":1===e?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},[ea]:{1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>S(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},mpf:h.USE_MPF?{45056:{name:"MPFVersion",description:e=>S(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"}:{},[eu]:h.USE_MAKER_NOTES?{4:{name:"ShotInfo",description:e=>e}}:{},[el]:h.USE_MAKER_NOTES?{0:{name:"PentaxVersion",description:e=>e.join(".")},5:"PentaxModelID",555:"LevelInfo"}:{}},ef={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},ed={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},ec={getAsciiValue:function(e){return e.map(e=>String.fromCharCode(e))},getByteAt:ep,getAsciiAt:function(e,t){return e.getUint8(t)},getShortAt:function(e,t,n){return e.getUint16(t,n===b.LITTLE_ENDIAN)},getLongAt:em,getRationalAt:function(e,t,n){return[em(e,t,n),em(e,t+4,n)]},getUndefinedAt:function(e,t){return ep(e,t)},getSlongAt:eg,getSrationalAt:function(e,t,n){return[eg(e,t,n),eg(e,t+4,n)]},getIfdPointerAt:function(e,t,n){return em(e,t,n)},typeSizes:ef,tagTypes:ed,getTypeSize:function(e){if(void 0===ed[e])throw Error("No such type found.");return ef[ed[e]]}};function ep(e,t){return e.getUint8(t)}function em(e,t,n){return e.getUint32(t,n===b.LITTLE_ENDIAN)}function eg(e,t,n){return e.getInt32(t,n===b.LITTLE_ENDIAN)}let eh={1:ec.getByteAt,2:ec.getAsciiAt,3:ec.getShortAt,4:ec.getLongAt,5:ec.getRationalAt,7:ec.getUndefinedAt,9:ec.getSlongAt,10:ec.getSrationalAt,13:ec.getIfdPointerAt};function eS(e,t,n){return t+ec.getLongAt(e,t+4,n)}function eI(e,t,n,r,i,o){var a,u,l;let s=ec.getTypeSize("SHORT"),f={},d=(a=e,u=r,l=i,u+ec.getTypeSize("SHORT")<=a.byteLength?ec.getShortAt(a,u,l):0);r+=s;for(let a=0;a<d&&!(r+12>e.byteLength);a++){let a=function(e,t,n,r,i,o){var a,u,l,s,f,d,c;let p,m,g=ec.getTypeSize("SHORT"),h=g+ec.getTypeSize("SHORT"),S=h+ec.getTypeSize("LONG"),I=ec.getShortAt(e,r,i),y=ec.getShortAt(e,r+g,i),b=ec.getLongAt(e,r+h,i);if(void 0===ec.typeSizes[y]||!o&&void 0===es[t][I])return;(a=y,u=b,ec.typeSizes[a]*u<=ec.getTypeSize("LONG"))?p=ey(e,m=r+S,y,b,i):(m=ec.getLongAt(e,r+S,i),l=e,s=n,f=m,d=y,c=b,p=s+f+ec.typeSizes[d]*c<=l.byteLength?ey(e,n+m,y,b,i,33723===I):"<faulty value>"),y===ec.tagTypes.ASCII&&(p=function(e){try{return e.map(e=>decodeURIComponent(escape(e)))}catch(t){return e}}(p=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){if("\0"===e[r]){n++;continue}void 0===t[n]&&(t[n]=""),t[n]+=e[r]}return t}(p)));let C=`undefined-${I}`,U=p;if(void 0!==es[t][I])if(void 0!==es[t][I].name&&void 0!==es[t][I].description){C=es[t][I].name;try{U=es[t][I].description(p)}catch(e){U=eb(p)}}else y===ec.tagTypes.RATIONAL||y===ec.tagTypes.SRATIONAL?(C=es[t][I],U=""+p[0]/p[1]):(C=es[t][I],U=eb(p));return{id:I,name:C,value:p,description:U,__offset:m}}(e,t,n,r,i,o);void 0!==a&&(f[a.name]={id:a.id,value:a.value,description:a.description},("MakerNote"===a.name||t===el&&"LevelInfo"===a.name)&&(f[a.name].__offset=a.__offset)),r+=12}if(h.USE_THUMBNAIL&&r<e.byteLength-ec.getTypeSize("LONG")){let a=ec.getLongAt(e,r,i);0!==a&&"0th"===t&&(f.Thumbnail=eI(e,"1st",n,n+a,i,o))}return f}function ey(e,t,n,r,i,o=!1){let a=[];o&&(r*=ec.typeSizes[n],n=ec.tagTypes.BYTE);for(let o=0;o<r;o++)a.push(eh[n](e,t,i)),t+=ec.typeSizes[n];return n===ec.tagTypes.ASCII?a=ec.getAsciiValue(a):1===a.length&&(a=a[0]),a}function eb(e){return e instanceof Array?e.join(", "):e}let eC="Exif IFD Pointer",eU="GPS Info IFD Pointer",eE="Interoperability IFD Pointer",ev={read:function(e,t,n){var r,i,o,a,u,l,s,d,c,p,m,g,h,S,I,y,C,U,E;let v=b.getByteOrder(e,t),P=(r=e,i=t,o=v,a=n,eI(r,"0th",i,eS(r,i,o),o,a));return{tags:(I=(p=(u=P,l=e,s=t,d=v,c=n,P=void 0!==u[eC]?f(u,eI(l,eo,s,s+u[eC].value,d,c)):u),m=e,g=t,h=v,S=n,P=void 0!==p[eU]?f(p,eI(m,"gps",g,g+p[eU].value,h,S)):p),y=e,C=t,U=v,E=n,P=void 0!==I[eE]?f(I,eI(y,ea,C,C+I[eE].value,U,E)):I),byteOrder:v}}},eP={read:function(e,t,n){let r=b.getByteOrder(e,t),i=eI(e,"mpf",t,eS(e,t,r),r,n);return function(e,t,n,r){if(!n.MPEntry)return n;let i=[];for(let o=0;o<Math.ceil(n.MPEntry.value.length/16);o++){i[o]={};let a=eA(n.MPEntry.value,16*o,ec.getTypeSize("LONG"),r);i[o].ImageFlags=function(e){let t=[e>>31&1,e>>30&1,e>>29&1],n=[];return t[0]&&n.push("Dependent Parent Image"),t[1]&&n.push("Dependent Child Image"),t[2]&&n.push("Representative Image"),{value:t,description:n.join(", ")||"None"}}(a),i[o].ImageFormat=function(e){let t=e>>24&7;return{value:t,description:0===t?"JPEG":"Unknown"}}(a),i[o].ImageType=function(e){let t=0xffffff&e;return{value:t,description:({196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"})[t]||"Unknown"}}(a);let u=eA(n.MPEntry.value,16*o+4,ec.getTypeSize("LONG"),r);i[o].ImageSize={value:u,description:""+u};let l=function(e,t,n,r){return 0===e?0:eA(t.value,16*e+8,ec.getTypeSize("LONG"),n)+r}(o,n.MPEntry,r,t);i[o].ImageOffset={value:l,description:""+l};let s=eA(n.MPEntry.value,16*o+12,ec.getTypeSize("SHORT"),r);i[o].DependentImage1EntryNumber={value:s,description:""+s};let f=eA(n.MPEntry.value,16*o+14,ec.getTypeSize("SHORT"),r);i[o].DependentImage2EntryNumber={value:f,description:""+f},i[o].image=e.buffer.slice(l,l+u),d(i[o],"base64",function(){return c(this.image)})}return n.Images=i,n}(e,t,i,r)}};function eA(e,t,n,r){if(r===b.LITTLE_ENDIAN){let r=0;for(let i=0;i<n;i++)r+=e[t+i]<<8*i;return r}let i=0;for(let r=0;r<n;r++)i+=e[t+r]<<8*(n-1-r);return i}let ex={read:function(e,t){var n,r;let i=(n=e,r=t,ec.getShortAt(n,r)),o=function(e,t,n){if(8>n)return;let r=ec.getByteAt(e,t+7);return{value:r,description:""+r}}(e,t,i);return{"Bits Per Sample":function(e,t,n){if(3>n)return;let r=ec.getByteAt(e,t+2);return{value:r,description:""+r}}(e,t,i),"Image Height":function(e,t,n){if(5>n)return;let r=ec.getShortAt(e,t+3);return{value:r,description:`${r}px`}}(e,t,i),"Image Width":function(e,t,n){if(7>n)return;let r=ec.getShortAt(e,t+5);return{value:r,description:`${r}px`}}(e,t,i),"Color Components":o,Subsampling:o&&function(e,t,n,r){if(8+3*n>r)return;let i=[];for(let r=0;r<n;r++){let n=t+8+3*r;i.push([ec.getByteAt(e,n),ec.getByteAt(e,n+1),ec.getByteAt(e,n+2)])}return{value:i,description:i.length>1?function(e){let t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(e=>t[e[0]]).join("")}(i)+function(e){let t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return 0===e.length||void 0===e[0][1]||void 0===t[e[0][1]]?"":t[e[0][1]]}(i):""}}(e,t,o.value,i)}}},eT={read:function(e,t){var n,r;let i=(n=e,r=t,ec.getShortAt(n,r)),o=function(e,t,n){if(15>n)return;let r=ec.getByteAt(e,t+14);return{value:r,description:`${r}px`}}(e,t,i),a=function(e,t,n){if(16>n)return;let r=ec.getByteAt(e,t+15);return{value:r,description:`${r}px`}}(e,t,i),u={"JFIF Version":function(e,t,n){if(9>n)return;let r=ec.getByteAt(e,t+7),i=ec.getByteAt(e,t+7+1);return{value:256*r+i,description:r+"."+i}}(e,t,i),"Resolution Unit":function(e,t,n){var r;if(10>n)return;let i=ec.getByteAt(e,t+9);return{value:i,description:0===(r=i)?"None":1===r?"inches":2===r?"cm":"Unknown"}}(e,t,i),XResolution:function(e,t,n){if(12>n)return;let r=ec.getShortAt(e,t+10);return{value:r,description:""+r}}(e,t,i),YResolution:function(e,t,n){if(14>n)return;let r=ec.getShortAt(e,t+12);return{value:r,description:""+r}}(e,t,i),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":a};if(void 0!==o&&void 0!==a){let n=function(e,t,n,r){if(0!==n&&!(16+n>r))return{value:e.buffer.slice(t+16,t+16+n),description:"<24-bit RGB pixel data>"}}(e,t,3*o.value*a.value,i);n&&(u["JFIF Thumbnail"]=n)}for(let e in u)void 0===u[e]&&delete u[e];return u}},e_={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:ew},336:{name:"Time Sent",description:eF},346:{name:"Coded Character Set",description:eL,encoding_name:eL},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>"01"===S(e)?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{let t=S(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{let t=S(e);return"01"===t?"Object Kill":"02"===t?"Object Replace":"03"===t?"Object Append":"04"===t?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:ew},572:{name:"Time Created",description:eF},574:{name:"Digital Creation Date",description:ew},575:{name:"Digital Creation Time",description:eF},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{let t=S(e);return"a"===t?"morning":"p"===t?"evening":"b"===t?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{let t=S(e);return"P"===t?"Portrait":"L"===t?"Landscape":"S"===t?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{let t=S(e),n=t.charAt(0),r=t.charAt(1),i="";return("1"===n?i+="Mono":"2"===n&&(i+="Stereo"),"A"===r?i+=", actuality":"C"===r?i+=", question and answer session":"M"===r?i+=", music, transmitted by itself":"Q"===r?i+=", response to a question":"R"===r?i+=", raw sound":"S"===r?i+=", scener":"V"===r?i+=", voicer":"W"===r&&(i+=", wrap"),""!==i)?i:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(S(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{let t=parseInt(S(e),10);return t+(1===t?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{let t=S(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>2===e.length?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(2===e.length){let t=(e[0]<<8)+e[1];if(0===t)return"No ObjectData";if(1===t)return"IPTC-NAA Digital Newsphoto Parameter Record";if(2===t)return"IPTC7901 Recommended Message Format";else if(3===t)return"Tagged Image File Format (Adobe/Aldus Image data)";else if(4===t)return"Illustrator (Adobe Graphics data)";else if(5===t)return"AppleSingle (Apple Computer Inc)";else if(6===t)return"NAA 89-3 (ANPA 1312)";else if(7===t)return"MacBinary II";else if(8===t)return"IPTC Unstructured Character Oriented File Format (UCOFF)";else if(9===t)return"United Press International ANPA 1312 variant";else if(10===t)return"United Press International Down-Load Message";else if(11===t)return"JPEG File Interchange (JFIF)";else if(12===t)return"Photo-CD Image-Pac (Eastman Kodak)";else if(13===t)return"Microsoft Bit Mapped Graphics File [*.BMP]";else if(14===t)return"Digital Audio File [*.WAV] (Microsoft & Creative Labs)";else if(15===t)return"Audio plus Moving Video [*.AVI] (Microsoft)";else if(16===t)return"PC DOS/Windows Executable Files [*.COM][*.EXE]";else if(17===t)return"Compressed Binary File [*.ZIP] (PKWare Inc)";else if(18===t)return"Audio Interchange File Format AIFF (Apple Computer Inc)";else if(19===t)return"RIFF Wave (Microsoft Corporation)";else if(20===t)return"Freehand (Macromedia/Aldus)";else if(21===t)return'Hypertext Markup Language "HTML" (The Internet Society)';else if(22===t)return"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC";else if(23===t)return"MPEG 2 Audio Layer 3, ISO/IEC";else if(24===t)return"Portable Document File (*.PDF) Adobe";else if(25===t)return"News Industry Text Format (NITF)";else if(26===t)return"Tape Archive (*.TAR)";else if(27===t)return"Tidningarnas Telegrambyr\xe5 NITF version (TTNITF DTD)";else if(28===t)return"Ritzaus Bureau NITF version (RBNITF DTD)";else if(29===t)return"Corel Draw [*.CDR]";return`Unknown format ${t}`}return S(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{let n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},r=S(e);if(t["ObjectData Preview File Format"]){let e=S(t["ObjectData Preview File Format"].value);if(n[e]&&n[e][r])return n[e][r]}return r}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}};function ew(e){let t=S(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function eF(e){let t=S(e),n=t;return t.length>=6&&(n=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),11===t.length&&(n+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),n}function eL(e){let t=S(e);if("\x1b%G"===t)return"UTF-8";if("\x1b%5"===t)return"Windows-1252";if("\x1b%/G"===t)return"UTF-8 Level 1";if("\x1b%/H"===t)return"UTF-8 Level 2";if("\x1b%/I"===t)return"UTF-8 Level 3";else if("\x1b/A"===t)return"ISO-8859-1";else if("\x1b/B"===t)return"ISO-8859-2";else if("\x1b/C"===t)return"ISO-8859-3";else if("\x1b/D"===t)return"ISO-8859-4";else if("\x1b/@"===t)return"ISO-8859-5";else if("\x1b/G"===t)return"ISO-8859-6";else if("\x1b/F"===t)return"ISO-8859-7";else if("\x1b/H"===t)return"ISO-8859-8";return"Unknown"}let eM={get:function(){if("undefined"!=typeof TextDecoder)return TextDecoder}},eN={decode:function(e,t){let n=eM.get();if(void 0!==n&&void 0!==e)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(e){}var r=t.map(e=>String.fromCharCode(e)).join("");try{return decodeURIComponent(escape(r))}catch(e){return r}}},eO={read:function(e,t,n){try{if(Array.isArray(e))return eR(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);let{naaBlock:r,dataOffset:i}=function(e,t){for(;t+12<=e.byteLength;){var n,r;let i=function(e,t){if(0x3842494d!==e.getUint32(t,!1))throw Error("Not an IPTC resource block.");let n=e.getUint8(t+4+2),r=(n%2==0?n+1:n)+1;return{headerSize:6+r+4,type:e.getUint16(t+4),size:e.getUint32(t+4+2+r)}}(e,t);if(n=i,1028===n.type)return{naaBlock:i,dataOffset:t+i.headerSize};t+=i.headerSize+i.size+(r=i,+(r.size%2!=0))}throw Error("No IPTC NAA resource block.")}(e,t);return eR(e,r,i,n)}catch(e){return{}}}};function eR(e,t,n,r){let i,o={},a=n+t.size;for(;n<a&&n<e.byteLength;){let{tag:t,tagSize:a}=function(e,t,n,r,i){var o,a,u,l;if(o=e,a=t,28!==o.getUint8(a))return{tag:null,tagSize:0};let s=e.getUint16(t+1),f=e.getUint16(t+3);if(!i&&!e_.iptc[s])return{tag:void 0,tagSize:f};let d=function(e,t,n){let r=[];for(let i=0;i<n;i++)r.push(e.getUint8(t+i));return r}(e,t+5,f),c={id:s,name:function(e,t,n){return e?"string"==typeof e?e:"function"==typeof e.name?e.name(n):e.name:`undefined-${t}`}(e_.iptc[s],s,d),value:d,description:function(e,t,n,r){var i,o,a;if((i=e)&&void 0!==i.description)try{return e.description(t,n)}catch(e){}return(o=e,a=t,o&&a instanceof Array)?eN.decode(r,t):t}(e_.iptc[s],d,n,r)};return u=s,e_.iptc[u]&&e_.iptc[u].repeatable&&(c.repeatable=!0),l=s,e_.iptc[l]&&void 0!==e_.iptc[l].encoding_name&&(c.encoding=e_.iptc[s].encoding_name(d)),{tag:c,tagSize:f}}(e,n,o,i,r);if(null===t)break;t&&("encoding"in t&&(i=t.encoding),void 0===o[t.name]||void 0===t.repeatable?o[t.name]={id:t.id,value:t.value,description:t.description}:(o[t.name]instanceof Array||(o[t.name]=[{id:o[t.name].id,value:o[t.name].value,description:o[t.name].description}]),o[t.name].push({id:t.id,value:t.value,description:t.description}))),n+=5+a}return o}let eD={"tiff:Orientation":e=>"1"===e?"Horizontal (normal)":"2"===e?"Mirror horizontal":"3"===e?"Rotate 180":"4"===e?"Mirror vertical":"5"===e?"Mirror horizontal and rotate 270 CW":"6"===e?"Rotate 90 CW":"7"===e?"Mirror horizontal and rotate 90 CW":"8"===e?"Rotate 270 CW":e,"tiff:ResolutionUnit":e=>et.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>ek(et.XResolution,e),"tiff:YResolution":e=>ek(et.YResolution,e),"exif:ApertureValue":e=>ek(et.ApertureValue,e),"exif:GPSLatitude":eG,"exif:GPSLongitude":eG,"exif:FNumber":e=>ek(et.FNumber,e),"exif:FocalLength":e=>ek(et.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>et.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>et.ColorSpace(function(e){return"0x"===e.substring(0,2)?parseInt(e.substring(2),16):parseInt(e,10)}(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){let e=t.split(", ").map(e=>e.charCodeAt(0));return et.ComponentsConfiguration(e)}return t},"exif:Contrast":e=>et.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>et.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>et.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>et.ExposureProgram(parseInt(e,10)),"exif:ExposureTime":e=>eB(e)?et.ExposureTime(e.split("/").map(e=>parseInt(e,10))):e,"exif:MeteringMode":e=>et.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>et.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>et.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>et.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>ek(et.ShutterSpeedValue,e),"exif:WhiteBalance":e=>et.WhiteBalance(parseInt(e,10))};function ek(e,t){return eB(t)?e(t.split("/")):t}function eB(e){return/^-?\d+\/-?\d+$/.test(e)}function eG(e){let[t,n]=e.split(",");if(void 0!==t&&void 0!==n){let e=parseFloat(t),r=parseFloat(n),i=n.charAt(n.length-1);if(!Number.isNaN(e)&&!Number.isNaN(r))return""+(e+r/60)+i}return e}let eH={get:function(e){if(e)return e;if("undefined"!=typeof DOMParser)return new DOMParser;try{let{DOMParser:e,onErrorStopParsing:t}=require("@xmldom/xmldom");return new e({onError:t})}catch(e){return}}},ej={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"},e$={read:function(e,t,n){let r={};if("string"==typeof e)return eW(r,e,n),r;let[i,o]=function(e,t){if(0===t.length)return[];let n=[eV(e,t.slice(0,1))];return t.length>1&&n.push(eV(e,t.slice(1))),n}(e,t),a=eW(r,i,n);if(o){let i=eW(r,o,n);a||i||(delete r._raw,eW(r,eV(e,t),n))}return r}};class ez extends Error{constructor(e){super(e),this.name="ParseError"}}function eV(e,t){let n=new Uint8Array(t.reduce((e,t)=>e+t.length,0)),r=0;for(let i=0;i<t.length;i++){let o=t[i],a=e.buffer.slice(o.dataOffset,o.dataOffset+o.length);n.set(new Uint8Array(a),r),r+=o.length}return new DataView(n.buffer)}function eW(e,t,n){try{let{doc:r,raw:i}=function(e,t){let n=eH.get(t);if(!n)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),Error();let r="string"==typeof e?e:a(e,0,e.byteLength);return{doc:function e(t,n,r=!1){try{let e=t.parseFromString(n,"application/xml"),r=e.getElementsByTagName("parsererror");if(r.length>0)throw new ez(r[0].textContent);return e}catch(i){if("ParseError"===i.name&&function(e){let t=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/];for(let n=0;n<t.length;n++)if(new RegExp(t[n]).test(e.message))return!0;return!1}(i)&&!r)return e(t,function(e){let t=e.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/);if(!t)return e;let n=t[1],r=function(e){let t,n=[],r=/xmlns:([\w-]+)=["'][^"']+["']/g;for(;null!==(t=r.exec(e));)-1===n.indexOf(t[1])&&n.push(t[1]);return n}(e),i=(function(e){let t,n=[],r=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;for(;null!==(t=r.exec(e));){let e=t[1];"xmlns"!==e&&"xml"!==e&&-1===n.indexOf(e)&&n.push(e)}return n})(e).filter(e=>-1===r.indexOf(e));return 0===i.length?e:function(e,t,n){let r=RegExp("<"+t+"([^>]*)>");return e.replace(r,"<"+t+"$1"+n+">")}(e,n,function(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n],i=ej[r]||"http://fallback.namespace/"+r;t.push(" xmlns:"+r+'="'+i+'"')}return t.join("")}(i))}(n),!0);throw i}}(n,r.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")),raw:r}}(t,n);e._raw=(e._raw||"")+i;let o=function e(t){for(let n=0;n<t.childNodes.length;n++){if("x:xmpmeta"===t.childNodes[n].tagName)return e(t.childNodes[n]);if("rdf:RDF"===t.childNodes[n].tagName)return t.childNodes[n]}throw Error()}(r);return f(e,eX(function e(t,n=!1){let r=function(e){let t=[];for(let n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t}(t);if(1===(i=r).length&&"#text"===i[0].nodeName)return n?{}:r[0].nodeValue;var i,o=r;let a={};return o.forEach(t=>{var n,r;if((n=t).nodeName&&"#text"!==n.nodeName){let n={attributes:function(e){let t={};for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}(r=t),value:e(r)};void 0!==a[t.nodeName]?(Array.isArray(a[t.nodeName])||(a[t.nodeName]=[a[t.nodeName]]),a[t.nodeName].push(n)):a[t.nodeName]=n}}),a}(o,!0))),!0}catch(e){return!1}}function eX(e){let t={};if("string"==typeof e)return e;for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]),r.forEach(e=>{f(t,eJ(e.attributes)),"object"==typeof e.value&&f(t,eZ(e.value))})}return t}function eJ(e){let t={};for(let r in e)try{var n;n=r,"rdf:parseType"===n||eK(n)||(t[eY(r)]={value:e[r],attributes:{},description:eq(e[r],r)})}catch(e){}return t}function eK(e){return"xmlns"===e.split(":")[0]}function eY(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function eq(e,t){if(Array.isArray(e)){let n=e.map(e=>void 0!==e.value?eq(e.value):eq(e)).join(", ");return t&&"function"==typeof eD[t]?eD[t](e,n):n}if("object"==typeof e){var n,r=e;let t=[];for(let e in r){t.push(`${"CiAdrCity"===(n=e)?"CreatorCity":"CiAdrCtry"===n?"CreatorCountry":"CiAdrExtadr"===n?"CreatorAddress":"CiAdrPcode"===n?"CreatorPostalCode":"CiAdrRegion"===n?"CreatorRegion":"CiEmailWork"===n?"CreatorWorkEmail":"CiTelWork"===n?"CreatorWorkPhone":"CiUrlWork"===n?"CreatorWorkUrl":n}: ${eq(r[e].value)}`)}return t.join("; ")}try{if(t&&"function"==typeof eD[t])return eD[t](e);return decodeURIComponent(escape(e))}catch(t){return e}}function eZ(e){let t={};for(let n in e)try{eK(n)||(t[eY(n)]=function(e,t){var n,r,i,o,a;return(n=e,Array.isArray(n))?(r=e,i=t,e8(r[r.length-1],i)):(o=e,"Resource"===o.attributes["rdf:parseType"]&&"string"==typeof o.value&&""===o.value.trim())?{value:"",attributes:{},description:""}:eQ(e)?e0(e,t):e2(e)?e3(e,t):e4(e)?e5(e,t):(a=e,void 0!==e6(a.value))?function(e,t){let n=e6(e.value).value["rdf:li"],r=e1(e),i=[];return void 0===n?n=[]:Array.isArray(n)||(n=[n]),n.forEach(e=>{var t;i.push((t=e,eQ(t)?e0(t):e2(t)?e3(t).value:e4(t)?e5(t).value:e8(t)))}),{value:i,attributes:r,description:eq(i,t)}}(e,t):e8(e,t)}(e[n],n))}catch(e){}return t}function eQ(e){return"Resource"===e.attributes["rdf:parseType"]&&void 0!==e.value["rdf:value"]||void 0!==e.value["rdf:Description"]&&void 0!==e.value["rdf:Description"].value["rdf:value"]}function e0(e,t){var n;let r=e1(e);void 0!==e.value["rdf:Description"]&&(e=e.value["rdf:Description"]),f(r,e1(e),function(e){let t={};for(let n in e.value)"rdf:value"===n||eK(n)||(t[eY(n)]=e.value[n].value);return t}(e));let i=e7((n=e).value["rdf:value"])||n.value["rdf:value"].value;return{value:i,attributes:r,description:eq(i,t)}}function e1(e){let t={};for(let n in e.attributes)"rdf:parseType"===n||"rdf:resource"===n||eK(n)||(t[eY(n)]=e.attributes[n]);return t}function e2(e){return"Resource"===e.attributes["rdf:parseType"]||void 0!==e.value["rdf:Description"]&&void 0===e.value["rdf:Description"].value["rdf:value"]}function e3(e,t){let n={value:{},attributes:{}};return void 0!==e.value["rdf:Description"]&&(f(n.value,eJ(e.value["rdf:Description"].attributes)),f(n.attributes,e1(e)),e=e.value["rdf:Description"]),f(n.value,eZ(e.value)),n.description=eq(n.value,t),n}function e4(e){return 0===Object.keys(e.value).length&&void 0===e.attributes["xml:lang"]&&void 0===e.attributes["rdf:resource"]}function e5(e,t){let n=eJ(e.attributes);return{value:n,attributes:{},description:eq(n,t)}}function e6(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function e8(e,t){let n=e7(e)||eX(e.value);return{value:n,attributes:e1(e),description:eq(n,t)}}function e7(e){return e.attributes&&e.attributes["rdf:resource"]}let e9={CLOSED_SUBPATH_LENGTH:0,CLOSED_SUBPATH_BEZIER_LINKED:1,CLOSED_SUBPATH_BEZIER_UNLINKED:2,OPEN_SUBPATH_LENGTH:3,OPEN_SUBPATH_BEZIER_LINKED:4,OPEN_SUBPATH_BEZIER_UNLINKED:5,FILL_RULE:6,CLIPBOARD:7,INITIAL_FILL_RULE:8},te={2e3:{name:"PathInformation",description:function(e){let t={},n=[];for(let r=0;r<e.byteLength;r+=26){let i=ec.getShortAt(e,r);tt[i]&&(t[i]||(t[i]=tt[i].description),n.push({type:i,path:tt[i].path(e,r+2)}))}return JSON.stringify({types:t,paths:n})}},2999:{name:"ClippingPathName",description(e){let[,t]=l(e,0);return t}}},tt={[e9.CLOSED_SUBPATH_LENGTH]:{description:"Closed subpath length",path:(e,t)=>[ec.getShortAt(e,t)]},[e9.CLOSED_SUBPATH_BEZIER_LINKED]:{description:"Closed subpath Bezier knot, linked",path:tn},[e9.CLOSED_SUBPATH_BEZIER_UNLINKED]:{description:"Closed subpath Bezier knot, unlinked",path:tn},[e9.OPEN_SUBPATH_LENGTH]:{description:"Open subpath length",path:(e,t)=>[ec.getShortAt(e,t)]},[e9.OPEN_SUBPATH_BEZIER_LINKED]:{description:"Open subpath Bezier knot, linked",path:tn},[e9.OPEN_SUBPATH_BEZIER_UNLINKED]:{description:"Open subpath Bezier knot, unlinked",path:tn},[e9.FILL_RULE]:{description:"Path fill rule",path:()=>[]},[e9.INITIAL_FILL_RULE]:{description:"Initial fill rule",path:(e,t)=>[ec.getShortAt(e,t)]},[e9.CLIPBOARD]:{description:"Clipboard",path:function(e,t){return[[tr(e,t,8),tr(e,t+4,8),tr(e,t+8,8),tr(e,t+12,8)],tr(e,t+16,8)]}}};function tn(e,t){let n=[];for(let r=0;r<24;r+=8)n.push(function(e,t){let n=tr(e,t,8);return[tr(e,t+4,8),n]}(e,t+r));return n}function tr(e,t,n){var r,i;let o=ec.getLongAt(e,t),a=o&parseInt(p("1",32-n),2);return(o>>>31==0?1:-1)*(i=((0x7f000000&o)>>>32-n).toString(2)+"."+(r=a.toString(2),p("0",32-n-r.length)+r),parseInt(i.replace(".",""),2)/Math.pow(2,(i.split(".")[1]||"").length))}let ti={read:function(e,t){let n=o(new Uint8Array(e).buffer),r={},i=0;for(;i<e.length;){let e=a(n,i,ta);i+=ta;let u=ec.getShortAt(n,i),{tagName:s,tagNameSize:f}=function(e,t){let[n,r]=l(e,t);return{tagName:r,tagNameSize:1+n+ +(n%2==0)}}(n,i+=2);i+=f;let d=ec.getLongAt(n,i);if(i+=4,e===to){let e=o(n.buffer,i,d),l={id:u,value:a(e,0,d)};if(te[u]){try{l.description=te[u].description(e)}catch(e){l.description="<no description formatter>"}r[s||te[u].name]=l}else t&&(r[`undefined-${u}`]=l)}i+=d+d%2}return r}},to="8BIM",ta=to.length,tu={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},tl={4:{name:"Preferred CMM type",value:(e,t)=>a(e,t,4),description:e=>null!==e?ts(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>a(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>a(e,t,4)},20:{name:"Connection Space",value:(e,t)=>a(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>(function(e,t){let n=e.getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),o=e.getUint16(t+6);return new Date(Date.UTC(n,r,i,o,e.getUint16(t+8),e.getUint16(t+10)))})(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>{var n;return n=e.buffer.slice(t,t+4),String.fromCharCode.apply(null,new Uint8Array(n))}},40:{name:"Primary Platform",value:(e,t)=>a(e,t,4),description:e=>ts(e)},48:{name:"Device Manufacturer",value:(e,t)=>a(e,t,4),description:e=>ts(e)},52:{name:"Device Model Number",value:(e,t)=>a(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>a(e,t,4)}};function ts(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}let tf={read:function(e,t,n){var r,i;return n&&t[0].compressionMethod!==m?(r=e,0!==(i=t)[0].compressionMethod?{}:g(new DataView(r.buffer.slice(i[0].offset,i[0].offset+i[0].length)),i[0].compressionMethod,"utf-8","dataview").then(td).catch(()=>({}))):function(e,t){try{var n;let r=t.reduce((e,t)=>e+t.length,0),i=new Uint8Array(r),o=0,a=(n=e,Array.isArray(n)?new DataView(Uint8Array.from(n).buffer).buffer:n.buffer);for(let e=1;e<=t.length;e++){let n=t.find(t=>t.chunkNumber===e);if(!n)throw Error(`ICC chunk ${e} not found`);let r=a.slice(n.offset,n.offset+n.length),u=new Uint8Array(r);i.set(u,o),o+=u.length}return td(new DataView(i.buffer))}catch(e){return{}}}(e,t)}};function td(e){let t=e.buffer,n=e.getUint32();if(e.byteLength!==n)throw Error("ICC profile length not matching");if(e.byteLength<84)throw Error("ICC profile too short");let r={},i=Object.keys(tl);for(let t=0;t<i.length;t++){let n=i[t],o=tl[n],a=o.value(e,parseInt(n,10)),u=a;o.description&&(u=o.description(a)),r[o.name]={value:a,description:u}}if("acsp"!==tc(t.slice(36,40)))throw Error("ICC profile: missing signature");if(t.length<132)return r;let o=e.getUint32(128),u=132;for(let n=0;n<o;n++){var l;if(l=u,t.length<l+12)break;let n=a(e,u,4),i=e.getUint32(u+4),o=e.getUint32(u+8);if(i>t.length)break;let f=a(e,i,4);if("desc"===f){let a=e.getUint32(i+8);if(a>o)return r;tp(r,n,tc(t.slice(i+12,i+a+11)))}else if("mluc"===f){let t=e.getUint32(i+8),o=e.getUint32(i+12),u=i+16,l=[];for(let n=0;n<t;n++){let t=a(e,u+0,2),n=a(e,u+2,2),r=e.getUint32(u+4),f=e.getUint32(u+8),d=function(e,t,n){let r=[];for(let i=0;i<n&&t+i<e.byteLength;i+=2)r.push(e.getUint16(t+i));return 0===r[r.length-1]&&r.pop(),s(r)}(e,i+f,r);l.push({languageCode:t,countryCode:n,text:d}),u+=o}if(1===t)tp(r,n,l[0].text);else{let e={};for(let t=0;t<l.length;t++)e[`${l[t].languageCode}-${l[t].countryCode}`]=l[t].text;tp(r,n,e)}}else"text"===f?tp(r,n,tc(t.slice(i+8,i+o-7))):"sig "===f&&tp(r,n,tc(t.slice(i+8,i+12)));u+=12}return r}function tc(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function tp(e,t,n){tu[t]?e[tu[t].name]={value:n,description:n}:e[t]={value:n,description:n}}let tm={read:function(e,t,n,r,i){let o=eI(e,eu,t,t+n,r,i);return o.ShotInfo&&(o=f({},o,function(e){var t;let n={};return void 0!==e[27]&&(n.AutoRotate={value:e[27],description:0===(t=e[27])?"None":1===t?"Rotate 90 CW":2===t?"Rotate 180":3===t?"Rotate 270 CW":"Unknown"}),n}(o.ShotInfo.value)),delete o.ShotInfo),o}},tg={K3_III:78420},th={CAMERA_ORIENTATION:1,ROLL_ANGLE:3,PITCH_ANGLE:5},tS={read:function(e,t,n,r){var i;let o=b.getByteOrder(e,t+n+8),a=t+n,u=eI(e,el,a,a+10,o,r,!0);return(i=u).PentaxModelID&&i.PentaxModelID.value===tg.K3_III&&i.LevelInfo&&(u=f({},u,function(e,t,n){var r;let i={};if(t+7>e.byteLength)return i;let o=e.getInt8(t+th.CAMERA_ORIENTATION);i.CameraOrientation={value:o,description:0===(r=o)?"Horizontal (normal)":1===r?"Rotate 270 CW":2===r?"Rotate 180":3===r?"Rotate 90 CW":4===r?"Upwards":5===r?"Downwards":"Unknown"};let a=e.getInt16(t+th.ROLL_ANGLE,n===b.LITTLE_ENDIAN);i.RollAngle={value:a,description:""+-.5*a};let u=e.getInt16(t+th.PITCH_ANGLE,n===b.LITTLE_ENDIAN);return i.PitchAngle={value:u,description:""+-.5*u},i}(e,a+u.LevelInfo.__offset,o)),delete u.LevelInfo),u}},tI={read:function(e,t){return{"Image Width":function(e,t){if(t+0+4>e.byteLength)return;let n=ec.getLongAt(e,t);return{value:n,description:`${n}px`}}(e,t),"Image Height":function(e,t){if(t+4+4>e.byteLength)return;let n=ec.getLongAt(e,t+4);return{value:n,description:`${n}px`}}(e,t),"Bit Depth":function(e,t){if(t+8+1>e.byteLength)return;let n=ec.getByteAt(e,t+8);return{value:n,description:`${n}`}}(e,t),"Color Type":function(e,t){if(t+9+1>e.byteLength)return;let n=ec.getByteAt(e,t+9);return{value:n,description:({0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"})[n]||"Unknown"}}(e,t),Compression:function(e,t){if(t+10+1>e.byteLength)return;let n=ec.getByteAt(e,t+10);return{value:n,description:0===n?"Deflate/Inflate":"Unknown"}}(e,t),Filter:function(e,t){if(t+11+1>e.byteLength)return;let n=ec.getByteAt(e,t+11);return{value:n,description:0===n?"Adaptive":"Unknown"}}(e,t),Interlace:function(e,t){if(t+12+1>e.byteLength)return;let n=ec.getByteAt(e,t+12);return{value:n,description:({0:"Noninterlaced",1:"Adam7 Interlace"})[n]||"Unknown"}}(e,t)}}},ty={read:function(e,t,n,r){let i={},o=[];for(let a=0;a<t.length;a++){let{offset:u,length:l,type:s}=t[a],f=function(e,t,n,r,i){var o;let a,u=[],l=[],s=[],f=tb,d=m;for(let i=0;i<n&&t+i<e.byteLength;i++){if(f===tC){d=function({type:e,dataView:t,offset:n}){if(e===D){if(1===t.getUint8(n))return t.getUint8(n+1)}else if(e===k)return t.getUint8(n);return m}({type:r,dataView:e,offset:t+i}),r===D&&(i+=1),f=tP(r,f);continue}if(f===tv){a=new DataView(e.buffer.slice(t+i,t+n));break}let o=e.getUint8(t+i);0===o?f=tP(r,f):f===tb?u.push(o):f===tU?l.push(o):f===tE&&s.push(o)}if(d!==m&&!i)return{};let c=g(a,d,(o=r)===R||o===k?"latin1":"utf-8");return c instanceof Promise?c.then(e=>tA(e,r,l,u)).catch(()=>tA("<text using unknown compression>".split(""),r,l,u)):tA(c,r,l,u)}(e,u,l,s,n);if(f instanceof Promise)o.push(f.then(({name:e,value:t,description:n})=>{try{if(h.USE_EXIF&&tx(e,t))return{__exif:ev.read(t_(t),6,r).tags};if(h.USE_IPTC&&tT(e,t))return{__iptc:eO.read(t_(t),0,r)};if(e&&!tx(e,t)&&!tT(e,t))return{[e]:{value:t,description:n}}}catch(e){}return{}}));else{let{name:e,value:t,description:n}=f;e&&(i[e]={value:t,description:n})}}return{readTags:i,readTagsPromise:o.length>0?Promise.all(o):void 0}}},tb="STATE_KEYWORD",tC="STATE_COMPRESSION",tU="STATE_LANG",tE="STATE_TRANSLATED_KEYWORD",tv="STATE_TEXT";function tP(e,t){return t===tb&&[D,k].includes(e)?tC:t===tC?e===D?tU:tv:t===tU?tE:tv}function tA(e,t,n,r){var i,o;let u=(i=e)instanceof DataView?a(i,0,i.byteLength):i;return{name:function(e,t,n){let r=s(n);if(e===R||0===t.length)return r;let i=s(t);return`${r} (${i})`}(t,n,r),value:u,description:t===D?(o=e,eN.decode("UTF-8",o)):u}}function tx(e,t){return"raw profile type exif"===e.toLowerCase()&&"exif"===t.substring(1,5)}function tT(e,t){return"raw profile type iptc"===e.toLowerCase()&&"iptc"===t.substring(1,5)}function t_(e){var t=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/)[2].replace(/\n/g,"");let n=new DataView(new ArrayBuffer(t.length/2));for(let e=0;e<t.length;e+=2)n.setUint8(e/2,parseInt(t.substring(e,e+2),16));return n}let tw={read:function(e,t){let n={};for(let r=0;r<t.length;r++){let i=ec.getLongAt(e,t[r]+0),o=a(e,t[r]+4,4);o===B?(n["Pixels Per Unit X"]=function(e,t,n){if(!tF(e,t,n,0,4))return;let r=ec.getLongAt(e,t+N+0);return{value:r,description:""+r}}(e,t[r],i),n["Pixels Per Unit Y"]=function(e,t,n){if(!tF(e,t,n,4,4))return;let r=ec.getLongAt(e,t+N+4);return{value:r,description:""+r}}(e,t[r],i),n["Pixel Units"]=function(e,t,n){if(!tF(e,t,n,8,1))return;let r=ec.getByteAt(e,t+N+8);return{value:r,description:1===r?"meters":"Unknown"}}(e,t[r],i)):o===G&&(n["Modify Date"]=function(e,t,n){if(!tF(e,t,n,0,7))return;let r=ec.getShortAt(e,t+N),i=ec.getByteAt(e,t+N+2),o=ec.getByteAt(e,t+N+3),a=ec.getByteAt(e,t+N+4),u=ec.getByteAt(e,t+N+5),l=ec.getByteAt(e,t+N+6);return{value:[r,i,o,a,u,l],description:`${tL(r,4)}-${tL(i,2)}-${tL(o,2)} ${tL(a,2)}:${tL(u,2)}:${tL(l,2)}`}}(e,t[r],i))}return n}};function tF(e,t,n,r,i){return r+i<=n&&t+N+r+i<=e.byteLength}function tL(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}let tM={read:function(e,t){let n={},r=ec.getByteAt(e,t);return n.Alpha=function(e){let t=16&e;return{value:+!!t,description:t?"Yes":"No"}}(r),n.Animation=function(e){let t=2&e;return{value:+!!t,description:t?"Yes":"No"}}(r),n.ImageWidth=tN(e,t+4),n.ImageHeight=tN(e,t+7),n}};function tN(e,t){let n=ec.getByteAt(e,t)+256*ec.getByteAt(e,t+1)+65536*ec.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}let tO={read:function(e){return{"GIF Version":function(e){if(6>e.byteLength)return;let t=a(e,3,3);return{value:t,description:t}}(e),"Image Width":function(e){if(8>e.byteLength)return;let t=e.getUint16(6,!0);return{value:t,description:`${t}px`}}(e),"Image Height":function(e){if(10>e.byteLength)return;let t=e.getUint16(8,!0);return{value:t,description:`${t}px`}}(e),"Global Color Map":function(e){if(11>e.byteLength)return;let t=(128&e.getUint8(10))>>>7;return{value:t,description:1===t?"Yes":"No"}}(e),"Bits Per Pixel":function(e){if(11>e.byteLength)return;let t=(7&e.getUint8(10))+1;return{value:t,description:`${t} ${1===t?"bit":"bits"}`}}(e),"Color Resolution Depth":function(e){if(11>e.byteLength)return;let t=((112&e.getUint8(10))>>>4)+1;return{value:t,description:`${t} ${1===t?"bit":"bits"}`}}(e)}}},tR=[6,7,99],tD={get:function(e,t,n){var r;if((r=t)&&(void 0===r.Compression||tR.includes(r.Compression.value))&&r.JPEGInterchangeFormat&&r.JPEGInterchangeFormat.value&&r.JPEGInterchangeFormatLength&&r.JPEGInterchangeFormatLength.value){t.type="image/jpeg";let r=n+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(r,r+t.JPEGInterchangeFormatLength.value),d(t,"base64",function(){return c(this.image)})}return t}},tk={INCHES:2,CENTIMETERS:3,MILLIMETERS:4},tB={INCHES_TO_MM:25.4,CM_TO_MM:10,MM_TO_MM:1},tG={get:function(e,t){let n={},r=!1,i=tH(e,"exif","FocalLength",t),o=tH(e,"exif","FocalPlaneXResolution",t),a=tH(e,"exif","FocalPlaneYResolution",t),u=tH(e,"exif","FocalPlaneResolutionUnit",t),l=tH(e,"file","Image Width",t),s=tH(e,"file","Image Height",t),f=tH(e,"exif","FocalLengthIn35mmFilm",t)||function(e,t,n,r,i,o){if(e&&t&&n&&r&&i&&o)try{let a;switch(n){case tk.INCHES:a=tB.INCHES_TO_MM;break;case tk.CENTIMETERS:a=tB.CM_TO_MM;break;case tk.MILLIMETERS:a=tB.MM_TO_MM;break;default:return}let u=e[0]/e[1]*a,l=t[0]/t[1]*a,s=Math.sqrt((r/u)**2+(i/l)**2);return o[0]/o[1]*(43.27/s)}catch(e){}}(o,a,u,l,s,i);f&&(n.FocalLength35efl={value:f,description:et.FocalLengthIn35mmFilm(f)},r=!0);let d=function(e,t){if(e&&t)try{let n=t/(e[0]/e[1]);return{value:n,description:n.toFixed(1)}}catch(e){}}(i,f);d&&(n.ScaleFactorTo35mmEquivalent=d,r=!0);let c=function(e){if(e)try{let t=2*Math.atan(36/(2*e))*(180/Math.PI);return{value:t,description:t.toFixed(1)+" deg"}}catch(e){}}(f);if(c&&(n.FieldOfView=c,r=!0),r)return n}};function tH(e,t,n,r){return r&&e[t]&&e[t][n]?e[t][n].value:!r&&e[n]?e[n].value:void 0}function tj(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=Error().stack}tj.prototype=Error();let t$={MetadataMissingError:tj};var tz=n(89441).Buffer;let tV={load:function(e,t={}){var n;return"string"==typeof e?(t.async=!0,(function(e,t){var n;if(/^\w+:\/\//.test(e))return"undefined"!=typeof fetch?function(e,{length:t}={}){let n={method:"GET"};return Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),fetch(e,n).then(e=>e.arrayBuffer())}(e,t):function(e,{length:t}={}){return new Promise((n,r)=>{var i;let o={};Number.isInteger(t)&&t>=0&&(o.headers={range:`bytes=0-${t-1}`}),(i=e,/^https:\/\//.test(i)?require("https").get:require("http").get)(e,o,e=>{if(e.statusCode>=200&&e.statusCode<=299){let t=[];e.on("data",e=>t.push(tz.from(e))),e.on("error",e=>r(e)),e.on("end",()=>n(tz.concat(t)))}else r(`Could not fetch file: ${e.statusCode} ${e.statusMessage}`),e.resume()}).on("error",e=>r(e))})}(e,t);return(n=e,/^data:[^;,]*(;base64)?,/.test(n))?Promise.resolve(function(e){let t=e.substring(e.indexOf(",")+1);if(-1!==e.indexOf(";base64"))return"undefined"!=typeof atob?Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer:void 0===i?void 0:void 0!==i.from?i.from(t,"base64"):new i(t,"base64");let n=decodeURIComponent(t);return void 0!==i?void 0!==i.from?i.from(n):new i(n):Uint8Array.from(n,e=>e.charCodeAt(0)).buffer}(e)):function(e,{length:t}={}){return new Promise((n,r)=>{let i=function(){try{return require("fs")}catch(e){return}}();i.open(e,(o,a)=>{o?r(o):i.stat(e,(o,u)=>{if(o)r(o);else{let o=Math.min(u.size,void 0!==t?t:u.size),l=tz.alloc(o);i.read(a,{buffer:l,length:o},t=>{t?r(t):i.close(a,t=>{t&&console.warn(`Could not close file ${e}:`,t),n(l)})})}})})})}(e,t)})(e,t).then(e=>tW(e,t))):(n=e,"undefined"!=typeof File&&n instanceof File)?(t.async=!0,(function(e,{length:t}){return new Promise((n,r)=>{let i=new FileReader;i.onload=e=>n(e.target.result),i.onerror=()=>r(i.error),Number.isInteger(t)&&t>=0&&void 0!==e.slice?i.readAsArrayBuffer(e.slice(0,t)):i.readAsArrayBuffer(e)})})(e,t).then(e=>tW(e,t))):tW(e,t)},loadView:tX,errors:t$};function tW(e,t){return function(e){try{return tz.isBuffer(e)}catch(e){return!1}}(e)&&(e=new Uint8Array(e).buffer),tX(function(e){try{return new DataView(e)}catch(t){return new r(e)}}(e),t)}function tX(e,{expanded:t=!1,async:n=!1,includeUnknown:r=!1,domParser:i}={expanded:!1,async:!1,includeUnknown:!1,domParser:void 0}){let o=!1,a={},u=[],{fileType:l,fileDataOffset:d,jfifDataOffset:c,tiffHeaderOffset:p,iptcDataOffset:m,xmpChunks:g,iccChunks:S,mpfDataOffset:I,pngHeaderOffset:b,pngTextChunks:C,pngChunkOffsets:U,vp8xChunkOffset:E,gifHeaderOffset:v}=Q.parseAppMarkers(e,n);if(h.USE_JPEG&&h.USE_FILE&&void 0!==d){o=!0;let n=ex.read(e,d);t?a.file=n:a=f({},a,n)}if(h.USE_JPEG&&h.USE_JFIF&&void 0!==c){o=!0;let n=eT.read(e,c);t?a.jfif=n:a=f({},a,n)}if(h.USE_EXIF&&void 0!==p){o=!0;let{tags:n,byteOrder:u}=ev.read(e,p,r);if(n.Thumbnail&&(a.Thumbnail=n.Thumbnail,delete n.Thumbnail),t?(a.exif=n,function(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=y(e.exif.GPSLatitude.value),"S"===e.exif.GPSLatitudeRef.value.join("")&&(e.gps.Latitude=-e.gps.Latitude)}catch(e){}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=y(e.exif.GPSLongitude.value),"W"===e.exif.GPSLongitudeRef.value.join("")&&(e.gps.Longitude=-e.gps.Longitude)}catch(e){}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],1===e.exif.GPSAltitudeRef.value&&(e.gps.Altitude=-e.gps.Altitude)}catch(e){}}}(a)):a=f({},a,n),h.USE_TIFF&&h.USE_IPTC&&n["IPTC-NAA"]&&void 0===m){let e=eO.read(n["IPTC-NAA"].value,0,r);t?a.iptc=e:a=f({},a,e)}if(h.USE_TIFF&&h.USE_XMP&&n.ApplicationNotes&&!tJ(g)){let e=e$.read(s(n.ApplicationNotes.value),void 0,i);t?a.xmp=e:(delete e._raw,a=f({},a,e))}if(h.USE_PHOTOSHOP&&n.ImageSourceData&&n.PhotoshopSettings){let e=ti.read(n.PhotoshopSettings.value,r);t?a.photoshop=e:a=f({},a,e)}if(h.USE_TIFF&&h.USE_ICC&&n.ICC_Profile&&!tK(S)){let e=tf.read(n.ICC_Profile.value,[{offset:0,length:n.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?a.icc=e:a=f({},a,e)}if(h.USE_MAKER_NOTES&&n.MakerNote){var P;if((P=n).Make&&P.Make.value&&Array.isArray(P.Make.value)&&"Canon"===P.Make.value[0]&&P.MakerNote&&P.MakerNote.__offset){let i=tm.read(e,p,n.MakerNote.__offset,u,r);t?a.makerNotes=i:a=f({},a,i)}else if(function(e){let t="PENTAX ";return e.MakerNote.value.length>t.length&&s(e.MakerNote.value.slice(0,t.length))===t&&e.MakerNote.__offset}(n)){let i=tS.read(e,p,n.MakerNote.__offset,r);t?a.makerNotes=i:a=f({},a,i)}}n.MakerNote&&delete n.MakerNote.__offset}if(h.USE_JPEG&&h.USE_IPTC&&void 0!==m){o=!0;let n=eO.read(e,m,r);t?a.iptc=n:a=f({},a,n)}if(h.USE_XMP&&tJ(g)){o=!0;let n=e$.read(e,g,i);t?a.xmp=n:(delete n._raw,a=f({},a,n))}if((h.USE_JPEG||h.USE_WEBP)&&h.USE_ICC&&tK(S)){o=!0;let t=tf.read(e,S,n);t instanceof Promise?u.push(t.then(T)):T(t)}if(h.USE_MPF&&void 0!==I){o=!0;let n=eP.read(e,I,r);t?a.mpf=n:a=f({},a,n)}if(h.USE_PNG&&h.USE_PNG_FILE&&void 0!==b){o=!0;let n=tI.read(e,b);t?(a.png=a.png?f({},a.png,n):n,a.pngFile=n):a=f({},a,n)}if(h.USE_PNG&&void 0!==C){o=!0;let{readTags:t,readTagsPromise:i}=ty.read(e,C,n,r);_(t),i&&u.push(i.then(e=>e.forEach(_)))}if(h.USE_PNG&&void 0!==U){o=!0;let n=tw.read(e,U);t?a.png=a.png?f({},a.png,n):n:a=f({},a,n)}if(h.USE_WEBP&&void 0!==E){o=!0;let n=tM.read(e,E);t?a.riff=a.riff?f({},a.riff,n):n:a=f({},a,n)}if(h.USE_GIF&&void 0!==v){o=!0;let n=tO.read(e,v);t?a.gif=a.gif?f({},a.gif,n):n:a=f({},a,n)}let A=tG.get(a,t);A&&(t?a.composite=A:a=f({},a,A));let x=(h.USE_JPEG||h.USE_WEBP)&&h.USE_EXIF&&h.USE_THUMBNAIL&&tD.get(e,a.Thumbnail,p);if(x?(o=!0,a.Thumbnail=x):delete a.Thumbnail,l&&(t?(a.file||(a.file={}),a.file.FileType=l):a.FileType=l,o=!0),!o)throw new t$.MetadataMissingError;if(n)return Promise.all(u).then(()=>a);return a;function T(e){t?a.icc=e:a=f({},a,e)}function _(e){if(t){for(let t of["exif","iptc"]){let n=`__${t}`;e[n]&&(a[t]=a[t]?f({},a.exif,e[n]):e[n],delete e[n])}a.png=a.png?f({},a.png,e):e,a.pngText=a.pngText?f({},a.png,e):e}else a=f({},a,e.__exif?e.__exif:{},e.__iptc?e.__iptc:{},e),delete a.__exif,delete a.__iptc}}function tJ(e){return Array.isArray(e)&&e.length>0}function tK(e){return Array.isArray(e)&&e.length>0}}}]);